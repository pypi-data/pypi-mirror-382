[tool.ruff]
# Target your Python version
target-version = "py39"
# Line length for formatting tools (matches black)
line-length = 88

###########################################

[tool.ruff.lint]
# Enable commonly used rule sets
select = [
  "F405",
  "F82",
  "TID",# flake8-tidy-imports
  "ICN",
  "A"
  # "E",  # pycodestyle (PEP8)
  # "F",  # pyflakes
  # "I",  # isort (import sorting)
  # "B",  # flake8-bugbear
  # "UP", # pyupgrade
  # "SIM",# flake8-simplify
  # "TC", # flake8-type-checking
  # "C4",
  # "PTH",
]

exclude = [
  "test",
  ".git",
  "__pycache__",
  "__pypackages__",
  "site-packages",
  "build",
  "dist",
  ".venv",
  "venv",
  "migrations",
]

fixable = ["ALL"]

###########################################

[tool.ruff.lint.isort]
# Use a single line for each import
force-single-line = false
# Group imports by type
combine-as-imports = true
# Add a blank line between import groups
split-on-trailing-comma = false

###########################################

# Optional: If using a formatter like black
[tool.ruff.format]
quote-style = "double"
indent-style = "space"
line-ending = "auto"

###########################################

[tool.ruff.lint.flake8-import-conventions.extend-aliases]
# Aliases for Python modules
base64 = "base64_std"

[tool.ruff.lint.flake8-tidy-imports]
# These are function names from pyspark.sql.functions module which can conflict with standard modules
# Just future-proofing here - Not all of them are standard modules
# If required, import them using aliases
banned-module-level-imports = [
  'abs',
  'acos',
  'acosh',
  'add_months',
  'aes_decrypt',
  'aes_encrypt',
  'aggregate',
  'any_value',
  'approxCountDistinct',
  'approx_count_distinct',
  'approx_percentile',
  'array',
  'array_agg',
  'array_append',
  'array_compact',
  'array_contains',
  'array_distinct',
  'array_except',
  'array_insert',
  'array_intersect',
  'array_join',
  'array_max',
  'array_min',
  'array_position',
  'array_prepend',
  'array_remove',
  'array_repeat',
  'array_size',
  'array_sort',
  'array_union',
  'arrays_overlap',
  'arrays_zip',
  'asc',
  'asc_nulls_first',
  'asc_nulls_last',
  'ascii',
  'asin',
  'asinh',
  'assert_true',
  'atan',
  'atan2',
  'atanh',
  'avg',
  'bin',
  'bit_and',
  'bit_count',
  'bit_get',
  'bit_length',
  'bit_or',
  'bit_xor',
  'bitmap_bit_position',
  'bitmap_bucket_number',
  'bitmap_construct_agg',
  'bitmap_count',
  'bitmap_or_agg',
  'bitwiseNOT',
  'bitwise_not',
  'bool_and',
  'bool_or',
  'broadcast',
  'bround',
  'btrim',
  'bucket',
  'call_function',
  'call_udf',
  'cardinality',
  'cast',
  'cbrt',
  'ceil',
  'ceiling',
  'char',
  'char_length',
  'character_length',
  'coalesce',
  'col',
  'collect_list',
  'collect_set',
  'column',
  'concat',
  'concat_ws',
  'contains',
  'conv',
  'convert_timezone',
  'corr',
  'cos',
  'cosh',
  'cot',
  'count',
  'countDistinct',
  'count_distinct',
  'count_if',
  'count_min_sketch',
  'covar_pop',
  'covar_samp',
  'crc32',
  'create_map',
  'csc',
  'cume_dist',
  'curdate',
  'current_catalog',
  'current_database',
  'current_date',
  'current_schema',
  'current_timestamp',
  'current_timezone',
  'current_user',
  'date_add',
  'date_diff',
  'date_format',
  'date_from_unix_date',
  'date_part',
  'date_sub',
  'date_trunc',
  'dateadd',
  'datediff',
  'datepart',
  'day',
  'dayofmonth',
  'dayofweek',
  'dayofyear',
  'days',
  'decode',
  'degrees',
  'dense_rank',
  'desc',
  'desc_nulls_first',
  'desc_nulls_last',
  'e',
  'element_at',
  'elt',
  'encode',
  'endswith',
  'equal_null',
  'every',
  'exists',
  'exp',
  'explode',
  'explode_outer',
  'expm1',
  'expr',
  'extract',
  'factorial',
  'filter',
  'find_in_set',
  'first',
  'first_value',
  'flatten',
  'floor',
  'forall',
  'format_number',
  'format_string',
  'from_csv',
  'from_json',
  'from_unixtime',
  'from_utc_timestamp',
  'get',
  'get_active_spark_context',
  'get_json_object',
  'getbit',
  'greatest',
  'grouping',
  'grouping_id',
  'hash',
  'hex',
  'histogram_numeric',
  'hll_sketch_agg',
  'hll_sketch_estimate',
  'hll_union',
  'hll_union_agg',
  'hour',
  'hours',
  'hypot',
  'ifnull',
  'ilike',
  'initcap',
  'inline',
  'inline_outer',
  'input_file_block_length',
  'input_file_block_start',
  'input_file_name',
  'instr',
  'isnan',
  'isnotnull',
  'isnull',
  'java_method',
  'json_array_length',
  'json_object_keys',
  'json_tuple',
  'kurtosis',
  'lag',
  'last',
  'last_day',
  'last_value',
  'lcase',
  'lead',
  'least',
  'left',
  'length',
  'levenshtein',
  'like',
  'lit',
  'ln',
  'localtimestamp',
  'locate',
  'log',
  'log10',
  'log1p',
  'log2',
  'lower',
  'lpad',
  'ltrim',
  'make_date',
  'make_dt_interval',
  'make_interval',
  'make_timestamp',
  'make_timestamp_ltz',
  'make_timestamp_ntz',
  'make_ym_interval',
  'map_concat',
  'map_contains_key',
  'map_entries',
  'map_filter',
  'map_from_arrays',
  'map_from_entries',
  'map_keys',
  'map_values',
  'map_zip_with',
  'mask',
  'max',
  'max_by',
  'md5',
  'mean',
  'median',
  'min',
  'min_by',
  'minute',
  'mode',
  'monotonically_increasing_id',
  'month',
  'months',
  'months_between',
  'named_struct',
  'nanvl',
  'negate',
  'negative',
  'next_day',
  'now',
  'nth_value',
  'ntile',
  'nullif',
  'nvl',
  'nvl2',
  'octet_length',
  'overlay',
  'overload',
  'pandas_udf',
  'parse_url',
  'percent_rank',
  'percentile',
  'percentile_approx',
  'pi',
  'pmod',
  'posexplode',
  'posexplode_outer',
  'position',
  'positive',
  'pow',
  'power',
  'printf',
  'product',
  'quarter',
  'radians',
  'raise_error',
  'rand',
  'randn',
  'rank',
  'reduce',
  'reflect',
  'regexp',
  'regexp_count',
  'regexp_extract',
  'regexp_extract_all',
  'regexp_instr',
  'regexp_like',
  'regexp_replace',
  'regexp_substr',
  'regr_avgx',
  'regr_avgy',
  'regr_count',
  'regr_intercept',
  'regr_r2',
  'regr_slope',
  'regr_sxx',
  'regr_sxy',
  'regr_syy',
  'repeat',
  'replace',
  'reverse',
  'right',
  'rint',
  'rlike',
  'round',
  'row_number',
  'rpad',
  'rtrim',
  'schema_of_csv',
  'schema_of_json',
  'sec',
  'second',
  'sentences',
  'sequence',
  'session_window',
  'sha',
  'sha1',
  'sha2',
  'shiftLeft',
  'shiftRight',
  'shiftRightUnsigned',
  'shiftleft',
  'shiftright',
  'shiftrightunsigned',
  'shuffle',
  'sign',
  'signum',
  'sin',
  'sinh',
  'size',
  'skewness',
  'slice',
  'some',
  'sort_array',
  'soundex',
  'spark_partition_id',
  'split',
  'split_part',
  'sqrt',
  'stack',
  'startswith',
  'std',
  'stddev',
  'stddev_pop',
  'stddev_samp',
  'str_to_map',
  'struct',
  'substr',
  'substring',
  'substring_index',
  'sum',
  'sumDistinct',
  'sum_distinct',
  'tan',
  'tanh',
  'timestamp_micros',
  'timestamp_millis',
  'timestamp_seconds',
  'toDegrees',
  'toRadians',
  'to_binary',
  'to_char',
  'to_csv',
  'to_date',
  'to_json',
  'to_number',
  'to_str',
  'to_timestamp',
  'to_timestamp_ltz',
  'to_timestamp_ntz',
  'to_unix_timestamp',
  'to_utc_timestamp',
  'to_varchar',
  'transform',
  'transform_keys',
  'transform_values',
  'translate',
  'trim',
  'trunc',
  'try_add',
  'try_aes_decrypt',
  'try_avg',
  'try_divide',
  'try_element_at',
  'try_multiply',
  'try_remote_functions',
  'try_subtract',
  'try_sum',
  'try_to_binary',
  'try_to_number',
  'try_to_timestamp',
  'typeof',
  'ucase',
  'udf',
  'udtf',
  'unbase64',
  'unhex',
  'unix_date',
  'unix_micros',
  'unix_millis',
  'unix_seconds',
  'unix_timestamp',
  'unwrap_udt',
  'upper',
  'url_decode',
  'url_encode',
  'user',
  'var_pop',
  'var_samp',
  'variance',
  'version',
  'weekday',
  'weekofyear',
  'when',
  'width_bucket',
  'window',
  'window_time',
  'xpath',
  'xpath_boolean',
  'xpath_double',
  'xpath_float',
  'xpath_int',
  'xpath_long',
  'xpath_number',
  'xpath_short',
  'xpath_string',
  'xxhash64',
  'year',
  'years',
  'zip_with',
]


###########################################

# Optional: Warn if imports should be moved inside functions (Type-checking)
[tool.ruff.lint.flake8-type-checking]
strict = false
