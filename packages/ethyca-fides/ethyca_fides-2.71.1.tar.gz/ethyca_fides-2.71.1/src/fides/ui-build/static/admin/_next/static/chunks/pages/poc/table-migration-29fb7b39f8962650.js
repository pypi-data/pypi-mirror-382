(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3564],{22657:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/poc/table-migration",function(){return t(26161)}])},6675:function(e,s,t){"use strict";t.d(s,{ZS:function(){return i},a4:function(){return l}});var n=t(3228);let a=t(78780).u.injectEndpoints({endpoints:e=>({getPurposes:e.query({query:()=>"purposes"})})}),{useGetPurposesQuery:l}=a,r={purposes:{},special_purposes:{}},i=(0,n.P1)(a.endpoints.getPurposes.select(),e=>{let{data:s}=e;return s||r})},48347:function(e,s,t){"use strict";t.d(s,{W:function(){return o},m:function(){return c}});var n=t(24246),a=t(96306),l=t(32885);let{Text:r,Title:i}=a.AntTypography,o=()=>{let{isOpen:e,onOpen:s,onClose:t}=(0,a.qY0)();return{isOpen:e,onOpen:s,onClose:t}},c=e=>{let{isOpen:s,onClose:t,fidesKey:o}=e,{data:c,isLoading:u}=(0,l.ho)(o),d=(e,s)=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i,{level:5,children:e}),(null==s?void 0:s.length)?(0,n.jsx)("div",{children:(0,n.jsx)(a.vyj,{size:[0,2],wrap:!0,children:null==s?void 0:s.map(e=>(0,n.jsx)(a.j8w,{children:e},e))})}):(0,n.jsxs)(r,{italic:!0,children:["no known ",e.toLowerCase()]})]});return(0,n.jsxs)(a.u_l,{isOpen:s,onClose:t,size:"xxl",returnFocusOnClose:!1,isCentered:!0,children:[(0,n.jsx)(a.ZAr,{}),(0,n.jsxs)(a.hzk,{maxWidth:"800px",children:[(0,n.jsx)(a.xBx,{children:c?null==c?void 0:c.name:"Vendor"}),(0,n.jsx)(a.fef,{children:u?(0,n.jsx)(a.jqI,{className:"h-80 w-full",align:"center",justify:"center",children:(0,n.jsx)(a.$jN,{})}):!!c&&(0,n.jsxs)(a.AntTypography,{children:[(0,n.jsx)(i,{level:5,children:"Purposes"}),Object.entries(c.purposes||{}).length>0?(0,n.jsx)(a.UQy,{allowMultiple:!0,children:Object.entries(c.purposes).map((e,s)=>{let[t]=e;return(0,n.jsx)(a.Qdk,{children:e=>{let{isExpanded:s}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a.KFZ,{backgroundColor:s?"gray.50":"unset",children:[(0,n.jsx)(a.xuv,{flex:"1",textAlign:"left",children:t}),(0,n.jsx)(a.XEm,{})]}),(0,n.jsxs)(a.Hk3,{backgroundColor:"gray.50",children:[(0,n.jsx)(a.jqI,{className:"my-4",vertical:!0,children:d("Data uses",c.purposes[t].data_uses)}),(0,n.jsx)(a.jqI,{className:"my-4",vertical:!0,children:d("Legal basis",c.purposes[t].legal_bases)})]})]})}},s)})}):(0,n.jsx)(r,{italic:!0,children:"no known purposes"}),(0,n.jsx)("div",{className:"my-4",children:d("Features",c.features)}),(0,n.jsx)("div",{className:"my-4",children:d("Data categories",c.data_categories)})]})}),(0,n.jsxs)(a.mzw,{children:[(0,n.jsx)(a.wpx,{size:"small",onClick:t,children:"Close"}),(0,n.jsx)(a.LZC,{})]})]})]})}},26161:function(e,s,t){"use strict";t.r(s),t.d(s,{TableMigrationPOC:function(){return C}});var n=t(24246),a=t(25980),l=t(96306),r=t(86677),i=t(27378),o=t(16134),c=t(77830),u=t(6675),d=t(32735),p=t(23923),x=t(48347),j=t(28079),h=t(32885);let{Content:g}=l.AntLayout,{Title:m,Paragraph:f}=l.AntTypography,_=[{text:"Advertising",value:"advertising"},{text:"Analytics",value:"analytics"},{text:"Functional",value:"functional"},{text:"Essential",value:"essential"}],y=[{text:"Consent",value:"Consent"},{text:"Legitimate Interest",value:"Legitimate interests"}],C=()=>{let{tcf:e,dictionaryService:s}=(0,a.hz)(),t=(0,r.useRouter)(),[C,v]=(0,i.useState)(""),[b,k]=(0,i.useState)(""),[w,I]=(0,i.useState)(25),[S,T]=(0,i.useState)(1),[N,O]=(0,i.useState)(),[z,A]=(0,i.useState)({});(0,j.fd)();let E=(0,o.C)(j.U3);(0,u.a4)();let P=(0,o.C)(u.ZS),V=(0,i.useMemo)(()=>[...Object.entries(P.purposes).map(e=>{let[s,t]=e;return{text:t.name,value:s}}),...Object.entries(P.special_purposes).map(e=>{let[s,t]=e;return{text:t.name,value:s}})],[P]),F=(0,i.useMemo)(()=>E.map(e=>({text:e.name||e.fides_key,value:e.fides_key})),[E]),{isOpen:L,onOpen:q,onClose:U}=(0,x.W)(),Z=(()=>{let e=(z.data_uses||[]).map(e=>"data_uses=".concat(encodeURIComponent(e))).join("&");return{dataUses:e,legalBasis:(z.legal_bases||[]).map(e=>"legal_bases=".concat(encodeURIComponent(e))).join("&"),purposes:(z.tcf_purpose||[]).map(e=>"purposes=".concat(encodeURIComponent(e))).join("&"),specialPurposes:"",consentCategories:(z.consent_categories||[]).map(e=>"consent_category=".concat(encodeURIComponent(e))).join("&")}})(),{data:M,isLoading:R}=(0,h.de)({pageIndex:S,pageSize:w,search:b,...Z}),D=(null==M?void 0:M.total)||0,B=(null==M?void 0:M.items)||[];(0,i.useEffect)(()=>{let e=setTimeout(()=>{k(C),1!==S&&T(1)},300);return()=>clearTimeout(e)},[C]);let K=(0,i.useCallback)(e=>{v(e.target.value)},[]),W=e=>{O(e.fides_key),q()},X=[{title:"Vendor",dataIndex:"name",key:"name",filteredValue:z.name||null},...e?[{title:"TCF purpose",dataIndex:"data_uses",key:"tcf_purpose",render:e=>(0,n.jsxs)(l.j8w,{children:[e," ",1===e?"purpose":"purposes"]}),filters:V,filteredValue:z.tcf_purpose||null},{title:"Data use",dataIndex:"data_uses",key:"data_uses",render:e=>(0,n.jsxs)(l.j8w,{children:[e," ",1===e?"data use":"data uses"]}),filters:F,filteredValue:z.data_uses||null},{title:"Legal basis",dataIndex:"legal_bases",key:"legal_bases",render:e=>(0,n.jsxs)(l.j8w,{children:[e," ",1===e?"basis":"bases"]}),filters:y,filteredValue:z.legal_bases||null}]:[{title:"Categories",dataIndex:"consent_categories",key:"consent_categories",render:e=>(0,n.jsxs)(l.j8w,{children:[e," ",1===e?"category":"categories"]}),filters:_,filteredValue:z.consent_categories||null},{title:"Cookies",dataIndex:"cookies",key:"cookies",render:e=>(0,n.jsxs)(l.j8w,{children:[e," ",1===e?"cookie":"cookies"]})}]];return(0,n.jsxs)(g,{className:"overflow-auto px-10 py-6",children:[(0,n.jsx)(l.bue,{children:(0,n.jsx)(m,{children:"Table Migration POC"})}),(0,n.jsx)(f,{className:"mb-6",children:"This is a demonstration of migrating the ConsentManagementTable from TanStack Table to Ant Design Table with built-in filtering."}),L&&N?(0,n.jsx)(x.m,{isOpen:L,fidesKey:N,onClose:U}):null,(0,n.jsxs)(l.jqI,{justify:"space-between",align:"center",className:"mb-4",children:[(0,n.jsx)(l.uFc.Search,{placeholder:"Search",onSearch:e=>{v(e)},style:{width:300},value:C,onChange:K}),(0,n.jsxs)(l.vyj,{size:8,children:[(0,n.jsx)(p.Z,{buttonLabel:"Add vendors",onButtonClick:s?()=>{t.push(c.Gg)}:void 0}),(0,n.jsx)(l.wpx,{onClick:()=>{A({})},children:"Clear filters"})]})]}),(0,n.jsx)(l.V5H,{dataSource:B,columns:X,loading:R,rowKey:"id",pagination:{current:S,pageSize:w,pageSizeOptions:d.VZ,total:D},onChange:(e,s)=>{T(e.current),I(e.pageSize),A(s)},onRow:e=>({onClick:()=>W(e),style:{cursor:"pointer"}}),size:"small"})]})};s.default=C}},function(e){e.O(0,[401,3923,2888,9774,179],function(){return e(e.s=22657)}),_N_E=e.O()}]);