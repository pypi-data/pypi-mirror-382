(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5979],{23663:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/privacy-requests/configure/storage",function(){return i(64665)}])},77213:function(e,t,i){"use strict";i.d(t,{Z:function(){return m}});var s=i(24246),n=i(96306),a=i(88038),r=i.n(a),l=i(86677);i(27378);var o=i(25980),d=i(90867),u=i(42478),c=i(77830),g=()=>{let e=(0,l.useRouter)();return(0,s.jsx)(n.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,s.jsxs)(n.xuv,{children:[(0,s.jsxs)(n.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,s.jsx)(n.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,s.jsx)(n.wpx,{onClick:()=>{e.push(c.AD)},children:"Configure"})]}),(0,s.jsxs)(n.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},m=e=>{let{children:t,title:i,padded:a=!0,mainProps:c}=e,m=(0,o.hz)(),h=(0,l.useRouter)(),p="/privacy-requests"===h.pathname||"/datastore-connection"===h.pathname,v=!(m.flags.messagingConfiguration&&p),{data:f}=(0,u.JE)(void 0,{skip:v}),{data:x}=(0,d.PW)(void 0,{skip:v}),y=m.flags.messagingConfiguration&&(!f||!x)&&p;return(0,s.jsxs)(n.kCb,{"data-testid":i,direction:"column",h:"100vh",children:[(0,s.jsxs)(r(),{children:[(0,s.jsxs)("title",{children:["Fides Admin UI - ",i]}),(0,s.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsxs)(n.kCb,{as:"main",direction:"column",py:a?6:0,px:a?10:0,h:a?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...c,children:[y?(0,s.jsx)(g,{}):null,t]})]})}},58754:function(e,t,i){"use strict";var s=i(24246),n=i(96306),a=i(70788);t.Z=e=>{let{heading:t,breadcrumbItems:i,isSticky:r=!0,children:l,rightContent:o,style:d,...u}=e;return(0,s.jsxs)("div",{...u,style:r?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...d}:{paddingBottom:"24px",...d},children:[(0,s.jsxs)(n.jqI,{justify:"space-between",children:["string"==typeof t?(0,s.jsx)(n.lQT,{className:i||l?"pb-4":void 0,level:1,"data-testid":"page-heading",children:t}):t,o&&(0,s.jsx)("div",{"data-testid":"page-header-right-content",children:o})]}),!!i&&(0,s.jsx)(a.m,{className:l?"pb-4":void 0,items:i,"data-testid":"page-breadcrumb"}),l]})}},97181:function(e,t,i){"use strict";i.d(t,{d:function(){return d}});var s=i(24246),n=i(96306),a=i(34090),r=i(27378),l=i(46238),o=i(40324);let d=e=>{let{name:t,label:i,labelProps:d,tooltip:u,isRequired:c,layout:g="inline",helperText:m,...h}=e,[p,v,{setValue:f}]=(0,a.U$)(t),x=!!(v.touched&&v.error),[y,j]=(0,r.useState)("");p.value||"tags"!==h.mode&&"multiple"!==h.mode||(p.value=[]),"tags"===h.mode&&"string"==typeof p.value&&(p.value=[p.value]);let _="tags"===h.mode?(e,t)=>e?e.value!==y||p.value.includes(y)?h.optionRender?h.optionRender(e,t):e.label:'Create "'.concat(y,'"'):void 0:h.optionRender||void 0,b=e=>{j(e),h.onSearch&&h.onSearch(e)},C=(e,t)=>{f(e),h.onChange&&h.onChange(e,t)};return"inline"===g?(0,s.jsx)(n.NIc,{isInvalid:x,isRequired:c,children:(0,s.jsxs)(n.rjZ,{templateColumns:i?"1fr 3fr":"1fr",children:[i?(0,s.jsx)(o.__,{htmlFor:h.id||t,...d,children:i}):null,(0,s.jsxs)(n.jqI,{align:"center",children:[(0,s.jsxs)(n.jqI,{vertical:!0,flex:1,className:"mr-2",children:[(0,s.jsx)(n.WPr,{...p,id:h.id||t,"data-testid":"controlled-select-".concat(p.name),...h,optionRender:_,onSearch:"tags"===h.mode?b:void 0,onChange:C,value:p.value||void 0,status:x?"error":void 0}),m&&(0,s.jsx)(n.Q6r,{children:m}),(0,s.jsx)(o.Bc,{isInvalid:x,message:v.error,fieldName:p.name})]}),(0,s.jsx)(l.b,{label:u,className:x?"mt-2 self-start":void 0})]})]})}):(0,s.jsx)(n.NIc,{isInvalid:x,isRequired:c,children:(0,s.jsxs)(n.gCW,{alignItems:"start",children:[(0,s.jsxs)(n.jqI,{align:"center",children:[i?(0,s.jsx)(o.__,{htmlFor:h.id||t,fontSize:"xs",my:0,mr:1,...d,children:i}):null,(0,s.jsx)(l.b,{label:u})]}),(0,s.jsx)(n.WPr,{...p,id:h.id||t,"data-testid":"controlled-select-".concat(p.name),...h,optionRender:_,onSearch:"tags"===h.mode?b:void 0,onChange:C,value:p.value||void 0,status:x?"error":void 0}),m&&(0,s.jsx)(n.Q6r,{style:{marginTop:0},children:m}),(0,s.jsx)(o.Bc,{isInvalid:x,message:v.error,fieldName:p.name})]})})}},17245:function(e,t,i){"use strict";i.d(t,{HK:function(){return r},VY:function(){return n.V},pI:function(){return u},h0:function(){return s.h},Rx:function(){return m},rK:function(){return p}});var s=i(36866),n=i(84306),a=i(812);let r=()=>{let{errorAlert:e}=(0,n.V)();return{handleError:t=>{let i="An unexpected error occurred. Please try again.";(0,a.Ot)(t)?i=t.data.detail:(0,a.tB)(t)&&(i=t.data.detail[0].msg),e(i)}}};var l=i(27378),o=i(20682),d=i(21910);let u=e=>{let{data:t}=(0,o.$I)({}),i=(0,l.useMemo)(()=>(null==t?void 0:t.items)||[],[t]);return(0,l.useMemo)(()=>{var t;if(!e)return"";if(e.connection_type===d.Rj.SAAS&&(null===(t=e.saas_config)||void 0===t?void 0:t.type)){let t=i.find(t=>{var i;return t.identifier===(null===(i=e.saas_config)||void 0===i?void 0:i.type)});if(t)return t}return e},[e,i])};var c=i(40431);let g=()=>({search:c.Oi.withDefault("")}),m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{defaultSearchQuery:t,onSearchChange:i}=e,s=(0,l.useMemo)(()=>g(),[]),[n,a]=(0,c.XI)(s,{history:"push"}),r=(0,l.useMemo)(()=>({searchQuery:n.search||t||void 0}),[n,t]),o=(0,l.useCallback)(e=>{a({search:e||null})},[a]),d=(0,l.useCallback)(()=>{a({search:null})},[a]);return(0,l.useEffect)(()=>{i&&i(r)},[r,i]),{...r,updateSearch:o,resetSearch:d,searchProps:{value:r.searchQuery||"",onChange:o,onClear:()=>o("")}}},h=e=>({sortKey:e?(0,c.jx)([...e]):c.Oi.withDefault(""),sortOrder:(0,c.km)(["ascend","descend"])}),p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{defaultSortKey:t,defaultSortOrder:i,onSortingChange:s,validColumns:n}=e,a=(0,l.useMemo)(()=>h(n),[n]),[r,o]=(0,c.XI)(a,{history:"push"}),d=(0,l.useMemo)(()=>{var e;return{sortKey:r.sortKey||t,sortOrder:null!==(e=r.sortOrder)&&void 0!==e?e:i}},[r,t,i]),u=(0,l.useCallback)((e,t)=>{o({sortKey:e?String(e):null,sortOrder:null!=t?t:null})},[o]),g=(0,l.useCallback)(()=>{o({sortKey:null,sortOrder:null})},[o]);return(0,l.useEffect)(()=>{s&&s(d)},[d,s]),{...d,updateSorting:u,resetSorting:g,sortingProps:{sortDirections:["ascend","descend"],defaultSortOrder:d.sortOrder,sortedInfo:d.sortKey?{field:d.sortKey,order:d.sortOrder}:void 0}}}},84306:function(e,t,i){"use strict";i.d(t,{V:function(){return a}});var s=i(24246),n=i(96306);let a=()=>{let e=(0,n.pmc)();return{errorAlert:(t,i,a)=>{let r={...a,position:(null==a?void 0:a.position)||"top",render:e=>{let{onClose:a}=e;return(0,s.jsxs)(n.bZj,{alignItems:"normal",status:"error","data-testid":"error-alert",children:[(0,s.jsx)(n.zMQ,{}),(0,s.jsxs)(n.xuv,{children:[i&&(0,s.jsx)(n.CdC,{children:i}),(0,s.jsx)(n.XaZ,{children:t})]}),(0,s.jsx)(n.PZ7,{onClick:a,position:"relative",right:0,size:"sm",top:-1})]})}};(null==a?void 0:a.id)&&e.isActive(a.id)?e.update(a.id,r):e(r)},successAlert:(t,i,a)=>{let r={...a,position:(null==a?void 0:a.position)||"top",render:e=>{let{onClose:a}=e;return(0,s.jsxs)(n.bZj,{alignItems:"normal",status:"success",variant:"subtle","data-testid":"success-alert",children:[(0,s.jsx)(n.zMQ,{}),(0,s.jsxs)(n.xuv,{children:[i&&(0,s.jsx)(n.CdC,{children:i}),(0,s.jsx)(n.XaZ,{children:t})]}),(0,s.jsx)(n.PZ7,{onClick:a,position:"relative",right:0,size:"sm",top:-1})]})}};(null==a?void 0:a.id)&&e.isActive(a.id)?e.update(a.id,r):e(r)}}}},70788:function(e,t,i){"use strict";i.d(t,{m:function(){return d}});var s=i(24246),n=i(96306),a=i(79894),r=i.n(a),l=i(27378);let{Text:o}=n.AntTypography,d=e=>{let{items:t,...i}=e,a=(0,l.useMemo)(()=>null==t?void 0:t.map((e,i)=>{let a=i===t.length-1,l={...e},d=l.onClick&&!l.href;return("string"==typeof l.title&&(l.title=(0,s.jsx)(o,{style:{color:"inherit",maxWidth:a?void 0:400},ellipsis:!a,id:a?"breadcrumb-current-page":void 0,children:l.title})),d)?l.title=(0,s.jsx)(n.wpx,{type:"text",size:"small",icon:l.icon,onClick:l.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:l.title}):(l.icon&&(l.title=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"anticon align-text-bottom",children:l.icon}),l.title]})),l.href&&l.title&&(l.title=(0,s.jsx)(r(),{href:l.href,className:"ant-breadcrumb-link",children:l.title}),delete l.href)),l}),[t]);return(0,s.jsx)(n.zrq,{items:a,...i})}},36866:function(e,t,i){"use strict";i.d(t,{h:function(){return d}});var s=i(40431),n=i(27378),a=i(55484);let r=(0,s.jo)({parse(e){let t=parseInt(e,10);try{return a.Rx().integer().positive().validateSync(t),t}catch(e){return null}},serialize:e=>e.toString()});var l=i(32735);let o=function(){var e,t;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{page:r.withDefault(l.Ej),size:i.pageSizeOptions?(0,s.bJ)(i.pageSizeOptions).withDefault(null!==(e=i.pageSize)&&void 0!==e?e:l.L8):r.withDefault(null!==(t=i.pageSize)&&void 0!==t?t:l.L8)}},d=function(){var e,t;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{defaultPageSize:a=l.L8,pageSizeOptions:r,showSizeChanger:d=!0}=i,u=null!=r?r:l.VZ,c=(0,n.useMemo)(()=>o({pageSize:a,pageSizeOptions:r}),[a,r]),[g,m]=(0,s.XI)(c,{history:"push"}),h={pageIndex:null!==(e=g.page)&&void 0!==e?e:l.Ej,pageSize:null!==(t=g.size)&&void 0!==t?t:a};return{...h,updatePageIndex:e=>{m({page:e})},updatePageSize:e=>{m({page:e!==h.pageSize?l.Ej:h.pageIndex,size:e})},resetPagination:()=>{m({page:l.Ej,size:a})},nextPage:()=>{m(e=>{let{page:t,size:i}=e;return{page:t+1,size:i}})},previousPage:()=>{m(e=>{let{page:t,size:i}=e;return{page:t-1,size:i}})},pageSizeOptions:u,showSizeChanger:d}}},42478:function(e,t,i){"use strict";i.d(t,{FU:function(){return d},JE:function(){return n},Ki:function(){return c},SU:function(){return g},W:function(){return m},h9:function(){return a},jc:function(){return s},qt:function(){return o},sn:function(){return u}});let{useGetEmailInviteStatusQuery:s,useGetActiveMessagingProviderQuery:n,useCreateMessagingConfigurationMutation:a,useCreateMessagingConfigurationSecretsMutation:r,useGetMessagingConfigurationDetailsQuery:l,useGetMessagingConfigurationsQuery:o,useGetMessagingConfigurationByKeyQuery:d,useUpdateMessagingConfigurationByKeyMutation:u,useUpdateMessagingConfigurationSecretsByKeyMutation:c,useCreateTestConnectionMessageMutation:g,useDeleteMessagingConfigurationByKeyMutation:m}=i(78780).u.injectEndpoints({endpoints:e=>({getEmailInviteStatus:e.query({query:()=>({url:"/messaging/email-invite/status"}),providesTags:()=>["Email Invite Status"]}),createMessagingConfiguration:e.mutation({query:e=>({url:"messaging/config",method:"POST",body:e}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getActiveMessagingProvider:e.query({queryFn:async(e,t,i,s)=>{let n=await s({url:"messaging/default/active"});return n.error&&404===n.error.status?{data:null}:n},providesTags:["Messaging Config"]}),createMessagingConfigurationSecrets:e.mutation({query:e=>({url:"messaging/default/".concat(e.service_type,"/secret"),method:"PUT",body:e.details}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getMessagingConfigurationDetails:e.query({query:e=>({url:"messaging/default/".concat(e.type)}),providesTags:["Messaging Config"]}),getMessagingConfigurations:e.query({query:()=>({url:"messaging/config"}),providesTags:["Messaging Config"]}),getMessagingConfigurationByKey:e.query({query:e=>({url:"messaging/config/".concat(e.key)}),providesTags:["Messaging Config"]}),createTestConnectionMessage:e.mutation({query:e=>({url:"messaging/test/".concat(e.service_type),method:"POST",body:e.details}),invalidatesTags:["Messaging Config"]}),updateMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"PATCH",body:e.config}),invalidatesTags:["Messaging Config","Configuration Settings"]}),updateMessagingConfigurationSecretsByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key,"/secret"),method:"PUT",body:e.secrets}),invalidatesTags:["Messaging Config","Configuration Settings"]}),deleteMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"DELETE"}),invalidatesTags:["Messaging Config","Configuration Settings"]})})})},71784:function(e,t,i){"use strict";i.d(t,{DE:function(){return l},I3:function(){return n},kN:function(){return r},rE:function(){return a}});var s=i(21910);let n=[...new Map([[s.q2.APPROVED,"Approved"],[s.q2.AWAITING_EMAIL_SEND,"Awaiting email send"],[s.q2.CANCELED,"Canceled"],[s.q2.COMPLETE,"Completed"],[s.q2.DENIED,"Denied"],[s.q2.ERROR,"Error"],[s.q2.IN_PROCESSING,"In progress"],[s.q2.PENDING,"New"],[s.q2.PAUSED,"Paused"],[s.q2.IDENTITY_UNVERIFIED,"Unverified"],[s.q2.REQUIRES_INPUT,"Requires input"],[s.q2.REQUIRES_MANUAL_FINALIZATION,"Requires finalization"]])].map(e=>{let[t,i]=e;return{label:i,value:t}}),a=new Map([[s.Us.ACCESS,"Access"],[s.Us.ERASURE,"Erasure"],[s.Us.CONSENT,"Consent"],[s.Us.UPDATE,"Update"]]),r=[...a].map(e=>{let[t,i]=e;return{label:i,value:t}}),l={local:"local",s3:"s3",gcs:"gcs"}},64665:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return j}});var s=i(24246),n=i(96306),a=i(27378),r=i(812),l=i(17245),o=i(77213),d=i(77830),u=i(58754),c=i(7426),g=i(71784),m=i(90867),h=i(34090),p=i(97181),v=i(40324),f=e=>{var t,i,o,d,u;let{storageDetails:c}=e,[f,x]=(0,a.useState)(""),[y]=(0,m.gC)(),[j]=(0,m.cf)(),{handleError:_}=(0,l.HK)(),{successAlert:b}=(0,l.VY)(),C={type:g.DE.gcs,auth_method:null!==(o=null==c?void 0:null===(t=c.details)||void 0===t?void 0:t.auth_method)&&void 0!==o?o:"",bucket:null!==(d=null==c?void 0:null===(i=c.details)||void 0===i?void 0:i.bucket)&&void 0!==d?d:"",format:null!==(u=null==c?void 0:c.format)&&void 0!==u?u:""},S=async e=>{let t=await y({type:g.DE.gcs,details:{auth_method:e.auth_method,bucket:e.bucket},format:e.format});(0,r.D4)(t)?_(t.error):(x(e.auth_method),b("Google Cloud Storage credentials successfully updated."))},k=async e=>{let t=e.private_key.trim();t.includes("\\n")&&(t=t.replace(/\\n/g,"\n"));let i=await j({details:{type:e.type,project_id:e.project_id,private_key_id:e.private_key_id,private_key:t,client_email:e.client_email,client_id:e.client_id,auth_uri:e.auth_uri,token_uri:e.token_uri,auth_provider_x509_cert_url:e.auth_provider_x509_cert_url,client_x509_cert_url:e.client_x509_cert_url,universe_domain:e.universe_domain},type:g.DE.gcs});(0,r.D4)(i)?_(i.error):b("Google Cloud Storage secrets successfully updated.")};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.X6q,{fontSize:"md",fontWeight:"semibold",mt:10,children:"Google Cloud Storage configuration"}),(0,s.jsx)(n.Kqy,{children:(0,s.jsx)(h.J9,{initialValues:C,onSubmit:S,enableReinitialize:!0,children:e=>{let{isSubmitting:t,handleReset:i}=e;return(0,s.jsxs)(h.l0,{children:[(0,s.jsxs)(n.Kqy,{mt:5,spacing:5,children:[(0,s.jsx)(p.d,{name:"format",label:"Format",options:[{label:"json",value:"json"},{label:"csv",value:"csv"}],"data-testid":"format",isRequired:!0}),(0,s.jsx)(p.d,{name:"auth_method",label:"Auth method",options:[{label:"Service Account Keys",value:"service_account_keys"},{label:"Application Default Credentials",value:"adc"}],"data-testid":"auth_method",isRequired:!0}),(0,s.jsx)(v.j0,{"data-testid":"bucket",name:"bucket",label:"Bucket",isRequired:!0})]}),(0,s.jsx)(n.wpx,{onClick:()=>i(),className:"mr-2 mt-5",children:"Cancel"}),(0,s.jsx)(n.wpx,{htmlType:"submit",className:"mt-5",disabled:t,type:"primary","data-testid":"save-btn",children:"Save"})]})}})}),"service_account_keys"===f&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.izJ,{mt:5}),(0,s.jsx)(n.X6q,{fontSize:"md",fontWeight:"semibold",mt:5,children:"Storage destination"}),(0,s.jsx)(n.Kqy,{children:(0,s.jsx)(h.J9,{initialValues:{type:"",project_id:"",private_key_id:"",private_key:"",client_email:"",client_id:"",auth_uri:"",token_uri:"",auth_provider_x509_cert_url:"",client_x509_cert_url:"",universe_domain:""},onSubmit:k,children:e=>{let{isSubmitting:t,handleReset:i}=e;return(0,s.jsxs)(h.l0,{children:[(0,s.jsxs)(n.Kqy,{mt:5,spacing:5,children:[(0,s.jsx)(v.j0,{name:"type",label:"Type"}),(0,s.jsx)(v.j0,{name:"project_id",label:"Project ID"}),(0,s.jsx)(v.j0,{name:"private_key_id",label:"Private key ID",type:"password"}),(0,s.jsx)(v.j0,{name:"private_key",label:"Private key",type:"password"}),(0,s.jsx)(v.j0,{name:"client_email",label:"Client email"}),(0,s.jsx)(v.j0,{name:"client_id",label:"Client ID"}),(0,s.jsx)(v.j0,{name:"auth_uri",label:"Auth URI"}),(0,s.jsx)(v.j0,{name:"token_uri",label:"Token URI"}),(0,s.jsx)(v.j0,{name:"auth_provider_x509_cert_url",label:"Auth provider x509 cert URL"}),(0,s.jsx)(v.j0,{name:"client_x509_cert_url",label:"Client x509 cert URL"}),(0,s.jsx)(v.j0,{name:"universe_domain",label:"Universe domain"})]}),(0,s.jsxs)(n.xuv,{mt:10,children:[(0,s.jsx)(n.wpx,{onClick:()=>i(),className:"mr-2 mt-5",children:"Cancel"}),(0,s.jsx)(n.wpx,{disabled:t,htmlType:"submit",type:"primary",className:"mt-5","data-testid":"save-btn",children:"Save"})]})]})}})})]})]})},x=e=>{var t,i,o,d,u;let{storageDetails:c}=e,[f,x]=(0,a.useState)(""),[y]=(0,m.gC)(),[j]=(0,m.cf)(),{handleError:_}=(0,l.HK)(),{successAlert:b}=(0,l.VY)(),C={type:g.DE.s3,auth_method:null!==(o=null==c?void 0:null===(t=c.details)||void 0===t?void 0:t.auth_method)&&void 0!==o?o:"",bucket:null!==(d=null==c?void 0:null===(i=c.details)||void 0===i?void 0:i.bucket)&&void 0!==d?d:"",format:null!==(u=null==c?void 0:c.format)&&void 0!==u?u:""},S=async e=>{let t=await y({type:g.DE.s3,details:{auth_method:e.auth_method,bucket:e.bucket},format:e.format});(0,r.D4)(t)?_(t.error):(x(e.auth_method),b("S3 storage credentials successfully updated."))},k=async e=>{let t=await j({details:{aws_access_key_id:e.aws_access_key_id,aws_secret_access_key:e.aws_secret_access_key},type:g.DE.s3});(0,r.D4)(t)?_(t.error):b("S3 storage secrets successfully updated.")};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.X6q,{fontSize:"md",fontWeight:"semibold",mt:10,children:"S3 storage configuration"}),(0,s.jsx)(n.Kqy,{children:(0,s.jsx)(h.J9,{initialValues:C,onSubmit:S,enableReinitialize:!0,children:e=>{let{isSubmitting:t,handleReset:i}=e;return(0,s.jsxs)(h.l0,{children:[(0,s.jsxs)(n.Kqy,{mt:5,spacing:5,children:[(0,s.jsx)(p.d,{name:"format",label:"Format",options:[{label:"json",value:"json"},{label:"csv",value:"csv"}],"data-testid":"format",isRequired:!0}),(0,s.jsx)(p.d,{name:"auth_method",label:"Auth method",options:[{label:"secret_keys",value:"secret_keys"},{label:"automatic",value:"automatic"}],"data-testid":"auth_method",isRequired:!0}),(0,s.jsx)(v.j0,{"data-testid":"bucket",name:"bucket",label:"Bucket",isRequired:!0})]}),(0,s.jsx)(n.wpx,{onClick:()=>i(),className:"mr-2 mt-5",children:"Cancel"}),(0,s.jsx)(n.wpx,{htmlType:"submit",className:"mt-5",disabled:t,type:"primary","data-testid":"save-btn",children:"Save"})]})}})}),"secret_keys"===f?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.izJ,{mt:5}),(0,s.jsx)(n.X6q,{fontSize:"md",fontWeight:"semibold",mt:5,children:"Storage destination"}),(0,s.jsx)(n.Kqy,{children:(0,s.jsx)(h.J9,{initialValues:{aws_access_key_id:"",aws_secret_access_key:""},onSubmit:k,children:e=>{let{isSubmitting:t,handleReset:i}=e;return(0,s.jsxs)(h.l0,{children:[(0,s.jsxs)(n.Kqy,{mt:5,spacing:5,children:[(0,s.jsx)(v.j0,{name:"aws_access_key_id",label:"AWS access key ID"}),(0,s.jsx)(v.j0,{name:"aws_secret_access_key",label:"AWS secret access key",type:"password"})]}),(0,s.jsxs)(n.xuv,{mt:10,children:[(0,s.jsx)(n.wpx,{onClick:()=>i(),className:"mr-2 mt-5",children:"Cancel"}),(0,s.jsx)(n.wpx,{disabled:t,htmlType:"submit",type:"primary",className:"mt-5","data-testid":"save-btn",children:"Save"})]})]})}})})]}):null]})},y=()=>{let{successAlert:e}=(0,l.VY)(),{handleError:t}=(0,l.HK)(),[i,h]=(0,a.useState)(""),{data:p}=(0,m.PW)(),{data:v}=(0,m.Au)({type:i}),[y,{isLoading:j}]=(0,m.gC)(),[_]=(0,c.L)();(0,a.useEffect)(()=>{p&&h(p.type)},[p]);let b=async i=>{if(i===g.DE.local){let s=await y({type:i,details:{},format:"json"});(0,r.D4)(s)?t(s.error):e("Configured storage details successfully.")}let s=await _({storage:{active_default_storage_type:i}});(0,r.D4)(s)?t(s.error):h(i)},C={s3:x,gcs:f}[i];return(0,s.jsxs)(o.Z,{title:"Configure Privacy Requests - Storage",children:[(0,s.jsx)(u.Z,{heading:"Privacy Requests",breadcrumbItems:[{title:"All requests",href:d.Jw},{title:"Configure requests",href:d.fz},{title:"Storage"}]}),(0,s.jsx)(n.X6q,{mb:5,fontSize:"md",fontWeight:"semibold",children:"Configure storage"}),(0,s.jsxs)(n.xuv,{display:"flex",flexDirection:"column",width:"50%",children:[(0,s.jsx)(n.xuv,{mb:5,children:"Fides requires a storage destination to store and share the results of privacy requests. For a production setup, it is highly recommended to have S3 as a storage destination. Ensure you have completed the setup for the storage destination and have the details handy prior to the following steps."}),(0,s.jsxs)(n.xuv,{children:["To configure a Storage destination, first choose a method to store your results. Fides currently supports"," ",(0,s.jsx)(n.xvT,{as:"span",color:"complimentary.500",children:"Local"}),", ",(0,s.jsx)(n.xvT,{as:"span",color:"complimentary.500",children:"S3"})," ","and"," ",(0,s.jsx)(n.xvT,{as:"span",color:"complimentary.500",children:"GCS"})," ","storage methods."]}),(0,s.jsx)(n.X6q,{fontSize:"md",fontWeight:"semibold",mt:10,children:"Choose storage type to configure"}),(0,s.jsx)(n.y02.Group,{disabled:j,onChange:e=>b(e.target.value),value:i,"data-testid":"privacy-requests-storage-selection",className:"p-3",children:(0,s.jsxs)(n.jqI,{children:[(0,s.jsx)(n.y02,{value:"local","data-testid":"option-local",children:"Local"},"local"),(0,s.jsx)(n.y02,{value:"s3","data-testid":"option-s3",children:"S3"},"s3"),(0,s.jsx)(n.y02,{value:"gcs","data-testid":"option-gcs",children:"GCS"},"gcs")]})}),C&&v&&(0,s.jsx)(C,{storageDetails:v})]})]})},j=()=>(0,s.jsx)(y,{})}},function(e){e.O(0,[431,2888,9774,179],function(){return e(e.s=23663)}),_N_E=e.O()}]);