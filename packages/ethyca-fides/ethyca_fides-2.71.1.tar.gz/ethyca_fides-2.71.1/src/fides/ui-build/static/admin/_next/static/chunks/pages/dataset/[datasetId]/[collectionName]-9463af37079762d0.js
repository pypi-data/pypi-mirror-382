(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6556],{78859:function(e,t,o){var n=o(71928),i=o(76747),l=o(42383),a=o(11611),s=o(37948);e.exports=function(e,t,o,r){if(!a(e))return e;t=i(t,e);for(var d=-1,c=t.length,u=c-1,f=e;null!=f&&++d<c;){var m=s(t[d]),x=o;if("__proto__"===m||"constructor"===m||"prototype"===m)break;if(d!=u){var v=f[m];void 0===(x=r?r(v,m,f):void 0)&&(x=a(v)?v:l(t[d+1])?[]:{})}n(f,m,x),f=f[m]}return e}},80396:function(e,t,o){var n=o(79867),i=o(78859);e.exports=function(e,t,o,l){return i(e,t,o(n(e,t)),l)}},62079:function(e,t,o){var n=o(31137);e.exports=function(e){return"function"==typeof e?e:n}},30454:function(e,t,o){var n=o(40699);e.exports=function(e){return n(e,5)}},47215:function(e,t,o){var n=o(78859);e.exports=function(e,t,o){return null==e?e:n(e,t,o)}},90271:function(e,t,o){var n=o(80396),i=o(62079);e.exports=function(e,t,o){return null==e?e:n(e,t,i(o))}},59972:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dataset/[datasetId]/[collectionName]",function(){return o(47355)}])},12627:function(e,t,o){"use strict";var n=o(24246),i=o(79283),l=o(34929);t.Z=e=>{let{selectedTaxonomies:t,showDisabled:o=!1,...a}=e,{getDataCategoryDisplayNameProps:s,getDataCategories:r}=(0,l.Z)(),d=(o?r():r().filter(e=>e.active)).filter(e=>!(null==t?void 0:t.includes(e.fides_key))).map(e=>{let{name:t,primaryName:o}=s(e.fides_key);return{value:e.fides_key,name:t,primaryName:o,description:e.description||""}});return(0,n.jsx)(i.l,{options:d,...a})}},66112:function(e,t,o){"use strict";var n=o(24246),i=o(96306),l=o(27378),a=o(12627),s=o(34929),r=o(26183);t.Z=e=>{let{selectedTaxonomies:t,onAddTaxonomy:o,onRemoveTaxonomy:d}=e,[c,u]=(0,l.useState)(!1),{getDataCategoryDisplayName:f}=(0,s.Z)();return(0,n.jsxs)(r.Z,{children:[t.map(e=>(0,n.jsx)(i.j8w,{"data-testid":"classification-".concat(e),color:"white",closable:!0,onClose:()=>d(e),closeButtonLabel:"Remove category",children:f(e)},e)),(0,n.jsx)(i.j8w,{onClick:()=>u(!0),"data-testid":"add-category-btn",addable:!0,"aria-label":"Add category"}),c&&(0,n.jsx)(i.xuv,{className:"select-wrapper",position:"absolute",zIndex:10,top:"0",left:"0",width:"100%",height:"max",bgColor:"#fff",children:(0,n.jsx)(a.Z,{selectedTaxonomies:t,onChange:e=>{u(!1),o(e)},onBlur:()=>u(!1),open:c})})]})}},76252:function(e,t,o){"use strict";var n=o(24246),i=o(96306),l=o(30454),a=o.n(l),s=o(47215),r=o.n(s),d=o(90271),c=o.n(d),u=o(79806),f=o(20386),m=o(63927),x=o(69435);t.Z=e=>{let{field:t,isOpen:o,onClose:l,dataset:s,collectionName:d,subfields:v}=e,[p]=(0,f.TG)(),{isOpen:h,onOpen:g,onClose:j}=(0,i.qY0)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.ZP,{isOpen:o,onClose:l,description:"Fields are an array of objects that describe the collection's fields. Provide additional context to this field by filling out the fields below.",header:(0,n.jsx)(u.zR,{title:"Field Name: ".concat(null==t?void 0:t.name)}),footer:(0,n.jsx)(u.Gn,{onClose:l,onDelete:g,formId:m.e}),children:(0,n.jsx)(m.Z,{values:t,onSubmit:e=>{let o=(0,x.Fk)({dataset:s,collectionName:d,subfields:v?[...v,(null==t?void 0:t.name)||""]:[(null==t?void 0:t.name)||""]}),n={...t,...e},i=a()(s);r()(i,o,n),p(i),l()},dataType:"field"})}),(0,n.jsx)(i.cVQ,{isOpen:h,onClose:j,onConfirm:()=>{let e=(0,x.Fk)({dataset:s,collectionName:d,subfields:v}),o=a()(s);c()(o,e,e=>({...e,fields:e.fields.filter(e=>e.name!==(null==t?void 0:t.name))})),p(o),l(),j()},title:"Delete Field",message:(0,n.jsxs)(i.xvT,{children:["You are about to permanently delete the field named"," ",(0,n.jsx)(i.xvT,{color:"complimentary.500",as:"span",fontWeight:"bold",children:null==t?void 0:t.name})," ","from this dataset. Are you sure you would like to continue?"]})})]})}},47355:function(e,t,o){"use strict";o.r(t);var n=o(24246),i=o(92222),l=o(59003),a=o(96306),s=o(86677),r=o(27378),d=o(77213),c=o(77830),u=o(58754),f=o(47935),m=o(66112),x=o(69828),v=o(41966),p=o(76252),h=o(69435);let g=(0,i.Cl)(),j=()=>(0,n.jsx)(a.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"no-results-notice",alignSelf:"center",margin:"auto",textAlign:"center",children:(0,n.jsx)(a.gCW,{children:(0,n.jsx)(a.xvT,{fontSize:"md",fontWeight:"600",children:"No fields found."})})});t.default=()=>{let e=(0,s.useRouter)(),[t]=(0,v.TG)(),o=decodeURIComponent(e.query.datasetId),b=decodeURIComponent(e.query.collectionName),{isLoading:C,data:w}=(0,v.oM)(o),_=(0,r.useMemo)(()=>(null==w?void 0:w.collections)||[],[w]),y=_.find(e=>e.name===b),R=(0,r.useMemo)(()=>(null==y?void 0:y.fields)||[],[y]),[k,N]=(0,r.useState)(),I=(0,r.useCallback)(e=>{let{dataCategory:o,field:n}=e,i=n.data_categories||[],l={...n,data_categories:[...i,o]},a=_.indexOf(y),s=y.fields.indexOf(n);t((0,h._n)(w,l,a,s))},[y,_,w,t]),T=(0,r.useCallback)(e=>{var o;let{dataCategory:n,field:i}=e,l={...i,data_categories:null===(o=i.data_categories)||void 0===o?void 0:o.filter(e=>e!==n)},a=_.indexOf(y),s=y.fields.indexOf(i);t((0,h._n)(w,l,a,s))},[y,_,w,t]),Z=(0,r.useCallback)(t=>{e.push({pathname:c.y1,query:{datasetId:encodeURIComponent(o),collectionName:encodeURIComponent(b),subfieldNames:encodeURIComponent(t.name)}})},[o,e,b]),O=(0,r.useMemo)(()=>[g.accessor(e=>e.name,{id:"name",cell:e=>{var t;let o=e.row.original.fields&&(null===(t=e.row.original.fields)||void 0===t?void 0:t.length)>0;return(0,n.jsx)(f.G3,{fontWeight:o?"semibold":"normal",value:e.getValue()})},header:e=>(0,n.jsx)(f.Rr,{value:"Field Name",...e}),size:180}),g.accessor(e=>{var t;return null===(t=e.fides_meta)||void 0===t?void 0:t.data_type},{id:"type",cell:e=>e.getValue()?(0,n.jsx)(f.A4,{value:e.getValue()}):(0,n.jsx)(f.G3,{value:void 0}),header:e=>(0,n.jsx)(f.Rr,{value:"Type",...e}),size:80}),g.accessor(e=>e.description,{id:"description",cell:e=>(0,n.jsx)(f.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,n.jsx)(f.Rr,{value:"Description",...e}),size:300,meta:{showHeaderMenu:!0}}),g.accessor(e=>e.data_categories,{id:"data_categories",cell:e=>{var t;let o=e.row.original;return!(e.row.original.fields&&(null===(t=e.row.original.fields)||void 0===t?void 0:t.length)>0)&&(0,n.jsx)(m.Z,{selectedTaxonomies:e.getValue()||[],onAddTaxonomy:e=>I({dataCategory:e,field:o}),onRemoveTaxonomy:e=>T({dataCategory:e,field:o})})},header:e=>(0,n.jsx)(f.Rr,{value:"Data categories",...e}),size:300,meta:{disableRowClick:!0}}),g.display({id:"actions",header:"Actions",cell:e=>{let{row:t}=e,o=t.original;return(0,n.jsx)(a.Ugi,{spacing:0,"data-testid":"field-".concat(o.name),children:(0,n.jsx)(a.wpx,{size:"small",icon:(0,n.jsx)(a.dY8,{}),onClick:()=>{G(o),S(!0)},children:"Edit"})})},meta:{disableRowClick:!0}})],[I,T]),M=(0,r.useMemo)(()=>k?R.filter(e=>e.name.toLowerCase().includes(k.toLowerCase())):R,[R,k]),F=(0,l.b7)({getCoreRowModel:(0,i.sC)(),getFilteredRowModel:(0,i.vL)(),getSortedRowModel:(0,i.tj)(),columns:O,data:M,columnResizeMode:"onChange"}),[z,S]=(0,r.useState)(!1),[A,G]=(0,r.useState)(),D=(0,r.useMemo)(()=>[{title:"All datasets",href:c.$m},{title:o,href:{pathname:c.o5,query:{datasetId:o}},icon:x.Y[1]},{title:b,icon:x.Y[2]}],[o,b]);return(0,n.jsxs)(d.Z,{title:"Dataset - ".concat(o),children:[(0,n.jsx)(u.Z,{heading:"Datasets",breadcrumbItems:D}),C?(0,n.jsx)(f.I4,{rowHeight:36,numRows:15}):(0,n.jsxs)(a.xuv,{"data-testid":"fields-table",children:[(0,n.jsx)(f.Q$,{children:(0,n.jsx)(f.HO,{globalFilter:k,setGlobalFilter:N,placeholder:"Search",testid:"fields-search"})}),(0,n.jsx)(f.ZK,{tableInstance:F,emptyTableNotice:(0,n.jsx)(j,{}),onRowClick:Z,getRowIsClickable:e=>{var t;return!!(e.fields&&(null===(t=e.fields)||void 0===t?void 0:t.length)>0)}}),(0,n.jsx)(p.Z,{isOpen:z,onClose:()=>{S(!1),G(void 0)},field:A,dataset:w,collectionName:b})]})]})}}},function(e){e.O(0,[8765,9278,5163,699,409,9226,2888,9774,179],function(){return e(e.s=59972)}),_N_E=e.O()}]);