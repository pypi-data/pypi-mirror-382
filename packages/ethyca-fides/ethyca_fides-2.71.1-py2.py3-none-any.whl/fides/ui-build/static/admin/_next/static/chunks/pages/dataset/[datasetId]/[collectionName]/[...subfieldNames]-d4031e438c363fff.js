(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2096],{78859:function(e,t,o){var n=o(71928),a=o(76747),l=o(42383),i=o(11611),s=o(37948);e.exports=function(e,t,o,r){if(!i(e))return e;t=a(t,e);for(var d=-1,c=t.length,u=c-1,f=e;null!=f&&++d<c;){var m=s(t[d]),h=o;if("__proto__"===m||"constructor"===m||"prototype"===m)break;if(d!=u){var p=f[m];void 0===(h=r?r(p,m,f):void 0)&&(h=i(p)?p:l(t[d+1])?[]:{})}n(f,m,h),f=f[m]}return e}},80396:function(e,t,o){var n=o(79867),a=o(78859);e.exports=function(e,t,o,l){return a(e,t,o(n(e,t)),l)}},62079:function(e,t,o){var n=o(31137);e.exports=function(e){return"function"==typeof e?e:n}},30454:function(e,t,o){var n=o(40699);e.exports=function(e){return n(e,5)}},47215:function(e,t,o){var n=o(78859);e.exports=function(e,t,o){return null==e?e:n(e,t,o)}},90271:function(e,t,o){var n=o(80396),a=o(62079);e.exports=function(e,t,o){return null==e?e:n(e,t,a(o))}},16383:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dataset/[datasetId]/[collectionName]/[...subfieldNames]",function(){return o(26052)}])},12627:function(e,t,o){"use strict";var n=o(24246),a=o(79283),l=o(34929);t.Z=e=>{let{selectedTaxonomies:t,showDisabled:o=!1,...i}=e,{getDataCategoryDisplayNameProps:s,getDataCategories:r}=(0,l.Z)(),d=(o?r():r().filter(e=>e.active)).filter(e=>!(null==t?void 0:t.includes(e.fides_key))).map(e=>{let{name:t,primaryName:o}=s(e.fides_key);return{value:e.fides_key,name:t,primaryName:o,description:e.description||""}});return(0,n.jsx)(a.l,{options:d,...i})}},66112:function(e,t,o){"use strict";var n=o(24246),a=o(96306),l=o(27378),i=o(12627),s=o(34929),r=o(26183);t.Z=e=>{let{selectedTaxonomies:t,onAddTaxonomy:o,onRemoveTaxonomy:d}=e,[c,u]=(0,l.useState)(!1),{getDataCategoryDisplayName:f}=(0,s.Z)();return(0,n.jsxs)(r.Z,{children:[t.map(e=>(0,n.jsx)(a.j8w,{"data-testid":"classification-".concat(e),color:"white",closable:!0,onClose:()=>d(e),closeButtonLabel:"Remove category",children:f(e)},e)),(0,n.jsx)(a.j8w,{onClick:()=>u(!0),"data-testid":"add-category-btn",addable:!0,"aria-label":"Add category"}),c&&(0,n.jsx)(a.xuv,{className:"select-wrapper",position:"absolute",zIndex:10,top:"0",left:"0",width:"100%",height:"max",bgColor:"#fff",children:(0,n.jsx)(i.Z,{selectedTaxonomies:t,onChange:e=>{u(!1),o(e)},onBlur:()=>u(!1),open:c})})]})}},76252:function(e,t,o){"use strict";var n=o(24246),a=o(96306),l=o(30454),i=o.n(l),s=o(47215),r=o.n(s),d=o(90271),c=o.n(d),u=o(79806),f=o(20386),m=o(63927),h=o(69435);t.Z=e=>{let{field:t,isOpen:o,onClose:l,dataset:s,collectionName:d,subfields:p}=e,[v]=(0,f.TG)(),{isOpen:x,onOpen:g,onClose:b}=(0,a.qY0)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.ZP,{isOpen:o,onClose:l,description:"Fields are an array of objects that describe the collection's fields. Provide additional context to this field by filling out the fields below.",header:(0,n.jsx)(u.zR,{title:"Field Name: ".concat(null==t?void 0:t.name)}),footer:(0,n.jsx)(u.Gn,{onClose:l,onDelete:g,formId:m.e}),children:(0,n.jsx)(m.Z,{values:t,onSubmit:e=>{let o=(0,h.Fk)({dataset:s,collectionName:d,subfields:p?[...p,(null==t?void 0:t.name)||""]:[(null==t?void 0:t.name)||""]}),n={...t,...e},a=i()(s);r()(a,o,n),v(a),l()},dataType:"field"})}),(0,n.jsx)(a.cVQ,{isOpen:x,onClose:b,onConfirm:()=>{let e=(0,h.Fk)({dataset:s,collectionName:d,subfields:p}),o=i()(s);c()(o,e,e=>({...e,fields:e.fields.filter(e=>e.name!==(null==t?void 0:t.name))})),v(o),l(),b()},title:"Delete Field",message:(0,n.jsxs)(a.xvT,{children:["You are about to permanently delete the field named"," ",(0,n.jsx)(a.xvT,{color:"complimentary.500",as:"span",fontWeight:"bold",children:null==t?void 0:t.name})," ","from this dataset. Are you sure you would like to continue?"]})})]})}},26052:function(e,t,o){"use strict";o.r(t);var n=o(24246),a=o(92222),l=o(59003),i=o(96306),s=o(30454),r=o.n(s),d=o(47215),c=o.n(d),u=o(86677),f=o(27378),m=o(77213),h=o(77830),p=o(58754),v=o(47935),x=o(66112),g=o(69828),b=o(41966),j=o(76252),C=o(69435);let w=(0,a.Cl)(),y=()=>(0,n.jsx)(i.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"no-results-notice",alignSelf:"center",margin:"auto",textAlign:"center",children:(0,n.jsx)(i.gCW,{children:(0,n.jsx)(i.xvT,{fontSize:"md",fontWeight:"600",children:"No fields found."})})});t.default=()=>{let e=(0,u.useRouter)(),[t]=(0,b.TG)(),o=decodeURIComponent(e.query.datasetId),s=decodeURIComponent(e.query.collectionName),d=e.query.subfieldNames.map(decodeURIComponent),{isLoading:_,data:R}=(0,b.oM)(o),k=(0,f.useMemo)(()=>(null==R?void 0:R.collections)||[],[R]).find(e=>e.name===s),N=(0,f.useMemo)(()=>(null==k?void 0:k.fields)||[],[k]),T=(0,f.useMemo)(()=>{let e=N;return d.forEach(t=>{let o=e.find(e=>e.name===t);e=(null==o?void 0:o.fields)||[]}),e},[N,d]),[Z,F]=(0,f.useState)(),I=(0,f.useCallback)(e=>{let{dataCategory:o,field:n}=e,a=n.data_categories||[],l=(0,C.Fk)({dataset:R,collectionName:s,subfields:[...d,n.name]}),i=r()(R);c()(i,"".concat(l,".data_categories"),[...a,o]),t(i)},[R,t,s,d]),M=(0,f.useCallback)(e=>{let{dataCategory:o,field:n}=e,a=n.data_categories||[],l=(0,C.Fk)({dataset:R,collectionName:s,subfields:[...d,null==n?void 0:n.name]}),i=r()(R);c()(i,"".concat(l,".data_categories"),a.filter(e=>e!==o)),t(i)},[R,t,s,d]),z=(0,f.useCallback)(t=>{let n=[...d.map(encodeURIComponent),t.name];e.push({pathname:h.y1,query:{datasetId:o,collectionName:s,subfieldNames:n}})},[o,e,s,d]),S=(0,f.useMemo)(()=>[w.accessor(e=>e.name,{id:"name",cell:e=>{var t;let o=e.row.original.fields&&(null===(t=e.row.original.fields)||void 0===t?void 0:t.length)>0;return(0,n.jsx)(v.G3,{fontWeight:o?"semibold":"normal",value:e.getValue()})},header:e=>(0,n.jsx)(v.Rr,{value:"Field Name",...e}),size:180}),w.accessor(e=>{var t;return null===(t=e.fides_meta)||void 0===t?void 0:t.data_type},{id:"type",cell:e=>e.getValue()?(0,n.jsx)(v.A4,{value:e.getValue()}):(0,n.jsx)(v.G3,{value:void 0}),header:e=>(0,n.jsx)(v.Rr,{value:"Type",...e}),size:80}),w.accessor(e=>e.description,{id:"description",cell:e=>(0,n.jsx)(v.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,n.jsx)(v.Rr,{value:"Description",...e}),size:300,meta:{showHeaderMenu:!0}}),w.accessor(e=>e.data_categories,{id:"data_categories",cell:e=>{var t;let o=e.row.original;return!(e.row.original.fields&&(null===(t=e.row.original.fields)||void 0===t?void 0:t.length)>0)&&(0,n.jsx)(x.Z,{selectedTaxonomies:e.getValue()||[],onAddTaxonomy:e=>I({dataCategory:e,field:o}),onRemoveTaxonomy:e=>M({dataCategory:e,field:o})})},header:e=>(0,n.jsx)(v.Rr,{value:"Data categories",...e}),size:300,meta:{disableRowClick:!0}}),w.display({id:"actions",header:"Actions",cell:e=>{let{row:t}=e,o=t.original;return(0,n.jsx)(i.Ugi,{spacing:0,"data-testid":"field-".concat(o.name),children:(0,n.jsx)(i.wpx,{size:"small",icon:(0,n.jsx)(i.dY8,{}),onClick:()=>{D(o),A(!0)},children:"Edit"})})},meta:{disableRowClick:!0}})],[I,M]),q=(0,f.useMemo)(()=>Z?T.filter(e=>e.name.toLowerCase().includes(Z.toLowerCase())):T,[T,Z]),E=(0,l.b7)({getCoreRowModel:(0,a.sC)(),getFilteredRowModel:(0,a.vL)(),getSortedRowModel:(0,a.tj)(),columns:S,data:q,columnResizeMode:"onChange"}),[O,A]=(0,f.useState)(!1),[G,D]=(0,f.useState)(),U=(0,f.useMemo)(()=>{let e=[{title:"All datasets",href:h.$m},{title:o,href:{pathname:h.o5,query:{datasetId:o}},icon:g.Y[1]},{title:s,icon:g.Y[2],href:{pathname:h.RF,query:{datasetId:o,collectionName:s}}}];return d.forEach((t,n)=>{e.push({title:t,href:n<d.length-1?{pathname:h.y1,query:{datasetId:o,collectionName:s,subfieldNames:d.slice(0,n+1).map(encodeURIComponent)}}:void 0,icon:g.Y[3]})}),e},[o,s,d]);return(0,n.jsxs)(m.Z,{title:"Dataset - ".concat(o),children:[(0,n.jsx)(p.Z,{heading:"Datasets",breadcrumbItems:U}),_?(0,n.jsx)(v.I4,{rowHeight:36,numRows:15}):(0,n.jsxs)(i.xuv,{"data-testid":"fields-table",children:[(0,n.jsx)(v.Q$,{children:(0,n.jsx)(v.HO,{globalFilter:Z,setGlobalFilter:F,placeholder:"Search",testid:"fields-search"})}),(0,n.jsx)(v.ZK,{tableInstance:E,emptyTableNotice:(0,n.jsx)(y,{}),onRowClick:z,getRowIsClickable:e=>{var t;return!!(e.fields&&(null===(t=e.fields)||void 0===t?void 0:t.length)>0)}}),(0,n.jsx)(j.Z,{isOpen:O,onClose:()=>{A(!1),D(void 0)},field:G,dataset:R,collectionName:s,subfields:d})]})]})}}},function(e){e.O(0,[8765,9278,5163,699,409,9226,2888,9774,179],function(){return e(e.s=16383)}),_N_E=e.O()}]);