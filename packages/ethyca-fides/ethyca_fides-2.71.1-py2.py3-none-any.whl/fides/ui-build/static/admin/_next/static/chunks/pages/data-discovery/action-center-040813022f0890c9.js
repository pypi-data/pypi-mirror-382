(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8443],{66726:function(e,t,n){var i=n(11611),s=n(82846),a=n(91936),r=Math.max,o=Math.min;e.exports=function(e,t,n){var c,u,l,d,g,f,m=0,v=!1,y=!1,p=!0;if("function"!=typeof e)throw TypeError("Expected a function");function x(t){var n=c,i=u;return c=u=void 0,m=t,d=e.apply(i,n)}function h(e){var n=e-f,i=e-m;return void 0===f||n>=t||n<0||y&&i>=l}function j(){var e,n,i,a=s();if(h(a))return C(a);g=setTimeout(j,(e=a-f,n=a-m,i=t-e,y?o(i,l-n):i))}function C(e){return(g=void 0,p&&c)?x(e):(c=u=void 0,d)}function b(){var e,n=s(),i=h(n);if(c=arguments,u=this,f=n,i){if(void 0===g)return m=e=f,g=setTimeout(j,t),v?x(e):d;if(y)return clearTimeout(g),g=setTimeout(j,t),x(f)}return void 0===g&&(g=setTimeout(j,t)),d}return t=a(t)||0,i(n)&&(v=!!n.leading,l=(y="maxWait"in n)?r(a(n.maxWait)||0,t):l,p="trailing"in n?!!n.trailing:p),b.cancel=function(){void 0!==g&&clearTimeout(g),m=0,c=f=u=g=void 0},b.flush=function(){return void 0===g?d:C(s())},b}},11611:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},55193:function(e,t,n){var i=n(99736),s=n(92360);e.exports=function(e){return"symbol"==typeof e||s(e)&&"[object Symbol]"==i(e)}},82846:function(e,t,n){var i=n(77400);e.exports=function(){return i.Date.now()}},40741:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/action-center",function(){return n(2656)}])},30952:function(e,t,n){"use strict";n.d(t,{f:function(){return c}});var i=n(24246),s=n(66726),a=n.n(s),r=n(27378),o=n(26917);let c=e=>{let{value:t,onChange:n,placeholder:s,...c}=e,[u,l]=(0,r.useState)(t);(0,r.useEffect)(()=>{l(t||"")},[t]);let d=a()(n,500),g=(0,r.useCallback)(e=>{l(e),d(e)},[]);return(0,i.jsx)(o.Z,{value:u,onChange:g,onClear:()=>{l(""),n("")},placeholder:s,...c})}},77213:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var i=n(24246),s=n(96306),a=n(88038),r=n.n(a),o=n(86677);n(27378);var c=n(25980),u=n(90867),l=n(42478),d=n(77830),g=()=>{let e=(0,o.useRouter)();return(0,i.jsx)(s.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,i.jsxs)(s.xuv,{children:[(0,i.jsxs)(s.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,i.jsx)(s.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,i.jsx)(s.wpx,{onClick:()=>{e.push(d.AD)},children:"Configure"})]}),(0,i.jsxs)(s.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},f=e=>{let{children:t,title:n,padded:a=!0,mainProps:d}=e,f=(0,c.hz)(),m=(0,o.useRouter)(),v="/privacy-requests"===m.pathname||"/datastore-connection"===m.pathname,y=!(f.flags.messagingConfiguration&&v),{data:p}=(0,l.JE)(void 0,{skip:y}),{data:x}=(0,u.PW)(void 0,{skip:y}),h=f.flags.messagingConfiguration&&(!p||!x)&&v;return(0,i.jsxs)(s.kCb,{"data-testid":n,direction:"column",h:"100vh",children:[(0,i.jsxs)(r(),{children:[(0,i.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,i.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsxs)(s.kCb,{as:"main",direction:"column",py:a?6:0,px:a?10:0,h:a?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...d,children:[h?(0,i.jsx)(g,{}):null,t]})]})}},42478:function(e,t,n){"use strict";n.d(t,{FU:function(){return u},JE:function(){return s},Ki:function(){return d},SU:function(){return g},W:function(){return f},h9:function(){return a},jc:function(){return i},qt:function(){return c},sn:function(){return l}});let{useGetEmailInviteStatusQuery:i,useGetActiveMessagingProviderQuery:s,useCreateMessagingConfigurationMutation:a,useCreateMessagingConfigurationSecretsMutation:r,useGetMessagingConfigurationDetailsQuery:o,useGetMessagingConfigurationsQuery:c,useGetMessagingConfigurationByKeyQuery:u,useUpdateMessagingConfigurationByKeyMutation:l,useUpdateMessagingConfigurationSecretsByKeyMutation:d,useCreateTestConnectionMessageMutation:g,useDeleteMessagingConfigurationByKeyMutation:f}=n(78780).u.injectEndpoints({endpoints:e=>({getEmailInviteStatus:e.query({query:()=>({url:"/messaging/email-invite/status"}),providesTags:()=>["Email Invite Status"]}),createMessagingConfiguration:e.mutation({query:e=>({url:"messaging/config",method:"POST",body:e}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getActiveMessagingProvider:e.query({queryFn:async(e,t,n,i)=>{let s=await i({url:"messaging/default/active"});return s.error&&404===s.error.status?{data:null}:s},providesTags:["Messaging Config"]}),createMessagingConfigurationSecrets:e.mutation({query:e=>({url:"messaging/default/".concat(e.service_type,"/secret"),method:"PUT",body:e.details}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getMessagingConfigurationDetails:e.query({query:e=>({url:"messaging/default/".concat(e.type)}),providesTags:["Messaging Config"]}),getMessagingConfigurations:e.query({query:()=>({url:"messaging/config"}),providesTags:["Messaging Config"]}),getMessagingConfigurationByKey:e.query({query:e=>({url:"messaging/config/".concat(e.key)}),providesTags:["Messaging Config"]}),createTestConnectionMessage:e.mutation({query:e=>({url:"messaging/test/".concat(e.service_type),method:"POST",body:e.details}),invalidatesTags:["Messaging Config"]}),updateMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"PATCH",body:e.config}),invalidatesTags:["Messaging Config","Configuration Settings"]}),updateMessagingConfigurationSecretsByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key,"/secret"),method:"PUT",body:e.secrets}),invalidatesTags:["Messaging Config","Configuration Settings"]}),deleteMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"DELETE"}),invalidatesTags:["Messaging Config","Configuration Settings"]})})})},2656:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var i=n(24246),s=n(96306),a=n(79894),r=n.n(a),o=n(27378),c=n(30952),u=n(77213),l=n(77830),d=n(58754),g=n(47935),f=n(7426),m=n(37059);let v=e=>{let{isConfigLoading:t}=e;return(0,i.jsx)(u.Z,{title:"Action center",mainProps:{className:"h-full"},children:(0,i.jsx)(s.jqI,{justify:"center",align:"center",className:"h-full",children:t?(0,i.jsx)(s.$jN,{color:"primary.900"}):(0,i.jsx)(s.DUx,{message:"Coming soon...",description:"Action center is currently disabled.",type:"info",showIcon:!0})})})},y=()=>(0,i.jsx)(s.oj8,{image:s.oj8.PRESENTED_IMAGE_SIMPLE,description:"All caught up! Set up an integration monitor to track your infrastructure in greater detail.",children:(0,i.jsx)(r(),{href:l.KH,passHref:!0,legacyBehavior:!0,children:(0,i.jsx)(s.wpx,{type:"primary",children:"Visit integrations"})})});var p=n(10969),x=n(60145),h=n(11558),j=n(70641),C=n(7317),b=n(85302),T=n(64892),w=n(16394),M=n(21910),S=n(54762);let{Text:E}=s.AntTypography,_=e=>{let{monitorSummary:t,showSkeleton:n,...a}=e,{name:c,consent_status:u,total_updates:d,updates:g,last_monitored:f,secrets:m,key:v,connection_type:y}=t,_=(0,o.useMemo)(()=>(null==m?void 0:m.url)?(0,w.ge)(m.url):void 0,[null==m?void 0:m.url]),k=(0,o.useMemo)(()=>_?(0,w.tl)(_,60):void 0,[_]),P=Object.entries(g).map(e=>"".concat(e[1]," ").concat(e[0],"s")).join(", "),q=f?(0,w.p6)(new Date(f)):void 0,D=f?function(e,t,n){let i;let s=(0,x.j)(),a=n?.locale??s.locale??p._,r=(0,b.U)(e,t);if(isNaN(r))throw RangeError("Invalid time value");let o=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:r}),[c,u]=(0,C.d)(n?.in,...r>0?[t,e]:[e,t]),l=(0,h.u)(n?.roundingMethod??"round"),d=u.getTime()-c.getTime(),g=d/T.yJ,f=(d-((0,j.D)(u)-(0,j.D)(c)))/T.yJ,m=n?.unit;if("second"===(i=m||(g<1?"second":g<60?"minute":g<T.H_?"hour":f<T.fH?"day":f<T.UU?"month":"year"))){let e=l(d/1e3);return a.formatDistance("xSeconds",e,o)}if("minute"===i){let e=l(g);return a.formatDistance("xMinutes",e,o)}if("hour"===i){let e=l(g/60);return a.formatDistance("xHours",e,o)}if("day"===i){let e=l(f/T.H_);return a.formatDistance("xDays",e,o)}if("month"===i){let e=l(f/T.fH);return 12===e&&"month"!==m?a.formatDistance("xYears",1,o):a.formatDistance("xMonths",e,o)}{let e=l(f/T.UU);return a.formatDistance("xYears",e,o)}}(new Date(f),new Date,{addSuffix:!0}):void 0;return(0,i.jsx)(s.krs.Item,{"data-testid":"monitor-result-".concat(v),...a,children:(0,i.jsx)(s.N_L,{avatar:!0,title:!1,loading:n,active:!0,children:(0,i.jsxs)(s.bue,{gutter:12,className:"w-full",children:[(0,i.jsx)(s.JGx,{span:17,className:"align-middle",children:(0,i.jsx)(s.krs.Item.Meta,{avatar:(0,i.jsx)(s.t3Z,{src:k,size:30,icon:(0,i.jsx)(s.PJP.huD,{size:30}),style:{backgroundColor:"transparent",color:"var(--ant-color-text)"},alt:"".concat(_," icon")}),title:(0,i.jsxs)(s.jqI,{align:"center",gap:4,children:[(0,i.jsx)(r(),{href:"".concat(l.vi,"/").concat(v),className:"whitespace-nowrap",children:"".concat(d," assets detected").concat(_?" on ".concat(_):"")}),(0,i.jsx)(S.l,{consentStatus:u}),y===M.Rj.TEST_WEBSITE&&(0,i.jsx)(s.j8w,{color:"nectar",style:{fontWeight:"normal"},children:"test monitor"})]}),description:"".concat(P," detected.")})}),(0,i.jsx)(s.JGx,{span:4,className:"flex items-center justify-end",children:(0,i.jsx)(E,{ellipsis:{tooltip:c},children:c})}),(0,i.jsx)(s.JGx,{span:3,className:"flex items-center justify-end",children:!!D&&(0,i.jsx)(E,{"data-testid":"monitor-date",ellipsis:{tooltip:q},children:D})})]})})})};var k=()=>{var e;let t=(0,s.pmc)(),{PAGE_SIZES:n,pageSize:a,setPageSize:p,onPreviousPageClick:x,isPreviousPageDisabled:h,onNextPageClick:j,isNextPageDisabled:C,startRange:b,endRange:T,pageIndex:w,setTotalPages:M,resetPageIndexToDefault:S}=(0,g.oi)(),[E,k]=(0,o.useState)(""),{data:P,isLoading:q}=(0,f.tB)({api_set:!1}),D=!!(null==P?void 0:null===(e=P.detection_discovery)||void 0===e?void 0:e.website_monitor_enabled);(0,o.useEffect)(()=>{S()},[E,S]);let{data:N,isError:I,isLoading:A,isFetching:U}=(0,m.Ud)({page:w,size:a,search:E},{skip:q||!D});(0,o.useEffect)(()=>{I&&t&&D&&t({title:"Error fetching data",description:"Please try again later",status:"error"})},[I,t,D]),(0,o.useEffect)(()=>{if(N){var e;M(null!==(e=N.total)&&void 0!==e?e:1)}},[N,M]);let R=(null==N?void 0:N.items)||[],B=U?Array.from({length:a},(e,t)=>({key:t.toString(),updates:[],last_monitored:null})):[],H=(0,o.useCallback)(e=>[(0,i.jsx)(r(),{href:"".concat(l.vi,"/").concat(e),passHref:!0,legacyBehavior:!0,children:(0,i.jsx)(s.wpx,{type:"link",className:"p-0","data-testid":"review-button-".concat(e),children:"Review"})},"review")],[]);return D?(0,i.jsxs)(u.Z,{title:"Action center",children:[(0,i.jsx)(d.Z,{heading:"Action center",breadcrumbItems:[{title:"All activity"}]}),(0,i.jsx)(s.jqI,{className:"justify-between py-6",children:(0,i.jsx)(c.f,{value:E,onChange:k})}),(0,i.jsx)(s.krs,{loading:A,dataSource:R||B,locale:{emptyText:(0,i.jsx)(y,{})},renderItem:e=>!!(null==e?void 0:e.key)&&(0,i.jsx)(_,{showSkeleton:U,monitorSummary:e,actions:H(e.key)},e.key)}),!!R&&!!(null==N?void 0:N.total)&&N.total>a&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.htM,{className:"mb-6 mt-0"}),(0,i.jsx)(g.s8,{totalRows:(null==N?void 0:N.total)||0,pageSizes:n,setPageSize:p,onPreviousPageClick:x,isPreviousPageDisabled:h||U,onNextPageClick:j,isNextPageDisabled:C||U,startRange:b,endRange:T})]})]}):(0,i.jsx)(v,{isConfigLoading:q})}}},function(e){e.O(0,[7725,2888,9774,179],function(){return e(e.s=40741)}),_N_E=e.O()}]);