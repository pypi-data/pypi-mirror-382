[dependencies]
# genson-rs = { workspace = true }
serde = { workspace = true }
serde_json = { workspace = true }
xxhash-rust = { workspace = true }

# Optional dependencies
avrotize = { optional = true, version = "0.1.1" }
crustrace = { features = ["debug"], optional = true, version = "0.1.9" }
crustrace-mermaid = { optional = true, version = "0.1.6" }
tracing = { optional = true, version = "0.1.41" }
tracing-subscriber = { optional = true, version = "0.3.20" }

# Vendored from genson-rs
mimalloc.workspace = true
ordermap.workspace = true
rayon.workspace = true
regex.workspace = true
simd-json.workspace = true

[features]
avro = ["avrotize"]
default = []
trace = ["crustrace", "crustrace-mermaid", "tracing", "tracing-subscriber"]

[package]
authors.workspace = true
categories = ["data-structures", "encoding", "parsing"]
description = "Core library for JSON schema inference using genson-rs"
edition.workspace = true
homepage.workspace = true
keywords = ["core", "genson", "inference", "json", "schema"]
license.workspace = true
name = "genson-core"
readme = "README.md"
repository.workspace = true
version = "0.5.6"

[dev-dependencies]
predicates = "3.1.3"

[package.metadata.cargo-machete]
ignored = ["crustrace", "tracing"]
