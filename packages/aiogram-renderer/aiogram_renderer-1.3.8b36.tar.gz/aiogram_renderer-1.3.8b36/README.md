# aiogram-renderer
[![versions](https://badgen.net/badge/python/3.9+?color=green)](https://github.com/Foldren/aiogram-renderer)
[![license](https://badgen.net/badge/license/Apache-2.0?color=green)](https://github.com/Foldren/aiogram-renderer/blob/master/LICENSE)
[![license](https://badgen.net/badge/pypl/v1.3.7?color=blue)](https://pypi.org/project/aiogram-renderer)
[![badge](https://badgen.net/badge/_/Donate?color=yellow&icon=ruby&label)](https://t.me/foldren_support_donat_bot)

## –û –ø—Ä–æ–µ–∫—Ç–µ
–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Å–æ–∑–¥–∞–Ω–∞ –¥–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –µ–µ –º–æ–∂–Ω–æ –±—ã–ª–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–º–µ—Å—Ç–µ —Å aiogram, –∞ –Ω–µ –≤–º–µ—Å—Ç–æ aiogram. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
–æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–Ω—ã–µ –≤–∏–¥–∂–µ—Ç—ã, —á—Ç–æ–±—ã —É—Å–∫–æ—Ä–∏—Ç—å –∏ —É–ø—Ä–æ—Å—Ç–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ telegram –±–æ—Ç–æ–≤.

#### –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

[<img src="https://i2.wp.com/miro.medium.com/1*D-JJemrcn63kKj3lPBwZ5w.png" width=130>](https://t.me/foldren_support_donat_bot)

## –§—É–Ω–∫—Ü–∏–∏
aiogram-renderer –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è:
- 100% –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å
- –≥–∏–±–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –ø–æ–∑–≤–æ–ª—è—é—â—É—é –±–µ–∑ –ø—Ä–æ–±–ª–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É —Å–æ–≤–º–µ—Å—Ç–Ω–æ —Å aiogram
- –ø–æ–¥–¥–µ—Ä–∂–∫—É –∫–∞–∫ Reply —Ç–∞–∫ –∏ Inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä
- —É–¥–æ–±–Ω—ã–π –≤–∏–¥–∂–µ—Ç Progress –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∞–º–∏
- —Ä–µ–∂–∏–º—ã –±–æ—Ç–∞, –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –æ–∫–æ–Ω
- —Ä–∞–±–æ—Ç—É —Å —Ñ–∞–π–ª–∞–º–∏
- –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω—É—é –ª–æ–≥–∏–∫—É –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è FSM –¥–∞–Ω–Ω—ã–º–∏ –æ–∫–æ–Ω
- –æ–∫–Ω–∞-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ FSM
- —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç—å—é –≤–∏–¥–∂–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä show_on
- –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –Ω–∞–±–æ—Ä—ã –∫–Ω–æ–ø–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –æ–∫–æ–Ω

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞
–î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É
```
pip install aiogram-renderer
```
## –ù–∞—á–∞–ª–æ
–î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∫ –ø—Ä–æ–µ–∫—Ç—É –Ω–∞–¥–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é configure_renderer, –≤
–Ω–µ–π –≤–∞–º –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –æ–∫–Ω–∞, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ –ø—Ä–æ–µ–∫—Ç–µ –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–µ–∂–∏–º—ã.
```python
async def main():
    logging.basicConfig(level=logging.INFO)

    await configure_renderer(
        dp=dp,
        # –ü–æ–¥–∫–ª—é—á–∞–µ–º –æ–∫–Ω–∞
        windows=[window],
        # –ó–∞–¥–∞–µ–º —Ä–µ–∂–∏–º—ã –±–æ—Ç–∞ (–ø–µ—Ä–≤—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
        modes=[
            BotMode(
                name="mode1",
                values=["off üü•‚¨úÔ∏è  –†–µ–∂–∏–º 1", "on ‚¨úÔ∏èüü©  –†–µ–∂–∏–º 1"],
                alert_window=alert,
            ),
            BotMode(
                name="mode2",
                values=["off üü•‚¨úÔ∏è  –†–µ–∂–∏–º 2", "on ‚¨úÔ∏èüü©  –†–µ–∂–∏–º 2"],
                alert_window=alert,
                has_custom_handler=False
            )
        ]
    )

    await bot.delete_webhook(drop_pending_updates=True)
    await dp.start_polling(bot)
```

## –¢–∏–ø—ã –æ–∫–æ–Ω
–î–ª—è —Ä–∞–±–æ—Ç—ã –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 2 —Ç–∏–ø–∞ –æ–∫–æ–Ω:
1. Window - –æ–∫–Ω–æ —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º State, –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ FSM. 
–†–µ–Ω–¥–µ—Ä—è—Ç—Å—è –æ–∫–Ω–∞ —Å —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π —Å—Ç–µ–π—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
–ú–∞–ø—è—Ç—Å—è –ø–æ state, –ø–æ–¥—Ä–æ–±–Ω–µ–µ –≤ —Ä–∞–∑–¥–µ–ª–µ.
```python
window = Window(
    Text("–¢–µ—Å—Ç –æ–∫–Ω–∞"),
    Panel(
        Button(text="–ö–Ω–æ–ø–∫–∞", data="button"),
        Button(text="–¢–æ–∂–µ –∫–Ω–æ–ø–∫–∞", data="button_too"),
        Mode(name="mode1"),
        width=2
    ),
    state=MainSteps.step1
)
```
2. Alert - –æ–∫–Ω–æ-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ, –µ–≥–æ –¥–∞–Ω–Ω—ã–µ –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ FSM, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –Ω–∞ alert –µ—Å—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –≤–∏–¥–∂–µ—Ç–æ–≤ (Mode, DynamicPanel)
```python
alert = Alert(
    Area(
        Bold("–¢–µ—Å—Ç –æ–∫–Ω–∞", end_count=3),
        "–≤—Å–µ —Ö–æ—Ä–æ—à–æ",
        sep_count=2
    )
```
## –û—Ç–ø—Ä–∞–≤–∫–∞
–î–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –æ–∫–æ–Ω —Å –≤–∏–¥–∂–µ—Ç–∞–º–∏, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏ render –∏–∑ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ renderer —Å mode=RenderMode.ANSWER –∏ –¥—Ä. –∏–ª–∏
–±–æ–ª–µ–µ –±—ã—Å—Ç—Ä—ã–µ answer, edit, delete_and_send, reply. –í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å chat_id, message_id –∏–ª–∏ event –ø–æ –∂–µ–ª–∞–Ω–∏—é,
–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é renderer –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç event –≤ —Ö–µ–Ω–¥–ª–µ—Ä–µ.
```python
@dp.message(F.text=="/start")
async def start(message: Message, renderer: Renderer):
    message, window = await renderer.render(window=window, chat_id=message.chat_id, message_id=message.message_id, mode=RenderMode.EDIT)
```
> [!NOTE]
> –í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å renderer –≤–º–µ—Å—Ç–µ —Å –æ–±—ã—á–Ω—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏ update
```python
@dp.message(F.text=="use1")
async def use1(message: Message, renderer: Renderer):
    # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ö–µ–Ω–¥–ª–µ—Ä–∞ —Å Renderer
    message, window = await renderer.delete_and_send(window=window)

@dp.message(F.text=="use2")
async def use2(message: Message):
    # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –æ–∫–Ω–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏—Å–∫–ª—é—á–µ–ª—å–Ω–æ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –∏–ª–∏ —Ç–µ–∫—Å—Ç–∞
    text = await window.gen_text(data={"username": message.from_user.username})
    await message.answer(text=text)

@dp.message(F.text=="use3")
async def use3(message: Message):
    # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ö–µ–Ω–¥–ª–µ—Ä–∞ –±–µ–∑ Renderer
    await message.answer(text="–í—Å–µ –æ–∫!")
```


## –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
–î–∞–Ω–Ω—ã–µ —Å–æ–±—Ä–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫—É —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ fsm –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ñ–æ—Ä–º–∞—Ç–µ:

```json
{
    "__modes__": {
      "mode1": ["off üü•‚¨úÔ∏è  –†–µ–∂–∏–º 1", "on ‚¨úÔ∏èüü©  –†–µ–∂–∏–º 1"],
      "mode2": ["off üü•‚¨úÔ∏è  –†–µ–∂–∏–º 2", "on ‚¨úÔ∏èüü©  –†–µ–∂–∏–º 2"]
    },
    "__dpanels__": {
      "test_dp": {
        "page": 2,
        "text": ["1","2","3"],
        "data": ["d1","d2","d3"]
      }
    },
    "__windows__": {
        "MainSteps.step1": {
            "username": "–ö–æ–ª—è",
            "visible": true
        },
        "MainSteps.step2": {
            "username": "–ú–∞—à–∞",
            "surname": "–°–µ—á–∏–Ω–æ–≤–∞",
            "visible": false
        }
    }
}
```
–í—Å–µ –æ–∫–Ω–∞ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–æ—Ä—è–¥–∫–µ –æ—Ç–∫—Ä—ã—Ç–∏—è –∏ –º–æ–≥—É—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –µ—Å–ª–∏ —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã data –ø—Ä–∏ –∏—Ö —Ä–µ–Ω–¥–µ—Ä–µ:
```python
@dp.message(F.text=="/start")
async def start(message: Message, renderer: Renderer):
    await renderer.delete_and_send(window=window, data={"username": message.from_user.username})
```
> [!TIP]
> –°–∞–º–∏ –ø–æ–ª—è —Å–æ–¥–µ—Ä–∂–∞—Ç –≤ —Å–µ–±–µ –¥–∞–Ω–Ω—ã–µ –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–¥—Å—Ç–∞–≤–∏—Ç—å –≤ –æ–∫–Ω–æ, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–≤ —Ñ–∏–≥—É—Ä–Ω—ã–µ —Å–∫–æ–±–∫–∏ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö –≤–∏–¥–∂–µ—Ç–æ–≤:
```python
window = Window(
    Text("–ü—Ä–∏–≤–µ—Ç {username}, –¢–µ—Å—Ç –æ–∫–Ω–∞"),
    Panel(
        Button(text="–ö–Ω–æ–ø–∫–∞", data="button{username}"),
        Button(text="–¢–æ–∂–µ –∫–Ω–æ–ø–∫–∞", data="button_too"),
        Mode(name="mode1"),
        width=2
    ),
    state=MainSteps.step1
)
```
## –í–∏–¥–∏–º–æ—Å—Ç—å –≤–∏–¥–∂–µ—Ç–æ–≤
–î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –≤–∏–¥–∂–µ—Ç–∞–º–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä show_on, –∑–Ω–∞—á–µ–Ω–∏–µ –±–µ—Ä–µ—Ç—Å—è –∏–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ data —Ñ—É–Ω–∫—Ü–∏–∏ render –∏ –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏, —É—á–∏—Ç—ã–≤–∞–π—Ç–µ —ç—Ç–æ –∏ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.
```python
window = Window(
    Text("–ü—Ä–∏–≤–µ—Ç {username}, –¢–µ—Å—Ç –æ–∫–Ω–∞"),
    Panel(
        Button(text="–ö–Ω–æ–ø–∫–∞", data="button{username}", show_on="is_admin"),
        Button(text="–¢–æ–∂–µ –∫–Ω–æ–ø–∫–∞", data="button_too", show_on="is_admin"),
        Mode(name="mode1"),
        width=2
    ),
    state=MainSteps.step1
)

@dp.message(F.text=="/start")
async def start(message: Message, renderer: Renderer):
    await renderer.delete_and_send(window=window, data={"is_admin": True})
```
## –†–µ–∂–∏–º—ã
–ß–∞—Å—Ç–µ–Ω—å–∫–æ —Ç—Ä–µ–±–æ–≤–∞–ª–∞—Å—å –∫–Ω–æ–ø–∫–∞ –∫–æ—Ç–æ—Ä–∞—è –±—ã –æ–±–Ω–æ–≤–ª—è–ª–∞ –∏ —Ö—Ä–∞–Ω–∏–ª–∞ —Å–≤–æ–µ –∞–∫—Ç–∏–≤–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ —Ä–∞–∑–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö. –†–µ–∂–∏–º—ã –ø–æ–∑–≤–æ–ª—è—é—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —ç—Ç–æ, —É–∫–∞–∂–∏—Ç–µ –∏—Ö –≤ configure_renderer
–∏ –ø–æ—Ç–æ–º –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ –≤ –æ–∫–Ω–∞ —á–µ—Ä–µ–∑ Mode, ReplyMode –≤–∏–¥–∂–µ—Ç—ã. –£ –∫–∞–∂–¥–æ–≥–æ —Ä–µ–∂–∏–º–∞ –µ—Å—Ç—å alert_window, —ç—Ç–æ –Ω—É–∂–Ω–æ —á—Ç–æ–±—ã —Ä–∞–±–æ—Ç–∞–ª —Å–∏—Å—Ç–µ–º–Ω—ã–π —Ö–µ–Ω–¥–ª–µ—Ä ReplyMode, —Ç–∞–∫–∂–µ –≤—ã –º–æ–∂–µ—Ç–µ —É–∫–∞–∑–∞—Ç—å has_custom_handler –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–≤–æ—é —Ö–µ–Ω–¥–ª–µ—Ä –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∞–ø–¥–µ–π—Ç–∞ —Ä–µ–∂–∏–º–∞.
```python
window = Window(
    Text("–ü—Ä–∏–≤–µ—Ç {username}, –¢–µ—Å—Ç –æ–∫–Ω–∞"),
    ReplyPanel(
        ReplyButton(text="–ö–Ω–æ–ø–∫–∞", data="button{username}"),
        ReplyButton(text="–¢–æ–∂–µ –∫–Ω–æ–ø–∫–∞", data="button_too", show_on="is_admin"),
        ReplyMode(name="mode2"),
        width=2
    ),
    state=MainSteps.step1
)

async def main():
    logging.basicConfig(level=logging.INFO)

    await configure_renderer(
        dp=dp,
        # –ü–æ–¥–∫–ª—é—á–∞–µ–º –æ–∫–Ω–∞
        windows=[window],
        # –ó–∞–¥–∞–µ–º —Ä–µ–∂–∏–º—ã –±–æ—Ç–∞ (–ø–µ—Ä–≤—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
        modes=[
            BotMode(
                name="mode1",
                values=["off üü•‚¨úÔ∏è  –†–µ–∂–∏–º 1", "on ‚¨úÔ∏èüü©  –†–µ–∂–∏–º 1"],
            ),
            BotMode(
                name="mode2",
                values=["–ê–¥–º–∏–Ω", "–Æ–∑–µ—Ä", "–ü—Ä–æ–¥–∞–≤–µ—Ü"],
                alert_window=alert,
                has_custom_handler=True
            )
        ]
    )

    await bot.delete_webhook(drop_pending_updates=True)
    await dp.start_polling(bot)

@dp.message(IsMode("mode2"))
async def update_mode(message: Message, renderer: Renderer):
    # –ü–æ–ª—É—á–∞–µ–º —Ä–µ–∂–∏–º —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ get_mode_by_value (—Ç–∞–∫–∂–µ –µ—Å—Ç—å get_mode_by_name)
    mode = await renderer.bot_modes.get_mode_by_value(value=message.text)
    # –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–∂–∏–º
    await renderer.bot_modes.update_mode(mode=mode.name)
    # –û–±–Ω–æ–≤–ª—è–µ–º –æ–∫–Ω–æ
    await renderer.edit(window=MenuStates.step1)
```
## –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä
–î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª–æ—Å–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∏–¥–∂–µ—Ç Progress –∏ —Ñ—É–Ω–∫—Ü–∏—é update_progress, –∑–∞–¥–∞–π—Ç–µ –Ω—É–∂–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.
```python
window = Window(
    Text("–ü—Ä–∏–≤–µ—Ç {username}, –¢–µ—Å—Ç –æ–∫–Ω–∞", end_count=2),
    Progress(name="test_pr")
    Panel(
        Button(text="–ö–Ω–æ–ø–∫–∞", data="button{username}"),
        Button(text="–¢–æ–∂–µ –∫–Ω–æ–ø–∫–∞", data="button_too", show_on="is_admin"),
        Mode(name="mode1"),
        width=2
    ),
    state=MainSteps.step1
)

@dp.message(F.text=="/start")
async def start(message: Message, renderer: Renderer):
    data = {"username": message,from_user.username, "test_pr": 0}
    
    # –°–Ω–∞—á–∞–ª–∞ –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—Ä–æ—Ü–µ–Ω—Ç 0
    pr_message, window = await renderer.answer(window=MenuStates.step1, data=data)
    
    for i in range(99):
        await renderer.update_progress(window=MenuStates.step1, event=pr_message, interval=0.3,
                                       name="test_pr", percent=i, data=data)
        await sleep(0.3)
```
## –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –Ω–∞–±–æ—Ä—ã
–î–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–Ω–æ–ø–æ–∫ —Å–æ —Å–≤–æ–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–∏–¥–∂–µ—Ç DynamicPanel. –ù—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å text, data –∏ –ø–µ—Ä–≤—É—é –∞–∫—Ç–∏–≤–Ω—É—é
—Å—Ç—Ä–∞–Ω–∏—Ü—É, –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –≤ FSM –∏ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –≤—Å–µ—Ö –æ–∫–æ–Ω.
```python
window = Window(
    Text("–ü—Ä–∏–≤–µ—Ç {username}, –¢–µ—Å—Ç –æ–∫–Ω–∞", end_count=2),
    DynamicPanel(name="dpanel", hide_number_pages=True),
    state=MainSteps.step1
)

@dp.message(F.text=="/start")
async def start(message: Message, renderer: Renderer):
    data = {
        "dpanel": {
            "page": 2,
            "text": ["1", "2", "3", "4", "5"],
            "data": ["d1", "d2", "d3", "d4", "d5"]
        },
    }
    await renderer.answer(window=MenuStates.step1, data=data)

@dp.callback_query(F.data.startswith("d"))
async def dpanel_opt(callback: CallbackQuery, renderer: Renderer):
    # –¢—É—Ç –≤–∞—à–∏ –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–Ω–æ–ø–æ–∫ –∏–∑ DynamicPanel
    pass
```
## –§–∞–π–ª—ã
–î–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ 2 –≤–∏–¥–∂–µ—Ç–∞, –ø–µ—Ä–≤—ã–π —ç—Ç–æ –≤–∏–¥–∂–µ—Ç File –∏ –µ–≥–æ –¥–æ—á–µ—Ä–Ω–∏–µ Photo, Video, Audio. –í –Ω–µ–º –º—ã —É–∫–∞–∑—ã–≤–∞–µ–º –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –∏ –µ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏–µ.
```python
window = Window(
    Text("–ü—Ä–∏–≤–µ—Ç {username}, –¢–µ—Å—Ç –æ–∫–Ω–∞", end_count=2),
    Audio(file_name="audio.mp3", path="audio.mp3"),
    state=MainSteps.step1
)
```
–í—Ç–æ—Ä–æ–π —ç—Ç–æ FileBytes, –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ —Ñ–∞–π–ª–∞ –≤ –±–∞–π—Ç–∞—Ö, –¥–∞–Ω–Ω—ã–µ –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
—Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞ –∫–æ–≥–¥–∞ –≤—ã –ø–µ—Ä–µ–¥–∞–µ—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä file_bytes –≤ —Ñ—É–Ω–∫—Ü–∏–∏ render.
```python
window = Window(
    Text("–ü—Ä–∏–≤–µ—Ç {username}, –¢–µ—Å—Ç –æ–∫–Ω–∞", end_count=2),
    AudioBytes(file_name="audio.mp3", bytes_name="bytes_a"),
    state=MainSteps.step1
)

@dp.message(F.text=="/start")
async def start(message: Message, renderer: Renderer):
    async with aiofiles.open(file="audio.mp3", mode="rb") as f:
        await renderer.answer(window=MenuStates.step1, file_bytes={"bytes_a": await f.read()})
```
–ú–µ–¥–∏–∞ –≥—Ä—É–ø–ø–∞ –∏–º–µ–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—É—é –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã, —Ç–∞–∫ —á—Ç–æ –ø–æ–∫–∞ –æ–Ω–∞ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ, –Ω—É–∂–Ω–æ –ø–æ–Ω—è—Ç—å –∫–∞–∫ –µ–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ —ç–∫–æ—Å–∏—Å—Ç–µ–º—É –±–∏–±–ª–∏–æ—Ç–µ–∫–∏.

## –ë—É–¥—É—â–µ–µ –ø—Ä–æ–µ–∫—Ç–∞

–í –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —É–∫–∞–∑–∞–Ω—ã –Ω–µ –≤—Å–µ –≤–∏–¥–∂–µ—Ç—ã, —Å –æ—Å—Ç–∞–ª—å–Ω—ã–º–∏ –ø—Ä–µ–¥–ª–∞–≥–∞—é –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ üòâ
–ü–æ –º–µ—Ä–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏–ª–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ —Ä–∞–±–æ—Ç–µ –±—É–¥—É –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –≤–∏–¥–∂–µ—Ç—ã –∏ —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É, –∫–æ–º—É –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ. –¢–∞–∫ –≤ –ø–ª–∞–Ω–∞—Ö MediaGroup, ReplyDynamicPanel, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–∏–¥–∂–µ—Ç–æ–≤ –≤ Alert,
–≤–∏–¥–∂–µ—Ç Calendar –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ–ø. –ø–æ–ª–µ–π –¥–ª—è –∫–Ω–æ–ø–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–¥–∞—é—Ç—Å—è –≤ aiogram. –¢–∞–∫–∂–µ –≤–æ–∑–º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—é –≤–∏–¥–∂–µ—Ç DynamicMediaGroup. –í—Å–µ –ø–æ –º–µ—Ä–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π, —Å–ø–∞—Å–∏–±–æ —á—Ç–æ –ø—Ä–æ—á–∏—Ç–∞–ª–∏.


