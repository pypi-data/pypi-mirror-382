[project]
name = "toolsandogh"
dynamic = ["version"]
description = "A collection of Python scripts for iSCAT microscopy data analysis"
authors = [{ name = "Marco Heisig", email = "marco.heisig@mpl.mpg.de" }]
readme = "README.md"
license = "GPL-3.0-or-later"
requires-python = ">=3.12,<3.13"
dependencies = [
    "imgui[glfw,sdl2]",
    "fastplotlib[imgui]",
    "fsspec[fuse]",
    "imageio[ffmpeg]",
    "numpy",
    "pyarrow",
    "scipy",
    "scikit-image",
    "trackpy",
    "imgrvt",
    "tqdm",
    "bioio",
    "bioio-bioformats",
    "bioio-czi",
    "scipy",
    "scikit-image",
    "trackpy",
    "imgrvt",
    "tqdm",
    "imageio[ffmpeg]",
    "bioio",
    "bioio-bioformats",
    "bioio-czi",
    "bioio-dv",
    "bioio-imageio",
    "bioio-lif",
    "bioio-nd2",
    "bioio-ome-tiff>=1.4",
    "bioio-ome-zarr>=2.2",
    "bioio-sldy",
    "bioio-tifffile",
    "bioio-tiff-glob",
    "bioio-imageio>=1.2",
    "ome-types",
    "xarray",
    "dask",
]
keywords = ["tools", "utilities", "python"]

[dependency-groups]
dev = [
    "build",
    "ipython",
    "ipywidgets",
    "ruff",
    "pre-commit",
    "pyright[nodejs]",
    "ty",
    "pytest",
    "python-lsp-server",
    "numpydoc",
    "setuptools",
    "setuptools-scm",
    "coverage",
    "jupyter",
    "jupyter_rfb",
    "rendercanvas>=2.2",
    "sidecar",
    "twine",
    "bokeh",
    "fastplotlib[notebook]",
]


[build-system]
requires = ["setuptools>80", "setuptools-scm>=8", "wheel"]
build-backend = "setuptools.build_meta"

[tool.setuptools.packages.find]
where = ["src"]

[tool.setuptools_scm]

[tool.ruff]
line-length = 100
fix = true

[tool.ruff.lint]
select = [
    "E",   # pycodestyle errors
    "W",   # pycodestyle warnings
    "F",   # pyflakes errors
    "I",   # isort
    "C",   # complexity
    "RET", # flake8-return
    "YTT", # Truthiness
    "TRY", # Try block errors
]
ignore = [
    "C901",   # Function too complex
    "E501",   # Line too long (handled by line-length)
    "E402",   # Module level import not at top of file (isort handles this)
    "TRY003", # Long message outside exception class
]
unfixable = ["F821"] # Don't try to fix name definition

[tool.numpydoc_validation]
checks = [
    "all",   # report on all checks, except the below
    "EX01",  # examples
    "SA01",  # see also section
    "ES01",  # extended summary
    "GL08",  # module/class docstrings
]

[tool.pyright]
pythonVersion = "3.12"
reportMissingImports = true
reportUnusedImports = true
reportUnusedVariables = true
include = ["src"]
exclude = [".venv"]
venvPath = "."
venv = ".venv"

[tool.pytest.ini_options]
pythonpath = ["src"]
testpaths = ["src/toolsandogh/tests"]

[tool.coverage.paths]
source = ["src"]
