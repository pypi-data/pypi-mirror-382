FROM python:3.10-alpine

ENV PYTHONUNBUFFERED=1

WORKDIR /app

COPY . .
RUN pip install --no-cache-dir -e . -i https://mirrors.aliyun.com/pypi/simple

COPY example/*.py .

CMD ["python", "main.py"]

# 使用说明：
# 1. 基本使用：docker build -f Dockerfile.dev -t snail-job-dev .
# 2. 使用自定义环境变量：docker run --rm -e SNAIL_SERVER_HOST=host.docker.internal -p 17889:17889 snail-job-dev
# 3. 使用 .env 文件：docker run --rm --env-file .env -e SNAIL_SERVER_HOST=host.docker.internal -p 17889:17889 snail-job-dev
# 4. 进入容器进行调试：docker run --rm --env-file .env -e SNAIL_SERVER_HOST=host.docker.internal -p 17889:17889 -it --entrypoint /bin/sh snail-job-dev