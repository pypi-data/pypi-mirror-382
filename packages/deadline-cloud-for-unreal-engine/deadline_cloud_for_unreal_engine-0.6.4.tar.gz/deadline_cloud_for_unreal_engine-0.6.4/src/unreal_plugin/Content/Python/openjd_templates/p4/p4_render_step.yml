name: Render
parameterSpace:
  taskParameterDefinitions:
  - name: ChunkId
    type: INT
    range: []
  - name: Handler
    type: STRING
    range: []
  - name: QueueManifestPath
    type: PATH
    range: []
  - name: OutputPath
    type: PATH
    range: []
script:
  embeddedFiles:
  - name: runData
    filename: run-data.yaml
    type: TEXT
    data: |
      handler: {{Task.Param.Handler}}
      queue_manifest_path: {{Task.Param.QueueManifestPath}}
      chunk_size: {{Param.ChunkSize}}
      chunk_id: {{Task.Param.ChunkId}}
      output_path: {{Task.Param.OutputPath}}
  actions:
    onRun:
      command: unreal-engine-openjd
      args:
      - daemon
      - run
      - --connection-file
      - '{{Session.WorkingDirectory}}/connection.json'
      - --run-data
      - file://{{Task.File.runData}}
      cancelation:
        mode: NOTIFY_THEN_TERMINATE