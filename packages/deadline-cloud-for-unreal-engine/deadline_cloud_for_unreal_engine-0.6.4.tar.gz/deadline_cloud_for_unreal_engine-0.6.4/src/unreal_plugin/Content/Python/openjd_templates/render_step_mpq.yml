name: Render
parameterSpace:
  taskParameterDefinitions:
  - name: ChunkId
    type: INT
    range: []
  - name: Handler
    type: STRING
    range: []
  - name: MoviePipelineQueuePath
    type: PATH
    range: []
  - name: ChunkSize
    type: INT
    range: [1]
script:
  embeddedFiles:
  - name: runData
    filename: run-data.yaml
    type: TEXT
    data: |
      handler: {{Task.Param.Handler}}
      queue_path: {{Task.Param.MoviePipelineQueuePath}}
      chunk_size: {{Task.Param.ChunkSize}}
      chunk_id: {{Task.Param.ChunkId}}
  actions:
    onRun:
      command: unreal-engine-openjd
      args:
      - daemon
      - run
      - --connection-file
      - '{{Session.WorkingDirectory}}/connection.json'
      - --run-data
      - file://{{Task.File.runData}}
      cancelation:
        mode: NOTIFY_THEN_TERMINATE