name: P4SyncSmf
variables:
  AWS_SECRET_P4INFO: ''
script:
  actions:
    onEnter:
      command: unreal-engine-p4-utils
      args:
      - create_workspace
      - -UnrealProjectRelativePath
      - '{{Param.ProjectRelativePath}}'
      - -UnrealProjectName
      - '{{Param.ProjectName}}'
      - -PerforceWorkspaceSpecificationTemplate
      - '{{Param.PerforceWorkspaceSpecificationTemplate}}'
      - -PerforceChangelistNumber
      - '{{Param.PerforceChangelistNumber}}'
      - -MrqJobDependenciesDescriptor
      - '{{Param.MrqJobDependenciesDescriptor}}'
      cancelation:
        mode: NOTIFY_THEN_TERMINATE
    onExit:
      command: unreal-engine-p4-utils
      args:
        - delete_workspace
        - -UnrealProjectName
        - '{{Param.ProjectName}}'
      cancelation:
        mode: NOTIFY_THEN_TERMINATE
