[project]
name = "mmfutils"
version = "0.7.2"
description = "Small set of utilities: containers and interfaces."
authors = [
    { name = "Michael McNeil Forbes", email = "michael.forbes+python@gmail.com>" },
]
readme = "description.md"
repository = "https://gitlab.com/ColdAtoms/utilities/mmfutils"
documentation = "http://mmfutils.readthedocs.org/"
classifiers = [
    "Development Status :: 4 - Beta",
    "Intended Audience :: Developers",
    "Topic :: Software Development :: Libraries :: Python Modules",
    "Topic :: Utilities",
    "Programming Language :: Python",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3 :: Only",
    "Programming Language :: Python :: 3.9",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Programming Language :: Python :: 3.13",
]
requires-python = ">=3.9,<3.14"
dependencies = [
    "zope.interface >= 5.5.2",
    "husl >= 4.0.3",
    "importlib-metadata >= 4.13.0; python_version < \"3.8\"",
    "uncertainties >= 3.2.2",
]

[project.license]
text = "BSD-3-Clause"

[project.optional-dependencies]
test = [
    "pytest >= 7.2.2",
    "pytest-cov >= 4.0.0",
    "pytest-xdist >= 3.2.1",
    "mmf-setup >= 0.4.6",
    "mock >= 4.0.3",
    "persist >= 3.2.1",
    "psutil >= 5.9.4",
    "pytest-rerunfailures >= 11.1.2",
    "mmfutils[full,doc]",
]
doc = [
    "nbconvert >=7.2.7",
    "docutils >= 0.18.1",
    "mock >= 4.0.3",
    "sphinx >= 7.1.2; python_version < \"3.9\"",
    "sphinx >= 7.2.6; python_version >= \"3.9\"",
    "sphinx-rtd-theme >= 1.2.1",
    "sphinxcontrib-zopeext >= 0.4.3",
    "matplotlib >= 3.5.3",
]
parallel = [
    "ipyparallel >= 8.4.1",
]
pyfftw = [
    "pyfftw>=0.14.0",
]
numba = [
    "numba >= 0.56.4; python_version < '3.8'",
    "numba >= 0.60.0; python_version >= '3.8' and python_version < '3.13'",
    "numba >= 0.61.0rc1; python_version >= '3.13'",
]
perf = [
    "numexpr >= 2.8.1",
    "Cython>=3.0.11",
    "mmfutils[pyfftw,numba,parallel]",
]
notebook = [
    "black >= 23.12.1",
    "notebook < 7",
    "jupytext >= 1.16.1",
    "RISE >= 5.7.1",
    "jupyter-contrib-nbextensions >= 0.7.0",
    "nbclassic >= 1.0.0",
    "jupyter-console>=6.6.3",
    "jupyter-server<2",
    "ipywidgets>=8.1.5",
    "tqdm",
]
full = [
    "scipy >= 1.7.3; python_version < '3.8'",
    "scipy >= 1.10.1; python_version >= '3.8' and python_version < '3.9'",
    "scipy >= 1.13.1; python_version >= '3.9' and python_version < '3.10'",
    "scipy >= 1.14.1; python_version >= '3.10'",
    "matplotlib >= 3.5.3",
    "docutils >= 0.19",
    "mmfutils[perf]",
]
all = [
    "mmfutils[full,test,doc,notebook]",
]

[tool.pdm.dev-dependencies]
dev = [
    "ipython >= 7.34.0",
    "nbconvert >= 7.2.7",
    "pandoc >= 2.3",
]

[tool.pytest.ini_options]
testpaths = [
    "mmfutils",
    "tests",
]
markers = [
    "bench",
    "slow",
]
addopts = [
    "--pyargs",
    "-m not bench",
    "--doctest-modules",
    "--cov",
    "--cov-report=html",
    "--cov-fail-under=80",
    "--no-cov-on-fail",
    "--cov-append",
]
doctest_optionflags = [
    "ELLIPSIS",
    "NORMALIZE_WHITESPACE",
]

[tool.coverage.run]
relative_files = true
source = [
    "mmfutils",
]
omit = [
    "*/tests/*",
]

[tool.coverage.html]
directory = "build/_coverage"

[tool.black]
exclude = "    /(\n        \\.git\n      | \\.hg\n      | \\.nox\n      | \\.venv\n      | _build\n      | build\n      | dist\n    )/\n"

[build-system]
requires = [
    "pdm-backend",
]
build-backend = "pdm.backend"
