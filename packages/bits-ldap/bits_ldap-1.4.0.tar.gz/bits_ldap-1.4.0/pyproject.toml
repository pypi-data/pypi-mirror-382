[build-system]
build-backend = "poetry.masonry.api"
requires = ["poetry>=0.12"]

[project]
authors = [
    { name = "DevNull", email = "<devnull@broadinstitute.org>" }
]
description = "LDAP python package"
keywords = ["bits", "ldap"]
license = "BSD-3-Clause"
name = "bits-ldap"
readme = "docs/README.md"
version = "1.4.0"

[project.urls]
homepage = "https://github.com/broadinstitute/bits-ldap.git"
repository = "https://github.com/broadinstitute/bits-ldap.git"

[tool.poetry]
exclude = [
    "**/*.pyc",
    "**/*.pyi",
]
packages = [
    { include = "bits" },
]

[tool.poetry.dependencies]
python = ">=3.9,<4.0"  # Compatible python versions must be declared here
python-ldap = "^3.4.4"
pytz = "^2025.2"

[tool.poetry.group.dev.dependencies]
bits-appengine = "^1.3.0"
bits-auth = "^3.0.1"
bits-mongo = "^1.0.4"
bits-mysql = "^1.0.3"
bits-settings = "^1.0.5"
bits-slack = "^1.0.22"
google-cloud-secret-manager = "^2.24.0"
pyyaml = "^6.0.2"

[tool.ruff]
extend-exclude = ["test.py"]

[tool.ruff.format]
# Prefer double quotes over single quotes.
quote-style = "double"

[tool.ruff.lint]
# https://docs.astral.sh/ruff/rules
ignore = [
  # Ignore pycodestyle that is redundant -- and can conflict -- with the
  # formatter.
  "E",
  # Ignore flake8-logging-format because it's extremely ugly for dubious
  # performance gains.
  "G",
  "D104",
  # Ignore two pydocstyle rules that cause internal conflicts and raise warnings.
  "D203",
  "D212",
  # Ignore flake8-copyright because it's not necessary on closed-source software.
  "CPY",
  # Ignore two rules that ruff warns can cause conflicts with the formatter.
  "COM812",
  "ISC001",
  # Temporary additions below this line for later improvements
  "ANN",
  "T201",
]
select = ["ALL"]

[tool.ruff.lint.extend-per-file-ignores]
"tests/*" = [
  # Don't require an __init__.py for tests.
  "INP",
  # Allow assert statements for pytest.
  "S101",
]

[tool.ruff.lint.flake8-pytest-style]
# Arbitrary choice for consistency.
fixture-parentheses = true

[tool.ruff.lint.pydocstyle]
convention = "google"
