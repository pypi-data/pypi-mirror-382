.\" Man page generated from reStructuredText.
.
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.TH "DEBOPS.REBOOT" "5" "Oct 09, 2025" "v3.1.6" "DebOps"
.SH NAME
debops.reboot \- Reboot DebOps hosts
.SH SYNOPSIS
.sp
\fBdebops run reboot\fP [\fB\-\-limit\fP \fIgroup,host,\fP\&...] [\fB\-\-diff\fP] [\fB\-\-check\fP] [\fB\-\-tags\fP \fItag1,tag2,\fP\&...] [\fB\-\-skip\-tags\fP \fItag1,tag2,\fP\&...] [<\fBansible\-playbook\fP options>] ...
.SH DESCRIPTION
.sp
The \fBdebops.reboot\fP Ansible role can be used to forcefully or conditionally
reboot a DebOps host.
.SH GETTING STARTED
.SS Default configuration
.sp
The role will check if a host requires a reboot \- this is usually indicated by
the presence of the \fB/var/run/reboot\-required\fP file. If it\(aqs found, the
role will perform a reboot and will wait for the host to come back. Otherwise,
nothing will happen.
.sp
The reboot can be forced using the \fI\%reboot__force\fP boolean variable,
either via inventory or using the \fB\-\-extra\-vars\fP \fBansible\-playbook\fP
parameter, for example:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
debops run reboot \-l <host> \-e \(aqreboot__force=true\(aq
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
If the \fBdisplay_skipped_hosts\fP option is set to \fBFalse\fP in the
\fBansible.cfg\fP configuration file, the task which performs the reboot will
not show up in the \fBansible\-playbook\fP output immediately, which might
appear as Ansible \(dqhanging\(dq while waiting for the host to come back. This is an
expected behaviour.
.SS Example inventory
.sp
The playbook will work only on hosts that are in the main DebOps host group in
the Ansible inventory:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
[debops_all_hosts]
hostname1
hostname2
.ft P
.fi
.UNINDENT
.UNINDENT
.SS Example playbook
.sp
If you are using this role without DebOps, here\(aqs an example Ansible playbook
that uses the \fBdebops.reboot\fP role:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
\-\-\-
# SPDX\-License\-Identifier: GPL\-3.0\-only
#
# This playbook will reboot all DebOps hosts (use with caution)
# if required, or if forced.

\- name: Reboot DebOps hosts
  hosts: [ \(aqdebops_all_hosts\(aq ]
  become: True

  gather_facts: False

  environment: \(aq{{ inventory__environment | d({})
                   | combine(inventory__group_environment | d({}))
                   | combine(inventory__host_environment  | d({})) }}\(aq

  roles:

    \- role: reboot
      tags: [ \(aqrole::reboot\(aq, \(aqskip::reboot\(aq ]

.ft P
.fi
.UNINDENT
.UNINDENT
.SH AUTHOR
Julien Lecomte
.SH COPYRIGHT
2014-2024, Maciej Delmanowski, Nick Janetakis, Robin Schneider and others
.\" Generated by docutils manpage writer.
.
