"use strict";(self.webpackChunkrichie_education=self.webpackChunkrichie_education||[]).push([[11224],{11224:function(e,n,r){r.r(n),r.d(n,{SignatureLexPersona:function(){return s}}),r(34202),r(79653),r(20619),r(32064),r(5177),r(31336),r(61255),r(31767),r(85971);var t=r(75171),o=r(42049),i=r(93009),a=(r(48008),r(51729)),u=(0,o.YK)({errorStatus:{id:"components.Dashboard.Signature.SignatureLexPersona.errorStatus",defaultMessage:[{type:0,value:"An error happened while signing the contract with the following status: "},{type:1,value:"status"},{type:0,value:". Please refresh to try again."}]},error:{id:"components.Dashboard.Signature.SignatureLexPersona.error",defaultMessage:[{type:0,value:"An error happened while signing the contract. Please try again later."}]}}),s=function(e){var n=e.onDone,r=e.onError,o=e.invitationLink,s=(0,i.A)();return(0,t.useEffect)((function(){iframeManager.open(o).then((function(e){e?r(s.formatMessage(u.errorStatus,{status:e})):n()}),(function(e){(0,a.p)(e),r(s.formatMessage(u.error))})),setTimeout((function(){var e=new URL(o),n=document.querySelectorAll("iframe"),r=Array.from(n).find((function(n){return new URL(n.src).origin===e.origin}));r?r.setAttribute("id","lex-persona"):(0,a.p)(new Error("Cannot find iframe"))}))}),[]),null};n.default=s},48008:function(e,n,r){var t,o;function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}r(28092),r(89700),r(29794),r(20619),r(33901),r(43563),r(24397),r(32064),r(68595),r(67607),r(42478),r(35434),r(5177),r(63859),r(1071),r(27317),r(31336),e=r.hmd(e),t=window,o=function(){return function(e){function n(t){if(r[t])return r[t].exports;var o=r[t]={exports:{},id:t,loaded:!1};return e[t].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var r={};return n.m=e,n.c=r,n.p="",n(0)}([function(e,n){function r(){s&&(s(),s=null)}function t(){a||((a=document.createElement("style")).innerHTML="."+u+" { overflow: hidden; }",document.getElementsByTagName("head")[0].appendChild(a))}function o(e,n){return void 0===n?e:"object"!==i(e)?n:(Object.keys(n).forEach((function(r){void 0===e[r]?e[r]=n[r]:e[r]=o(e[r],n[r])})),e)}var a,u="iframe-manager-open",s=null;n.open=function(e,n,a){function f(f,c){function l(e){r(),c&&c(e),a(e)}function d(e){var n=e&&e.trim().split("/");if(!n||!n[0]||n[1]||!n[2])return l(new Error("Malformed or missing URL"));var r=n[0].toLowerCase(),t=r+"//"+n[2].toLowerCase();return"http"===r?t=t.replace(/:80$/,""):"https"===r&&(t=t.replace(/:443$/,"")),t}a="function"==typeof a?a:"function"==typeof n?n:function(){},n="object"===i(n)?n:"object"===i(e)?e:{},e="string"==typeof e?e:"string"==typeof n.url?n.url:"",n=o({iframe:!0,iframeProps:{width:"100%",height:"100%",frameBorder:0,allowTransparency:"true"},iframeStyle:{position:"fixed",top:"0",left:"0",zIndex:9999}},n);var p=d(window.location.href),m=d(e),w=e.split("#"),y=-1===w[0].indexOf("?")?"?":"&";y+=n.iframe?"iframeParentOrigin=":"windowParentOrigin=",e=w[0]+y+encodeURIComponent(p);var g,h=Math.random().toString(36).slice(2);w.length>1?(w[0]="",e+=w.join("#")+"&parentChallenge="+h):e+="#parentChallenge="+h;var v=null,b=null,S=null;if(n.iframe)v=document.createElement("iframe"),Object.keys(n.iframeProps).forEach((function(e){v[e]=n.iframeProps[e]})),Object.keys(n.iframeStyle).forEach((function(e){v.style[e]=n.iframeStyle[e]})),v.onerror=function(){l(new Error("unknown_error"))},v.onload=function(){g.postMessage(h,m)},v.src=e,document.body.appendChild(v),t(),document.body.className+=" "+u,g=v.contentWindow,s=function(){document.body.removeChild(v),removeEventListener("message",S),document.body.className=window.document.body.className.replace(new RegExp("(?:^|\\s)"+u+"(?!\\S)"),"")};else{if(!(g=window.open(e,Math.random().toString(36).substring(2))))throw new Error("The authorize window was blocked.");s=function(){clearInterval(b),g.closed||g.close(),window.removeEventListener("message",S)}}S=function(e){var n=d(e.origin);e.source===g&&n===m&&("error"===e.data?l(new Error("Unknown error")):function(e){r(),f&&f(e),a(null,e)}(e.data))},window.addEventListener("message",S),n.iframe||(b=setInterval((function(){g.closed&&l(new Error("Window closed"))}),250))}return r(),o((window.Promise?new Promise(f):f())||{},{clean:r})}}])},"object"===("undefined"==typeof exports?"undefined":i(exports))&&"object"===i(e)?e.exports=o():"function"==typeof define&&r.amdO?define([],o):"object"===("undefined"==typeof exports?"undefined":i(exports))?exports.iframeManager=o():t.iframeManager=o()}}]);
//# sourceMappingURL=11224.ecc3ceecd609629e2b97.index.js.map