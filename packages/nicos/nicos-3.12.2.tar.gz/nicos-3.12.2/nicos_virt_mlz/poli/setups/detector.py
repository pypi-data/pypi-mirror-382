description = 'POLI detector and counter card'
group = 'lowlevel'

devices = dict(
    mcstas = device('nicos_virt_mlz.poli.devices.mcstas.PoliSimulation',
        description = 'McStas simulation',
    ),
    camimage = device('nicos.devices.mcstas.McStasImage',
        description = 'Neutron camera image',
        mcstas = 'mcstas',
        mcstasfile = 'Neutron_cam.txt',
        size = (251, 251),
        fmtstr = '%d',
        unit = 'cts',
        visibility = (),
    ),
    timer = device('nicos.devices.mcstas.McStasTimer',
        mcstas = 'mcstas',
        visibility = (),
    ),
    mon1 = device('nicos.devices.generic.VirtualCounter',
        description = 'Monitor 1',
        type = 'monitor',
        fmtstr = '%d',
        visibility = (),
    ),
    mon2 = device('nicos.devices.generic.VirtualCounter',
        description = 'Monitor 2',
        type = 'monitor',
        fmtstr = '%d',
        visibility = (),
    ),
    ctr1 = device('nicos.devices.mcstas.McStasCounter',
        mcstas = 'mcstas',
        mcstasfile = 'Detector.dat',
        type = 'counter',
        fmtstr = '%d',
        visibility = (),
    ),
    det = device('nicos.devices.mcstas.Detector',
        mcstas = 'mcstas',
        description = 'FRM II multichannel counter card',
        timers = ['timer'],
        monitors = ['mon1', 'mon2'],
        counters = ['ctr1'],
        images = ['camimage'],
        maxage = 1,
        pollinterval = 1,
        liveinterval = 1.0,
    ),
)

startupcode = '''
SetDetectors(det)
'''
