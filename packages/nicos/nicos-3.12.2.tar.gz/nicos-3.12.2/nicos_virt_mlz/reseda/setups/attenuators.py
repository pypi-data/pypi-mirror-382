description = 'Attenuators'
group = 'optional'
display_order = 2

devices = dict(
    att0 = device('nicos.devices.generic.ManualSwitch',
        description = 'Attenuator 0: factor 3',
        states = ['out', 'in'],
        unit = '',
        maxage = 119,
        pollinterval = 60,
        visibility = (),
    ),
    att1 = device('nicos.devices.generic.ManualSwitch',
        description = 'Attenuator 1: factor 15',
        states = ['out', 'in'],
        unit = '',
        maxage = 119,
        pollinterval = 60,
        visibility = (),
    ),
    att2 = device('nicos.devices.generic.ManualSwitch',
        description = 'Attenuator 2: factor 30',
        states = ['out', 'in'],
        unit = '',
        maxage = 119,
        pollinterval = 60,
        visibility = (),
    ),
    att = device('nicos_mlz.pgaa.devices.Attenuator',
        description = 'Attenuator device',
        moveables = ['att0', 'att1', 'att2'],
        readables = None,
        precision = None,
        unit = '%',
        fmtstr = '%.2f',
        mapping = {
            100.: ('out', 'out', 'out'),
            33.3: ('in', 'out', 'out'),
            6.7: ('out', 'in', 'out'),
            3.3: ('out', 'out', 'in'),
            2.2: ('in', 'in', 'out'),
            1.1: ('in', 'out', 'in'),
            0.2: ('out', 'in', 'in'),
            0.07: ('in', 'in', 'in'),
        },
        maxage = 119,
        pollinterval = 60,
    ),
)
