description = 'Devices for the velocity selector'

pvprefix = 'SQ:POLDI:CHOPPER:'

devices = dict(
    mapped_chopper_speed = device('nicos_sinq.poldi.devices.poldi.MappedChopperTimebinModes',
        description = 'Provide list of valid speeds, and automatic binning configuration.',
        chopper_speed = 'ch_speed',
        just_bin_it_image = 'det_south_hist',
        mapping = {
            15000 : 2000,
            12500 : 2400,
            10000 : 2000,
            7500 : 2000,
            5000 : 2000,
            2500 : 2000,
            2000 : 2000,
            0 : 20
            }
    ),
    ch_speed = device('nicos_sinq.poldi.devices.epics_no_stop.EpicsDigitalMoveableNoStop',
        description = 'Speed of the chopper',
        writepv = pvprefix + 'req_speed',
        readpv = pvprefix + 'req_speed',
        visibility = (),
    ),
    ch_speed_rbv = device('nicos_sinq.devices.epics.base.EpicsReadableSinq',
        description = 'Speed of the chopper',
        readpv = pvprefix + 'speed_rbv',
    ),
    ch_state = device('nicos_sinq.devices.epics.base.EpicsStringReadableSinq',
        description = 'State of the chopper',
        readpv = pvprefix + 'state',
    ),
    ch_motor_temperature_rbv = device('nicos_sinq.devices.epics.base.EpicsReadableSinq',
        description = 'Motor temperature of the chopper',
        readpv = pvprefix + 'motor_temp_rbv',
    ),
    ch_motor_current_rbv = device('nicos_sinq.devices.epics.base.EpicsReadableSinq',
        description = 'Motor current of the chopper',
        readpv = pvprefix + 'motor_current_rbv',
    ),
    ch_vacuum_rbv = device('nicos_sinq.devices.epics.base.EpicsReadableSinq',
        description = 'Vacuum in chopper',
        readpv = pvprefix + 'vacuum_rbv',
    ),
    ch_cw_temp_rbv = device('nicos_sinq.devices.epics.base.EpicsReadableSinq',
        description = 'Cooling water temperature for the chopper',
        readpv = pvprefix + 'cw_temp_rbv',
    ),
    ch_cw_flow_rate_rbv = device('nicos_sinq.devices.epics.base.EpicsReadableSinq',
        description = 'Cooling water flow rate in the chopper',
        readpv = pvprefix + 'cw_flow_rate_rbv',
    ),
    ch_disc_temp_rbv = device('nicos_sinq.devices.epics.base.EpicsReadableSinq',
        description = 'Disc temperature of chopper',
        readpv = pvprefix + 'disc_temp_rbv',
    ),
    ch_mb_levitate_rbv = device('nicos_sinq.devices.epics.base.EpicsStringReadableSinq',
        description = 'Magnetic bearing levitates of the chopper',
        readpv = pvprefix + 'mb_levitate_rbv',
    ),
    ch_speedup = device('nicos_sinq.poldi.devices.epics_no_stop.EpicsDigitalMoveableNoStop',
        description = 'Speedup chopper',
        writepv = pvprefix + 'speedup',
        readpv = pvprefix + 'speedup',
    ),
    ch_brake = device('nicos_sinq.poldi.devices.epics_no_stop.EpicsDigitalMoveableNoStop',
        description = 'Brake chopper',
        writepv = pvprefix + 'brake',
        readpv = pvprefix + 'brake',
    ),
)
