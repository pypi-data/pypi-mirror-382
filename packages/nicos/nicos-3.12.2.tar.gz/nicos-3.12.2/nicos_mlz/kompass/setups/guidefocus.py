description = 'Neutron guide focussing devices'

group = 'lowlevel'

tango_base = 'tango://kompasshw.kompass.frm2.tum.de:10000/kompass/'

devices = dict(
    lguide_m = device('nicos.devices.entangle.Motor',
        description = 'Long table motor',
        tangodevice = tango_base + 'guides/long_m',
        fmtstr = '%.2f',
        visibility = (),
    ),
    lguide_c = device('nicos.devices.entangle.Sensor',
        description = 'Long table coder',
        tangodevice = tango_base + 'guides/long_c',
        fmtstr = '%.2f',
        visibility = (),
    ),
    lguide = device('nicos.devices.generic.Axis',
        description = 'Long table position',
        motor = 'lguide_m',
        coder = 'lguide_c',
        fmtstr = '%.2f',
        precision = 0.05,
    ),
    sguide_m = device('nicos.devices.entangle.Motor',
        description = 'Short table motor',
        tangodevice = tango_base + 'guides/short_m',
        fmtstr = '%.2f',
        visibility = (),
    ),
    sguide_c = device('nicos.devices.entangle.Sensor',
        description = 'Short table coder',
        tangodevice = tango_base + 'guides/short_c',
        fmtstr = '%.2f',
        visibility = (),
    ),
    sguide = device('nicos.devices.generic.Axis',
        description = 'Short table position',
        motor = 'sguide_m',
        coder = 'sguide_c',
        fmtstr = '%.2f',
        precision = 0.05,
    ),
    guide = device('nicos.devices.generic.MultiSwitcher',
        description = 'Neutron guide selector',
        moveables = ['sguide', 'lguide'],
        mapping = {
            'straight': [205.037, 208.5],
            'focussing': [0., -3.5],
        },
        fallback = 'undefined',
        fmtstr = '%s',
        precision = [0.05, 0.05],
        blockingmove = False,
        unit = '',
    ),
)
