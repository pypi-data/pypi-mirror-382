/*! For license information please see deposit.d47e18177b16ccdbdb84.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.swh=e():(t.swh=t.swh||{},t.swh.deposit=e())}(self,function(){return function(){var t={887:function(t,e,n){var r=n(16993),o=n(11791);t.exports=function(t,e,n,i,s){return new o(r().w(t,e,n,i),s||Promise)},t.exports.__esModule=!0,t.exports.default=t.exports},4373:function(t){t.exports=function(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}},t.exports.__esModule=!0,t.exports.default=t.exports},4633:function(t,e,n){var r=n(25172),o=n(16993),i=n(55869),s=n(887),a=n(11791),c=n(4373),u=n(30579);function l(){"use strict";var e=o(),n=e.m(l),f=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function d(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))}var p={throw:1,return:2,break:3,continue:3};function h(t){var e,n;return function(r){e||(e={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return n(r.a,p[t],e)},delegateYield:function(t,o,i){return e.resultName=o,n(r.d,u(t),i)},finish:function(t){return n(r.f,t)}},n=function(t,n,o){r.p=e.prev,r.n=e.next;try{return t(n,o)}finally{e.next=r.n}}),e.resultName&&(e[e.resultName]=r.v,e.resultName=void 0),e.sent=r.v,e.next=r.n;try{return t.call(this,e)}finally{r.p=e.prev,r.n=e.next}}}return(t.exports=l=function(){return{wrap:function(t,n,r,o){return e.w(h(t),n,r,o&&o.reverse())},isGeneratorFunction:d,mark:e.m,awrap:function(t,e){return new r(t,e)},AsyncIterator:a,async:function(t,e,n,r,o){return(d(e)?s:i)(h(t),e,n,r,o)},keys:c,values:u}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=l,t.exports.__esModule=!0,t.exports.default=t.exports},8545:function(t,e,n){"use strict";n.d(e,{Eb:function(){return o},jt:function(){return i},lY:function(){return r}});n(54756),n(18987);function r(t,e){var n="/static/"+t;return n.startsWith("/")&&e&&(n=e+n),n}function o(t){return new Date(t).toLocaleString()}function i(t,e,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=""),"display"===e&&t){var o=encodeURI(t);r||(r=o);var i="";return n&&(i='target="_blank" rel="noopener noreferrer"'),'<a href="'+o+'" '+i+">"+r+"</a>"}return t}},11791:function(t,e,n){var r=n(25172),o=n(75546);t.exports=function t(e,n){function i(t,o,s,a){try{var c=e[t](o),u=c.value;return u instanceof r?n.resolve(u.v).then(function(t){i("next",t,s,a)},function(t){i("throw",t,s,a)}):n.resolve(u).then(function(t){c.value=t,s(c)},function(t){return i("throw",t,s,a)})}catch(t){a(t)}}var s;this.next||(o(t.prototype),o(t.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),o(this,"_invoke",function(t,e,r){function o(){return new n(function(e,n){i(t,r,e,n)})}return s=s?s.then(o,o):o()},!0)},t.exports.__esModule=!0,t.exports.default=t.exports},16099:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=r(n(86308));function i(t){if(!t.options.indentation&&!t.options.lineSeparator)return;let e;for(t.content+=t.options.lineSeparator,e=0;e<t.level;e++)t.content+=t.options.indentation}function s(t,e){t.content+=e}function a(t,e,n){if("Element"===t.type)!function(t,e,n){e.path.push(t.name),!n&&e.content.length>0&&i(e);if(s(e,"<"+t.name),function(t,e){Object.keys(e).forEach(function(n){const r=e[n].replace(/"/g,"&quot;");s(t," "+n+'="'+r+'"')})}(e,t.attributes),null===t.children||e.options.forceSelfClosingEmptyTag&&0===t.children.length){const t=e.options.whiteSpaceAtEndOfSelfclosingTag?" />":"/>";s(e,t)}else if(0===t.children.length)s(e,"></"+t.name+">");else{const r=t.children;s(e,">"),e.level++;let o="preserve"===t.attributes["xml:space"]||n,c=!1;if(!o&&e.options.ignoredPaths&&(c=function(t,e){const n="/"+t.join("/"),r=t[t.length-1];return e.includes(r)||e.includes(n)}(e.path,e.options.ignoredPaths),o=c),!o&&e.options.collapseContent){let t=!1,e=!1,i=!1;r.forEach(function(o,s){"Text"===o.type?(o.content.includes("\n")?(e=!0,o.content=o.content.trim()):0!==s&&s!==r.length-1||n||0===o.content.trim().length&&(o.content=""),(o.content.trim().length>0||1===r.length)&&(t=!0)):"CDATA"===o.type?t=!0:i=!0}),!t||i&&e||(o=!0)}r.forEach(function(t){a(t,e,n||o)}),e.level--,n||o||i(e),c&&function(t){let e;for(t.content=t.content.replace(/ +$/,""),e=0;e<t.level;e++)t.content+=t.options.indentation}(e),s(e,"</"+t.name+">")}e.path.pop()}(t,e,n);else if("ProcessingInstruction"===t.type)c(t,e);else{if("string"!=typeof t.content)throw new Error("Unknown node type: "+t.type);!function(t,e,n){if(!n){const n=t.trim();(e.options.lineSeparator||0===n.length)&&(t=n)}t.length>0&&(!n&&e.content.length>0&&i(e),s(e,t))}(t.content,e,n)}}function c(t,e){e.content.length>0&&i(e),s(e,"<?"+t.name),s(e," "+t.content.trim()),s(e,"?>")}function u(t,e={}){e.indentation="indentation"in e?e.indentation:"    ",e.collapseContent=!0===e.collapseContent,e.lineSeparator="lineSeparator"in e?e.lineSeparator:"\r\n",e.whiteSpaceAtEndOfSelfclosingTag=!0===e.whiteSpaceAtEndOfSelfclosingTag,e.throwOnFailure=!1!==e.throwOnFailure;try{const n=(0,o.default)(t,{filter:e.filter,strictMode:e.strictMode}),r={content:"",level:0,options:e,path:[]};return n.declaration&&c(n.declaration,r),n.children.forEach(function(t){a(t,r,!1)}),e.lineSeparator?r.content.replace(/\r\n/g,"\n").replace(/\n/g,e.lineSeparator):r.content}catch(n){if(e.throwOnFailure)throw n;return t}}u.minify=(t,e={})=>u(t,Object.assign(Object.assign({},e),{indentation:"",lineSeparator:""})),t.exports=u,e.default=u},16993:function(t,e,n){var r=n(75546);function o(){var e,n,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.toStringTag||"@@toStringTag";function c(t,o,i,s){var a=o&&o.prototype instanceof l?o:l,c=Object.create(a.prototype);return r(c,"_invoke",function(t,r,o){var i,s,a,c=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return i=t,s=0,a=e,d.n=n,u}};function p(t,r){for(s=t,a=r,n=0;!f&&c&&!o&&n<l.length;n++){var o,i=l[n],p=d.p,h=i[2];t>3?(o=h===r)&&(a=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=t<2&&p<i[1])?(s=0,d.v=r,d.n=i[1]):p<h&&(o=t<3||i[0]>r||r>h)&&(i[4]=t,i[5]=r,d.n=h,s=0))}if(o||t>1)return u;throw f=!0,r}return function(o,l,h){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,h),s=l,a=h;(n=s<2?e:a)||!f;){i||(s?s<3?(s>1&&(d.n=-1),p(s,a)):d.n=a:d.v=a);try{if(c=2,i){if(s||(o="next"),n=i[o]){if(!(n=n.call(i,a)))throw TypeError("iterator result is not an object");if(!n.done)return n;a=n.value,s<2&&(s=0)}else 1===s&&(n=i.return)&&n.call(i),s<2&&(a=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((n=(f=d.n<0)?a:t.call(r,d))!==u)break}catch(t){i=e,s=1,a=t}finally{c=1}}return{value:n,done:f}}}(t,i,s),!0),c}var u={};function l(){}function f(){}function d(){}n=Object.getPrototypeOf;var p=[][s]?n(n([][s]())):(r(n={},s,function(){return this}),n),h=d.prototype=l.prototype=Object.create(p);function m(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,r(t,a,"GeneratorFunction")),t.prototype=Object.create(h),t}return f.prototype=d,r(h,"constructor",d),r(d,"constructor",f),f.displayName="GeneratorFunction",r(d,a,"GeneratorFunction"),r(h),r(h,a,"Generator"),r(h,s,function(){return this}),r(h,"toString",function(){return"[object Generator]"}),(t.exports=o=function(){return{w:c,m:m}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports},18987:function(t,e,n){"use strict";function r(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}(function t(e,n){function o(t,o,i){if("undefined"!=typeof document){"number"==typeof(i=r({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var a in i)i[a]&&(s+="; "+a,!0!==i[a]&&(s+="="+i[a].split(";")[0]));return document.cookie=t+"="+e.write(o,t)+s}}return Object.create({set:o,get:function(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var n=document.cookie?document.cookie.split("; "):[],r={},o=0;o<n.length;o++){var i=n[o].split("="),s=i.slice(1).join("=");try{var a=decodeURIComponent(i[0]);if(r[a]=e.read(s,a),t===a)break}catch(t){}}return t?r[t]:r}},remove:function(t,e){o(t,"",r({},e,{expires:-1}))},withAttributes:function(e){return t(this.converter,r({},this.attributes,e))},withConverter:function(e){return t(r({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(e)}})})({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},23717:function(t,e,n){"use strict";n.d(e,{_k:function(){return r}});var r={serverSide:!0,processing:!0,language:{processing:'<img src="'+(0,n(8545).lY)("img/swh-spinner.gif")+'"></img>'},fixedHeader:!0,lengthMenu:[10,25,50,100,1e3],scrollCollapse:!0,searchDelay:1e3}},25172:function(t){t.exports=function(t,e){this.v=t,this.k=e},t.exports.__esModule=!0,t.exports.default=t.exports},30579:function(t,e,n){var r=n(73738).default;t.exports=function(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(r(t)+" is not iterable")},t.exports.__esModule=!0,t.exports.default=t.exports},54756:function(t,e,n){var r=n(4633)();t.exports=r;try{regeneratorRuntime=r}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},55869:function(t,e,n){var r=n(887);t.exports=function(t,e,n,o,i){var s=r(t,e,n,o,i);return s.next().then(function(t){return t.done?t.value:s.next()})},t.exports.__esModule=!0,t.exports.default=t.exports},58168:function(t,e,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r.apply(null,arguments)}n.d(e,{A:function(){return r}})},73738:function(t){function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},75546:function(t){function e(n,r,o,i){var s=Object.defineProperty;try{s({},"",{})}catch(n){s=0}t.exports=e=function(t,n,r,o){function i(n,r){e(t,n,function(t){return this._invoke(n,r,t)})}n?s?s(t,n,{value:r,enumerable:!o,configurable:!o,writable:!o}):t[n]=r:(i("next",0),i("throw",1),i("return",2))},t.exports.__esModule=!0,t.exports.default=t.exports,e(n,r,o,i)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},86308:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ParsingError=void 0;class n extends Error{constructor(t,e){super(t),this.cause=e}}let r;function o(){return a(!1)||function(){const t=l(/^([^<]+)/);if(t){const e={type:"Text",content:t[1]};return{excluded:!1===r.options.filter(e),node:e}}}()||c()||function(){if(r.xml.startsWith("<![CDATA[")){const t=r.xml.indexOf("]]>");if(t>-1){const e=t+3,n={type:"CDATA",content:r.xml.substring(0,e)};return r.xml=r.xml.slice(e),{excluded:!1===r.options.filter(n),node:n}}}}()||s()}function i(){return l(/\s*/),a(!0)||c()||function(){const t=l(/^<!DOCTYPE\s+\S+\s+SYSTEM[^>]*>/)||l(/^<!DOCTYPE\s+\S+\s+PUBLIC[^>]*>/)||l(/^<!DOCTYPE\s+\S+\s*\[[^\]]*]>/)||l(/^<!DOCTYPE\s+\S+\s*>/);if(t){const e={type:"DocumentType",content:t[0]};return{excluded:!1===r.options.filter(e),node:e}}}()||s()}function s(){const t=l(/^<\?([\w-:.]+)\s*/);if(!t)return;const e={name:t[1],type:"ProcessingInstruction",content:""},o=r.xml.indexOf("?>");if(!(o>-1))throw new n("Failed to parse XML","ProcessingInstruction closing tag not found");return e.content=r.xml.substring(0,o).trim(),r.xml=r.xml.slice(o),l(/\?>/),{excluded:!1===r.options.filter(e),node:e}}function a(t){const e=l(/^<([^?!</>\s]+)\s*/);if(!e)return;const i={type:"Element",name:e[1],attributes:{},children:[]},s=!t&&!1===r.options.filter(i);for(;!(f()||d(">")||d("?>")||d("/>"));){const t=u();if(!t)return;i.attributes[t.name]=t.value}if(l(/^\s*\/>/))return i.children=null,{excluded:s,node:i};l(/\??>/);let a=o();for(;a;)a.excluded||i.children.push(a.node),a=o();if(r.options.strictMode){const t=`</${i.name}>`;if(!r.xml.startsWith(t))throw new n("Failed to parse XML",`Closing tag not matching "${t}"`);r.xml=r.xml.slice(t.length)}else l(/^<\/[\w-:.\u00C0-\u00FF]+\s*>/);return{excluded:s,node:i}}function c(){const t=l(/^<!--[\s\S]*?-->/);if(t){const e={type:"Comment",content:t[0]};return{excluded:!1===r.options.filter(e),node:e}}}function u(){const t=l(/([^=]+)\s*=\s*("[^"]*"|'[^']*'|[^>\s]+)\s*/);if(t)return{name:t[1].trim(),value:(e=t[2].trim(),e.replace(/^['"]|['"]$/g,""))};var e}function l(t){const e=r.xml.match(t);if(e)return r.xml=r.xml.slice(e[0].length),e}function f(){return 0===r.xml.length}function d(t){return 0===r.xml.indexOf(t)}function p(t,e={}){t=t.trim();const o=e.filter||(()=>!0);return r={xml:t,options:Object.assign(Object.assign({},e),{filter:o,strictMode:!0===e.strictMode})},function(){const t=s(),e=[];let o,a=i();for(;a;){if("Element"===a.node.type){if(o)throw new Error("Found multiple root nodes");o=a.node}a.excluded||e.push(a.node),a=i()}if(!o)throw new n("Failed to parse XML","Root Element not found");if(0!==r.xml.length)throw new n("Failed to parse XML","Not Well-Formed XML");return{declaration:t?t.node:null,root:o,children:e}}()}e.ParsingError=n,t.exports=p,e.default=p}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};return function(){"use strict";n.r(r),n.d(r,{initDepositAdmin:function(){return c}});var t=n(58168),e=n(16099),o=n.n(e),i=n(8545),s=n(23717);function a(t,e,n){if(void 0===n&&(n=""),"display"===e&&t&&t.startsWith("swh")){var r=Urls.browse_swhid(t),o=t.replace(/;/g,";<br/>");return n||(n=o),'<a href="'+r+'">'+n+"</a>"}return t}function c(e,n){var r;$(document).ready(function(){$.fn.dataTable.ext.errMode="none",r=$("#swh-admin-deposit-list").on("error.dt",function(t,e,n,r){$("#swh-admin-deposit-list-error").text(r)}).DataTable((0,t.A)({},s._k,{dom:'<<"d-flex justify-content-between align-items-center"f<"#list-exclude">l>rt<"row mt-2"<"col-sm-5"i><"col-sm-7"p>>',ajax:{url:Urls.admin_deposit_list(),data:function(t){t.excludePattern=$("#swh-admin-deposit-list-exclude-filter").val()}},columns:[{data:"id",name:"id"},{data:"type",name:"type"},{data:"uri",name:"uri",render:function(t,e,n){var r=$.fn.dataTable.render.text().display(t),o="",s="";return n.swhid_context&&t?o=a(n.swhid_context,e,r):t&&(o=r),t&&(s=(0,i.jt)(r,e,!0,'<i class="mdi mdi-open-in-new" aria-hidden="true"></i>')),o+"&nbsp;"+s}},{data:"reception_date",name:"reception_date",render:i.Eb},{data:"status",name:"status"},{data:"raw_metadata",name:"raw_metadata",render:function(t,e,n){return"display"===e&&n.raw_metadata?'<button class="btn btn-secondary metadata">display</button>':t}},{data:"status_detail",name:"status_detail",render:function(t,e,n){if("display"===e&&t){var r=t;return"object"==typeof t&&(r=JSON.stringify(t,null,4)),'<div style="width: 200px; white-space: pre; overflow-x: auto;">'+r+"</div>"}return t},orderable:!1,visible:!1},{data:"swhid",name:"swhid",render:function(t,e,n){return a(t,e)},orderable:!1,visible:!1},{data:"swhid_context",name:"swhid_context",render:function(t,e,n){return a(t,e)},orderable:!1,visible:!1}],scrollX:!0,order:[[0,"desc"]]})),$("div#list-exclude").html('\n      <div id="swh-admin-deposit-list-exclude-div-wrapper" class="dataTables_filter">\n        <label for="swh-admin-deposit-list-exclude-filter">\n          Exclude:\n        </label>\n        <input id="swh-admin-deposit-list-exclude-filter"\n              type="search"\n              value="check-deposit"\n              class="form-control form-control-sm mb-2"\n              placeholder="exclude-pattern" aria-controls="swh-admin-deposit-list">\n        </input>\n      </div>'),$("#swh-admin-deposit-list tbody").on("click","tr button.metadata",function(){var t=r.row(this.parentNode.parentNode).data(),e=o()(t.raw_metadata,{indentation:"  ",collapseContent:!0,lineSeparator:"\n"}),n=$("<div/>").text(e).html();swh.webapp.showModalHtml("Metadata of deposit "+t.id,'<pre style="max-height: 75vh;"><code class="xml">'+n+"</code></pre>","90%"),swh.webapp.highlightCode()}),$("#swh-admin-deposit-list-exclude-filter").keyup(function(){r.draw()}),r.draw()}),$("a.toggle-col").on("click",function(t){t.preventDefault();var e=r.column($(this).attr("data-column"));e.visible(!e.visible()),e.visible()?$(this).removeClass("col-hidden"):$(this).addClass("col-hidden")})}}(),r}()});
//# sourceMappingURL=deposit.d47e18177b16ccdbdb84.js.map