name: Update SPEC 0 dependencies

on:
    workflow_dispatch:
    schedule:
        # At 00:00 on day-of-month 2 in every 3rd month. (i.e. every quarter)
        # Releases should happen on the first day of the month in scientific-python/spec-zero-tools
        # so allow one day as a buffer to avoid timing issues
        - cron: "0 0 2 */3 *"

permissions:
    contents: write
    pull-requests: write

jobs:
    update:
        runs-on: ubuntu-latest
        env:
          GH_TOKEN: ${{ secrets.GH_PAT }}
        steps:
            - uses: savente93/spec-zero-tools@feat/python
              with:
                  token: ${{ secrets.GH_PAT }}
                  project_file_name: "pyproject.toml"
                  target_branch: 'main'
