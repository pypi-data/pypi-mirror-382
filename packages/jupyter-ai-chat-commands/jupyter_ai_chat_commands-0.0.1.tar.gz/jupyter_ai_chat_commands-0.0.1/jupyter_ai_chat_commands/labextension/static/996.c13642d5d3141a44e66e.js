"use strict";(self.webpackChunk_jupyter_ai_chat_commands=self.webpackChunk_jupyter_ai_chat_commands||[]).push([[996],{82:(e,t,r)=>{var n=r(5709);t.A=void 0;var a=n(r(2032)),s=r(4848);t.A=(0,a.default)((0,s.jsx)("path",{d:"M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3"}),"FindInPage")},1996:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m});var n=r(5023),a=r(7296),s=r(3345),o=r.n(s),i=r(1949),c=r(82);const l="@jupyter-ai/core:file-command-provider";class d{constructor(e,t){this.id=l,this._regex=/@file:(([\w/\-_.@]|\\ )+)/g,this._contentsManager=e,this._docRegistry=t}async listCommandCompletions(e){const t=e.currentWord;if(!t||!t.startsWith("@"))return[];if(t.startsWith("@file:")){const e=t.split("@file:")[1],r=await async function(e,t,r){const[n,a]=function(e){var t;const r=e.split("/");let n,a;return 1===r.length?(n="",a=r[0]):(n=r.slice(0,-1).join("/")+"/",a=null!==(t=r[r.length-1])&&void 0!==t?t:""),[n,a]}(r),s=await e.get(n.replaceAll("\\ "," ")),o=[];if(!Array.isArray(s.content))return[];const i=s.content.filter(e=>e.name.toLowerCase().startsWith(a.toLowerCase())).sort((e,t)=>{const r=("directory"===e.type?-1:1)-("directory"===t.type?-1:1),n=e.name<t.name?-1:1;return r||n});for(const e of i){const{icon:r}=t.getFileTypeForModel(e);let a,s="@file:"+n+e.name;s=s.replaceAll(/(?<!\\) /g,"\\ "),a="directory"===e.type?{name:e.name+"/",providerId:l,icon:r,description:"Search this directory",replaceWith:s+"/"}:{name:e.name,providerId:l,icon:r,description:"Attach this file",replaceWith:s,spaceOnAccept:!0},o.push(a)}return o}(this._contentsManager,this._docRegistry,e);return r}return"@file".startsWith(t)?[{name:"@file:",providerId:this.id,description:"Include a file with your prompt",icon:o().createElement(c.A,null)}]:[]}async onSubmit(e){var t;const r=Array.from(e.value.matchAll(this._regex)),n=[];for(const e of r)e.length<2||n.push(e[1]);for(let r of n)r=r.replaceAll("\\ "," "),null===(t=e.addAttachment)||void 0===t||t.call(e,{type:"file",value:r});e.value=e.value.replaceAll(this._regex,(e,t)=>`\`${t.replaceAll("\\ "," ")}\``)}}const p={id:"@jupyter-ai/core:file-command-plugin",description:"Adds support for the @file command in Jupyter AI.",autoStart:!0,requires:[i.IChatCommandRegistry],activate:(e,t)=>{const{serviceManager:r,docRegistry:n}=e;t.addProvider(new d(r.contents,n))}};var h=r(2702);class u{constructor(){this.id="@jupyter-ai/core:slash-command-provider",this._regex=/\/([\w-]*)/g,this._slash_commands=[{name:"/refresh-personas",providerId:this.id,description:"Refresh available personas",icon:o().createElement(h.A,null),spaceOnAccept:!0}]}async listCommandCompletions(e){const t=function(e){let t=0;for(;t<e.length&&/\s/.test(e[t]);)t++;let r=t;for(;r<e.length&&!/\s/.test(e[r]);)r++;return e.substring(t,r)||null}(e.value);return e.currentWord!==t?[]:t&&t.startsWith("/")?this._slash_commands.filter(e=>e.name.startsWith(t)):[]}async onSubmit(e){}}const m=[{id:"@jupyter-ai/chat-commands:plugin",description:"Package providing the set of default chat commands in Jupyter AI.",autoStart:!0,activate:e=>{console.log("JupyterLab extension @jupyter-ai/chat-commands is activated!"),async function(e="",t={}){const r=a.ServerConnection.makeSettings(),s=n.URLExt.join(r.baseUrl,"jupyter-ai-chat-commands",e);let o;try{o=await a.ServerConnection.makeRequest(s,t,r)}catch(e){throw new a.ServerConnection.NetworkError(e)}let i=await o.text();if(i.length>0)try{i=JSON.parse(i)}catch(e){console.log("Not a JSON response body.",o)}if(!o.ok)throw new a.ServerConnection.ResponseError(o,i.message||i);return i}("get-example").then(e=>{console.log(e)}).catch(e=>{console.error(`The jupyter_ai_chat_commands server extension appears to be missing.\n${e}`)})}},p,{id:"@jupyter-ai/core:slash-command-plugin",description:"Adds support for slash commands in Jupyter AI.",autoStart:!0,requires:[i.IChatCommandRegistry],activate:(e,t)=>{t.addProvider(new u)}}]},2702:(e,t,r)=>{var n=r(5709);t.A=void 0;var a=n(r(2032)),s=r(4848);t.A=(0,a.default)((0,s.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh")}}]);