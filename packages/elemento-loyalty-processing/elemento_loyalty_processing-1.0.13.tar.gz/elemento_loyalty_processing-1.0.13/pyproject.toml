[project]
name = "elemento-loyalty-processing"
version = "1.0.13"
description = "Elemento Loyalty Processing"
requires-python = ">=3.11"
dependencies = [
    "kaiju-tools>=2.4.12,<3",
    "elemento-customers>=1.0.0",
    "kaiju-models>=1.0.4,<2"
]

[project.optional-dependencies]
server = [
    "kaiju-db>=2.3.0,<3",
    "kaiju-redis>=2.4.1,<3",
]
dev = [
    "kaiju-tools [dev]"
]

# --- BUILD CONFIGURATION ---

[build-system]
requires = ["setuptools"]
build-backend = "setuptools.build_meta"

[tool.setuptools]
packages = ["elemento_loyalty_processing"]
py-modules = []
package-dir={elemento_loyalty_processing = 'app'}

# --- TOOL CONFIGURATION ---

[tool.bandit]
skips = ["B101"]  # , "B105", "B110", "B310", "B311", "B404", "B601", "B602", "B603", "B608", "B701"

[tool.black]
line-length = 120
target-version = ['py311']

[tool.isort]
profile = "black"
multi_line_output = 3
lines_after_imports = 2
skip_gitignore = true
balanced_wrapping = true
line_length = 120
wrap_length = 120
known_first_party = ["app"]
src_paths = ["app"]
skip = ['conftest.py', '__init__.py', '__main__.py', 'setup.py']
skip_glob = ['docs/*', 'tests/*']

[tool.pylint]
load-plugins = [
    'pylint.extensions.check_elif',
    'pylint.extensions.docstyle',
    'pylint.extensions.dunder',
    'pylint.extensions.eq_without_hash',
    'pylint.extensions.mccabe',
    'pylint.extensions.overlapping_exceptions',
    'pylint.extensions.private_import'
]
disable = ['C0114', 'C0116', 'C0115', 'R0902', 'R0903', 'R0913', 'R1735', 'W0622', 'W0611', 'W0707', 'R0917', 'R1260', 'W0613']
max-line-length = 120

[tool.pytest.ini_options]
log_cli = true
log_level = "DEBUG"
log_format = '"%(name)s %(levelname)s %(message)s"'
log_cli_level = "DEBUG"
max_args = 10
addopts = "--doctest-modules --doctest-continue-on-failure --ignore=docs/source/conf.py --ignore=conftest.py --ignore=setup.py"
markers = ['docker', 'benchmark']
