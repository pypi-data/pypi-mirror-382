"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[58542],{74490:(e,n,t)=>{t.r(n),t.d(n,{default:()=>k});var a=t(89379),o=t(65043),s=t(97326),i=t(22019),l=t(85672),r=t(6051),c=t(12624),d=t(8354),h=t(42261),m=t(43716),u=t(4015),f=t(76399),p=t(25558),g=t(32513),x=t(75337),v=t(58168);const A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"};var y=t(22172),C=function(e,n){return o.createElement(y.A,(0,v.A)({},e,{ref:n,icon:A}))};const j=o.forwardRef(C);var w=t(70579);const{Panel:b}=s.A,k=e=>{let{visible:n,onClose:t}=e;const[v,A]=(0,o.useState)(null),[y,C]=(0,o.useState)(""),[k,E]=(0,o.useState)(!1);(0,o.useEffect)((()=>{n&&O()}),[n]);const O=async()=>{try{const e=await fetch("/api/mcp/shell-config");if(e.ok){const n=await e.json();A(n)}}catch(e){console.error("Failed to fetch shell config:",e),A({enabled:!0,allowedCommands:[],gitOperationsEnabled:!0,safeGitOperations:[],timeout:30})}},S=async e=>{try{await fetch("/api/mcp/toggle-server",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({server_name:"shell",enabled:e})})}catch(n){console.warn("Failed to sync MCP server toggle:",n)}},G=()=>{v&&y.trim()&&!v.allowedCommands.includes(y.trim())&&(A((e=>(0,a.A)((0,a.A)({},e),{},{allowedCommands:[...e.allowedCommands,y.trim()]}))),C(""))},B=["rm","rmdir","mv","cp","chmod","chown","sudo","su"],N=e=>B.some((n=>e.toLowerCase().includes(n.toLowerCase())));return v?(0,w.jsx)(l.A,{title:"Shell Command Configuration",open:n,onCancel:t,onOk:async()=>{if(v){E(!0);try{const e=await fetch("/api/mcp/shell-config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)});if(e.ok){const n=await e.json();n.success?(await S(v.enabled),window.dispatchEvent(new CustomEvent("mcpStatusChanged",{detail:{serverName:"shell",enabled:v.enabled}})),i.Ay.success(n.message||"Shell configuration updated instantly")):i.Ay.error(n.message||"Failed to update shell configuration"),t()}else i.Ay.error("Failed to save shell configuration")}catch(e){i.Ay.error("Failed to save shell configuration"),console.error("Save error:",e)}finally{E(!1)}}},confirmLoading:k,width:600,okText:"Save Configuration",children:(0,w.jsxs)(r.A,{direction:"vertical",style:{width:"100%"},size:"large",children:[(0,w.jsxs)("div",{children:[(0,w.jsxs)(r.A,{align:"center",children:[(0,w.jsx)(c.A,{checked:v.enabled,onChange:async e=>{A((n=>(0,a.A)((0,a.A)({},n),{},{enabled:e}))),await S(e)}}),(0,w.jsx)("span",{children:"Enable shell command execution"})]}),(0,w.jsx)("div",{style:{marginTop:8,color:"#666",fontSize:"12px"},children:"When enabled, the AI agent can execute whitelisted shell commands"})]}),(0,w.jsx)(d.A,{}),(0,w.jsx)(h.A,{message:"Security Notice",description:"Only enable commands that are safe for AI execution. Git operations are limited to read-only and safe operations by default.",type:"info",showIcon:!0,style:{marginBottom:16}}),(0,w.jsxs)(s.A,{defaultActiveKey:["1"],ghost:!0,children:[(0,w.jsxs)(b,{header:"Basic Configuration",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("h4",{children:"Allowed Commands"}),(0,w.jsx)("div",{style:{marginBottom:12,color:"#666",fontSize:"12px"},children:"Commands that the AI agent can execute. These are loaded from the server configuration."}),(0,w.jsx)("div",{style:{marginBottom:12},children:(0,w.jsxs)(m.A.Group,{compact:!0,children:[(0,w.jsx)(m.A,{placeholder:"Add additional command",value:y,onChange:e=>C(e.target.value),onPressEnter:G,style:{width:"calc(100% - 80px)"}}),(0,w.jsx)(u.Ay,{type:"primary",icon:(0,w.jsx)(x.A,{}),onClick:G,style:{width:80},children:"Add"})]})}),v.allowedCommands&&v.allowedCommands.length>0&&(0,w.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginBottom:16},children:v.allowedCommands.map((e=>(0,w.jsxs)(f.A,{closable:!0,color:N(e)?"red":"blue",onClose:()=>(e=>{v&&A((n=>(0,a.A)((0,a.A)({},n),{},{allowedCommands:n.allowedCommands.filter((n=>n!==e))})))})(e),style:{marginBottom:"4px"},children:[e,N(e)&&(0,w.jsx)(j,{style:{marginLeft:4,color:"#ff4d4f"}})]},e)))})]}),(0,w.jsx)(d.A,{}),(0,w.jsxs)("div",{children:[(0,w.jsxs)("h4",{children:["Command Timeout: ",v.timeout,"s"]}),(0,w.jsx)(p.A,{min:10,max:600,value:v.timeout,onChange:e=>A((n=>(0,a.A)((0,a.A)({},n),{},{timeout:e}))),marks:{10:"10s",60:"1m",120:"2m",300:"5m",600:"10m"},style:{width:"100%",marginBottom:20}})]}),(0,w.jsx)(d.A,{}),(0,w.jsxs)("div",{children:[(0,w.jsxs)(r.A,{align:"center",style:{marginBottom:12},children:[(0,w.jsx)(c.A,{checked:v.gitOperationsEnabled,onChange:e=>A((n=>(0,a.A)((0,a.A)({},n),{},{gitOperationsEnabled:e})))}),(0,w.jsx)("span",{children:"Enable safe Git operations"})]}),(0,w.jsx)("div",{style:{marginBottom:12,color:"#666",fontSize:"12px"},children:"When enabled, allows read-only and safe Git commands"}),v.gitOperationsEnabled&&(0,w.jsxs)("div",{style:{marginLeft:24},children:[(0,w.jsx)("h5",{children:"Allowed Git Operations:"}),(0,w.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:["status","log","show","diff","branch","remote","config --get","ls-files","ls-tree","blame","tag","stash list","reflog","rev-parse","describe","shortlog","whatchanged"].map((e=>(0,w.jsxs)(g.A,{checked:v.safeGitOperations.includes(e),onChange:()=>(e=>{v&&A((n=>(0,a.A)((0,a.A)({},n),{},{safeGitOperations:n.safeGitOperations.includes(e)?n.safeGitOperations.filter((n=>n!==e)):[...n.safeGitOperations,e]})))})(e),children:["git ",e]},e)))})]})]})]},"1"),(0,w.jsx)(b,{header:"Advanced Configuration",children:(0,w.jsx)(h.A,{message:"Advanced Configuration",description:"This section is reserved for future advanced shell configuration options.",type:"info",showIcon:!0})},"2")]})]})}):(0,w.jsx)(l.A,{title:"Shell Command Configuration",open:n,onCancel:t,footer:null,children:(0,w.jsx)("div",{style:{textAlign:"center",padding:"40px"},children:"Loading configuration..."})})}},88042:(e,n,t)=>{t.d(n,{A:()=>s});var a=t(65043),o=t(45818);function s(e){const n=a.useRef(null),t=()=>{o.A.cancel(n.current),n.current=null};return[()=>{t(),n.current=(0,o.A)((()=>{n.current=null}))},a=>{n.current&&(a.stopPropagation(),t()),null===e||void 0===e||e(a)}]}},79688:(e,n,t)=>{t.d(n,{A:()=>u});var a=t(58168),o=t(89379),s=t(64467),i=t(5544),l=t(80045),r=t(98139),c=t.n(r),d=t(28678),h=t(65043),m=["prefixCls","className","style","checked","disabled","defaultChecked","type","title","onChange"];const u=(0,h.forwardRef)((function(e,n){var t=e.prefixCls,r=void 0===t?"rc-checkbox":t,u=e.className,f=e.style,p=e.checked,g=e.disabled,x=e.defaultChecked,v=void 0!==x&&x,A=e.type,y=void 0===A?"checkbox":A,C=e.title,j=e.onChange,w=(0,l.A)(e,m),b=(0,h.useRef)(null),k=(0,h.useRef)(null),E=(0,d.A)(v,{value:p}),O=(0,i.A)(E,2),S=O[0],G=O[1];(0,h.useImperativeHandle)(n,(function(){return{focus:function(e){var n;null===(n=b.current)||void 0===n||n.focus(e)},blur:function(){var e;null===(e=b.current)||void 0===e||e.blur()},input:b.current,nativeElement:k.current}}));var B=c()(r,u,(0,s.A)((0,s.A)({},"".concat(r,"-checked"),S),"".concat(r,"-disabled"),g));return h.createElement("span",{className:B,title:C,style:f,ref:k},h.createElement("input",(0,a.A)({},w,{className:"".concat(r,"-input"),ref:b,onChange:function(n){g||("checked"in e||G(n.target.checked),null===j||void 0===j||j({target:(0,o.A)((0,o.A)({},e),{},{type:y,checked:n.target.checked}),stopPropagation:function(){n.stopPropagation()},preventDefault:function(){n.preventDefault()},nativeEvent:n.nativeEvent}))},disabled:g,checked:!!S,type:y})),h.createElement("span",{className:"".concat(r,"-inner")}))}))}}]);
//# sourceMappingURL=58542.57fed736.chunk.js.map