# 井身结构图生成器 - 参数配置规范

## 概述

井身结构图生成器是一个基于MCP (Model Context Protocol) 的专业服务，能够根据详细的井数据自动生成高质量的井身结构图。本规范详细定义了所有输入参数的格式、类型、限制和示例。

## 核心参数规范

### 1. 基本信息参数

#### 1.1 wellName（井名）
- **参数名**: `wellName`
- **数据类型**: `string`
- **是否必需**: 是
- **描述**: 井的唯一标识名称
- **示例**: `"资212井直改平"`, `"Z212"`, `"资201H3-3"`
- **限制**: 
  - 长度: 1-50字符
  - 不能包含特殊字符: `<>:"/\|?*`
  - 建议使用中文或英文数字组合
- **验证规则**: 非空字符串，符合命名规范

#### 1.2 totalDepth_m（总井深）
- **参数名**: `totalDepth_m`
- **数据类型**: `number`
- **是否必需**: 是
- **描述**: 井的总深度，单位为米
- **示例**: `5150`, `6866`, `6832`
- **限制**: 
  - 范围: 100-15000米
  - 精度: 整数或一位小数
- **验证规则**: 必须大于0，小于等于15000

#### 1.3 wellType（井型）
- **参数名**: `wellType`
- **数据类型**: `string`
- **是否必需**: 是
- **描述**: 井的类型分类
- **可选值**: 
  - `"straight well"` - 直井
  - `"deviated well"` - 定向井
  - `"horizontal well"` - 水平井
- **示例**: `"horizontal well"`
- **限制**: 必须是指定的三个值之一
- **验证规则**: 枚举值验证

### 2. 偏移数据参数 (deviationData)

#### 2.1 kickoffPoint_m（造斜点深度）
- **参数名**: `kickoffPoint_m`
- **数据类型**: `number | null`
- **是否必需**: 条件必需
- **描述**: 造斜点深度，单位为米
- **示例**: `3060`, `4530`, `null`
- **限制**: 
  - 范围: 0-总井深
  - 直井时必须为null
  - 定向井和水平井时必须提供
- **验证规则**: 
  - 直井: 必须为null
  - 定向井/水平井: 必须为有效数值

#### 2.2 deviationAngle_deg（偏移角度）
- **参数名**: `deviationAngle_deg`
- **数据类型**: `number`
- **是否必需**: 是
- **描述**: 井的偏移角度，单位为度
- **示例**: `0`, `30`, `90`
- **限制**: 
  - 范围: 0-90度
  - 直井: 0度
  - 定向井: 0 < 角度 < 90度
  - 水平井: 90度
- **验证规则**: 根据井型验证角度范围

#### 2.3 targetPointA_m（目标点A井深）
- **参数名**: `targetPointA_m`
- **数据类型**: `number | null`
- **是否必需**: 条件必需
- **描述**: 目标点A的井深，单位为米
- **示例**: `5030`, `5090`, `null`
- **限制**: 
  - 范围: 造斜点深度 < 目标点A < 总井深
  - 直井时必须为null
- **验证规则**: 定向井和水平井时必须提供

#### 2.4 targetPointA_verticalDepth_m（目标点A垂深）
- **参数名**: `targetPointA_verticalDepth_m`
- **数据类型**: `number | null`
- **是否必需**: 条件必需
- **描述**: 目标点A的垂直深度，单位为米
- **示例**: `4826.55`, `4825`, `null`
- **限制**: 
  - 范围: 0-总井深
  - 必须小于等于目标点A井深
  - 直井时必须为null
- **验证规则**: 定向井和水平井时必须提供

#### 2.5 targetPointB_m（目标点B井深）
- **参数名**: `targetPointB_m`
- **数据类型**: `number | null`
- **是否必需**: 条件必需
- **描述**: 目标点B的井深，单位为米
- **示例**: `6805`, `6890`, `null`
- **限制**: 
  - 范围: 目标点A < 目标点B < 总井深
  - 直井时必须为null
- **验证规则**: 定向井和水平井时必须提供

#### 2.6 DistanceAB_m（AB点间距离）
- **参数名**: `DistanceAB_m`
- **数据类型**: `number | null`
- **是否必需**: 条件必需
- **描述**: 目标点A和B之间的水平距离，单位为米
- **示例**: `1800`, `null`
- **限制**: 
  - 范围: 0-5000米
  - 直井时必须为null
- **验证规则**: 定向井时必须提供，水平井可为null

#### 2.7 REAL_kickoffPoint_m（实际造斜点）
- **参数名**: `REAL_kickoffPoint_m`
- **数据类型**: `number | null`
- **是否必需**: 条件必需
- **描述**: 实际造斜点深度，单位为米
- **示例**: `4530`, `3060`, `null`
- **限制**: 
  - 范围: 0-总井深
  - 直井时必须为null
- **验证规则**: 定向井和水平井时必须提供

### 3. 地层数据参数 (stratigraphy)

#### 3.1 地层对象结构
- **参数名**: `stratigraphy`
- **数据类型**: `array`
- **是否必需**: 是
- **描述**: 地层数据数组，按深度顺序排列

#### 3.1.1 name（地层名称）
- **参数名**: `name`
- **数据类型**: `string`
- **是否必需**: 是
- **描述**: 地层名称
- **示例**: `"遂宁组"`, `"沙溪庙组"`, `"须家河组"`
- **限制**: 
  - 长度: 1-20字符
  - 使用标准地质术语
- **验证规则**: 非空字符串

#### 3.1.2 topDepth_m（地层顶深）
- **参数名**: `topDepth_m`
- **数据类型**: `number`
- **是否必需**: 是
- **描述**: 地层顶深，单位为米
- **示例**: `0`, `45`, `1195`
- **限制**: 
  - 范围: 0-总井深
  - 第一个地层顶深必须为0
  - 相邻地层顶深必须等于上一个地层底深
- **验证规则**: 必须为有效数值，符合连续性要求

#### 3.1.3 bottomDepth_m（地层底深）
- **参数名**: `bottomDepth_m`
- **数据类型**: `number`
- **是否必需**: 是
- **描述**: 地层底深，单位为米
- **示例**: `45`, `1195`, `5150`
- **限制**: 
  - 范围: 顶深 < 底深 <= 总井深
  - 最后一个地层底深应等于总井深
- **验证规则**: 必须大于顶深，小于等于总井深

### 4. 钻井液压力数据参数 (drillingFluidAndPressure)

#### 4.1 压力段对象结构
- **参数名**: `drillingFluidAndPressure`
- **数据类型**: `array`
- **是否必需**: 是
- **描述**: 钻井液压力数据数组

#### 4.1.1 topDepth_m（压力段顶深）
- **参数名**: `topDepth_m`
- **数据类型**: `number`
- **是否必需**: 是
- **描述**: 压力段顶深，单位为米
- **示例**: `0`, `50`, `1205`
- **限制**: 
  - 范围: 0-总井深
  - 第一个压力段顶深必须为0
  - 相邻压力段顶深必须等于上一个压力段底深
- **验证规则**: 必须为有效数值

#### 4.1.2 bottomDepth_m（压力段底深）
- **参数名**: `bottomDepth_m`
- **数据类型**: `number`
- **是否必需**: 是
- **描述**: 压力段底深，单位为米
- **示例**: `50`, `1205`, `5150`
- **限制**: 
  - 范围: 顶深 < 底深 <= 总井深
  - 最后一个压力段底深应等于总井深
- **验证规则**: 必须大于顶深

#### 4.1.3 porePressure_gcm3（孔隙压力）
- **参数名**: `porePressure_gcm3`
- **数据类型**: `number`
- **是否必需**: 是
- **描述**: 孔隙压力，单位为g/cm³
- **示例**: `1.00`, `1.45`, `1.90`
- **限制**: 
  - 范围: 0.8-2.5 g/cm³
  - 精度: 最多3位小数
- **验证规则**: 必须在地质合理范围内

#### 4.1.4 pressureWindow_gcm3（压力窗口）
- **参数名**: `pressureWindow_gcm3`
- **数据类型**: `object`
- **是否必需**: 是
- **描述**: 压力窗口对象

##### 4.1.4.1 min（最小压力）
- **参数名**: `min`
- **数据类型**: `number`
- **是否必需**: 是
- **描述**: 最小压力，单位为g/cm³
- **示例**: `1.05`, `1.52`, `1.97`
- **限制**: 
  - 范围: 孔隙压力 < 最小压力 < 最大压力
  - 精度: 最多3位小数
- **验证规则**: 必须大于孔隙压力

##### 4.1.4.2 max（最大压力）
- **参数名**: `max`
- **数据类型**: `number`
- **是否必需**: 是
- **描述**: 最大压力，单位为g/cm³
- **示例**: `1.10`, `1.60`, `2.15`
- **限制**: 
  - 范围: 最小压力 < 最大压力 <= 3.0 g/cm³
  - 精度: 最多3位小数
- **验证规则**: 必须大于最小压力

### 5. 井身结构参数 (wellboreStructure)

#### 5.1 holeSections（井眼段）
- **参数名**: `holeSections`
- **数据类型**: `array`
- **是否必需**: 是
- **描述**: 井眼段数据数组

#### 5.1.1 topDepth_m（井眼段顶深）
- **参数名**: `topDepth_m`
- **数据类型**: `number`
- **是否必需**: 是
- **描述**: 井眼段顶深，单位为米
- **示例**: `0`, `50`, `700`
- **限制**: 
  - 范围: 0-总井深
  - 第一个井眼段顶深必须为0
  - 相邻井眼段顶深必须等于上一个井眼段底深
- **验证规则**: 必须为有效数值

#### 5.1.2 bottomDepth_m（井眼段底深）
- **参数名**: `bottomDepth_m`
- **数据类型**: `number`
- **是否必需**: 是
- **描述**: 井眼段底深，单位为米
- **示例**: `50`, `700`, `5150`
- **限制**: 
  - 范围: 顶深 < 底深 <= 总井深
  - 最后一个井眼段底深应等于总井深
- **验证规则**: 必须大于顶深

#### 5.1.3 diameter_mm（井眼直径）
- **参数名**: `diameter_mm`
- **数据类型**: `number`
- **是否必需**: 是
- **描述**: 井眼直径，单位为毫米
- **示例**: `660.4`, `444.5`, `215.9`
- **限制**: 
  - 范围: 100-1000毫米
  - 精度: 最多1位小数
  - 通常从上到下递减
- **验证规则**: 必须为有效数值

#### 5.1.4 note_in（备注）
- **参数名**: `note_in`
- **数据类型**: `string`
- **是否必需**: 是
- **描述**: 井眼段备注信息
- **示例**: `"26\""`, `"17 1/2\""`, `"8 1/2\""`
- **限制**: 
  - 长度: 1-50字符
  - 通常包含英寸规格
- **验证规则**: 非空字符串

#### 5.2 casingSections（套管段）
- **参数名**: `casingSections`
- **数据类型**: `array`
- **是否必需**: 是
- **描述**: 套管段数据数组

#### 5.2.1 topDepth_m（套管顶深）
- **参数名**: `topDepth_m`
- **数据类型**: `number`
- **是否必需**: 是
- **描述**: 套管顶深，单位为米
- **示例**: `0`, `50`
- **限制**: 
  - 范围: 0-总井深
  - 通常为0（从井口开始）
  - 当不为0时，会添加悬挂器
- **验证规则**: 必须为有效数值

#### 5.2.2 bottomDepth_m（套管底深）
- **参数名**: `bottomDepth_m`
- **数据类型**: `number`
- **是否必需**: 是
- **描述**: 套管底深，单位为米
- **示例**: `50`, `698`, `2600`
- **限制**: 
  - 范围: 顶深 < 底深 <= 总井深
  - 应小于等于对应井眼段底深
- **验证规则**: 必须大于顶深

#### 5.2.3 od_mm（套管外径）
- **参数名**: `od_mm`
- **数据类型**: `number`
- **是否必需**: 是
- **描述**: 套管外径，单位为毫米
- **示例**: `508`, `339.7`, `139.7`
- **限制**: 
  - 范围: 50-800毫米
  - 精度: 最多1位小数
  - 通常从上到下递减
- **验证规则**: 必须为有效数值

#### 5.2.4 note_in（套管备注）
- **参数名**: `note_in`
- **数据类型**: `string`
- **是否必需**: 是
- **描述**: 套管段备注信息
- **示例**: `"20\""`, `"13 3/8\""`, `"Φ149.2mm+Φ139.7mm"`
- **限制**: 
  - 长度: 1-50字符
  - 通常包含英寸规格或特殊说明
- **验证规则**: 非空字符串

#### 5.3 pilotHoleGuideLine（导眼井段）
- **参数名**: `pilotHoleGuideLine`
- **数据类型**: `object | null`
- **是否必需**: 否
- **描述**: 导眼井段配置，用于直改平井或侧钻井

#### 5.3.1 topDepth_m（导眼井段顶深）
- **参数名**: `topDepth_m`
- **数据类型**: `number`
- **是否必需**: 条件必需
- **描述**: 导眼井段顶深，单位为米
- **示例**: `4530`
- **限制**: 
  - 范围: 0-总井深
  - 仅在直改平井或侧钻井中使用
- **验证规则**: 当对象存在时必须提供

#### 5.3.2 bottomDepth_m（导眼井段底深）
- **参数名**: `bottomDepth_m`
- **数据类型**: `number`
- **是否必需**: 条件必需
- **描述**: 导眼井段底深，单位为米
- **示例**: `5150`
- **限制**: 
  - 范围: 顶深 < 底深 <= 总井深
- **验证规则**: 当对象存在时必须提供

#### 5.3.3 diameter_mm（导眼井段直径）
- **参数名**: `diameter_mm`
- **数据类型**: `number`
- **是否必需**: 条件必需
- **描述**: 导眼井段直径，单位为毫米
- **示例**: `215.9`
- **限制**: 
  - 范围: 100-1000毫米
  - 应与对应井眼段直径一致
- **验证规则**: 当对象存在时必须提供

#### 5.3.4 display（是否显示）
- **参数名**: `display`
- **数据类型**: `boolean`
- **是否必需**: 条件必需
- **描述**: 是否显示导眼井段
- **示例**: `true`, `false`
- **限制**: 布尔值
- **验证规则**: 当对象存在时必须提供

#### 5.3.5 highlight（是否高亮）
- **参数名**: `highlight`
- **数据类型**: `boolean`
- **是否必需**: 条件必需
- **描述**: 是否高亮显示导眼井段
- **示例**: `true`, `false`
- **限制**: 布尔值
- **验证规则**: 当对象存在时必须提供

#### 5.3.6 side_tracking（是否为侧钻井）
- **参数名**: `side_tracking`
- **数据类型**: `boolean`
- **是否必需**: 条件必需
- **描述**: 是否为侧钻井
- **示例**: `true`, `false`
- **限制**: 布尔值
- **验证规则**: 当对象存在时必须提供

### 6. 图例配置参数 (legendConfig)

#### 6.1 casingLegend（套管图例）
- **参数名**: `casingLegend`
- **数据类型**: `boolean`
- **是否必需**: 是
- **描述**: 是否显示套管图例
- **示例**: `true`, `false`
- **限制**: 布尔值
- **验证规则**: 必须为布尔值

#### 6.2 holeLegend（井眼图例）
- **参数名**: `holeLegend`
- **数据类型**: `boolean`
- **是否必需**: 是
- **描述**: 是否显示井眼图例
- **示例**: `true`, `false`
- **限制**: 布尔值
- **验证规则**: 必须为布尔值

#### 6.3 kickoffLegend（造斜点图例）
- **参数名**: `kickoffLegend`
- **数据类型**: `boolean`
- **是否必需**: 是
- **描述**: 是否显示造斜点图例
- **示例**: `true`, `false`
- **限制**: 布尔值
- **验证规则**: 必须为布尔值

#### 6.4 targetPointsLegend（目标点（靶点）图例）
- **参数名**: `targetPointsLegend`
- **数据类型**: `boolean`
- **是否必需**: 是
- **描述**: 是否显示目标点（靶点）图例
- **示例**: `true`, `false`
- **限制**: 布尔值
- **验证规则**: 必须为布尔值

## 井型配置规则

### 直井配置
- `wellType`: `"straight well"`
- `deviationAngle_deg`: `0`
- `kickoffPoint_m`: `null`
- `targetPointA_m`: `null`
- `targetPointA_verticalDepth_m`: `null`
- `targetPointB_m`: `null`
- `DistanceAB_m`: `null`
- `REAL_kickoffPoint_m`: `null`
- `pilotHoleGuideLine`: `null`
- `kickoffLegend`: `false`
- `targetPointsLegend`: `false`

### 定向井配置
- `wellType`: `"deviated well"`
- `deviationAngle_deg`: `0 < 角度 < 90`
- `kickoffPoint_m`: 有值
- `targetPointA_m`: 有值
- `targetPointA_verticalDepth_m`: 有值
- `targetPointB_m`: 有值
- `DistanceAB_m`: 有值
- `REAL_kickoffPoint_m`: 有值
- `pilotHoleGuideLine`: `null` 或配置对象
- `kickoffLegend`: `true`
- `targetPointsLegend`: `true`

### 水平井配置
- `wellType`: `"horizontal well"`
- `deviationAngle_deg`: `90`
- `kickoffPoint_m`: 有值
- `targetPointA_m`: 有值
- `targetPointA_verticalDepth_m`: 有值
- `targetPointB_m`: 有值
- `DistanceAB_m`: `null` 或有值
- `REAL_kickoffPoint_m`: 有值
- `pilotHoleGuideLine`: `null` 或配置对象
- `kickoffLegend`: `true`
- `targetPointsLegend`: `true`

## 数据完整性验证

### 深度连续性验证
1. 地层数据必须按深度顺序排列
2. 相邻地层/压力段/井眼段的深度必须连续
3. 最后一个段的底深应等于总井深

### 几何关系验证
1. 套管底深应小于等于对应井眼段底深
2. 井眼直径通常从上到下递减
3. 套管外径通常从上到下递减

### 压力关系验证
1. 压力窗口最小值必须大于孔隙压力
2. 压力窗口最大值必须大于最小值
3. 压力值应在地质合理范围内

## 使用示例

### 完整JSON结构示例
```json
{
  "wellName": "示例井",
  "totalDepth_m": 5000,
  "wellType": "horizontal well",
  "deviationData": {
    "kickoffPoint_m": 3000,
    "deviationAngle_deg": 90,
    "targetPointA_m": 4500,
    "targetPointA_verticalDepth_m": 4200,
    "targetPointB_m": 6000,
    "DistanceAB_m": 1500,
    "REAL_kickoffPoint_m": 3000
  },
  "stratigraphy": [
    {
      "name": "地层1",
      "topDepth_m": 0,
      "bottomDepth_m": 1000
    }
  ],
  "drillingFluidAndPressure": [
    {
      "topDepth_m": 0,
      "bottomDepth_m": 1000,
      "porePressure_gcm3": 1.0,
      "pressureWindow_gcm3": {
        "min": 1.05,
        "max": 1.10
      }
    }
  ],
  "wellboreStructure": {
    "holeSections": [
      {
        "topDepth_m": 0,
        "bottomDepth_m": 1000,
        "diameter_mm": 500.0,
        "note_in": "20\""
      }
    ],
    "casingSections": [
      {
        "topDepth_m": 0,
        "bottomDepth_m": 1000,
        "od_mm": 400.0,
        "note_in": "16\""
      }
    ],
    "pilotHoleGuideLine": null
  },
  "legendConfig": {
    "casingLegend": true,
    "holeLegend": false,
    "kickoffLegend": true,
    "targetPointsLegend": true
  }
}
```

