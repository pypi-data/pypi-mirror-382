{"openapi":"3.0.0","info":{"description":"\u003cb\u003eAPI рекламного движка.\u003c/b\u003e\u003cbr\u003e\u003cbr\u003e\u003cbr\u003e\u003cb\u003eВладелец продукта:\u003c/b\u003e Инна Кирьянова\u003cbr\u003e\u003cbr\u003e\u003cb\u003eemail:\u003c/b\u003e \u003ca href='mailto:inna.kiryanova@atom.team'\u003einna.kiryanova@atom.team\u003c/a\u003e\u003cbr\u003e\u003cbr\u003e\u003cb\u003etime:\u003c/b\u003e \u003ca href='https://time.e-kama.com/atom/messages/@inna.kiryanova'\u003e@inna.kiryanova\u003c/a\u003e\u003cbr\u003e\u003cbr\u003e\u003cbr\u003e\u003cb\u003eВедущий инженер:\u003c/b\u003e Станислав Жаворонков\u003cbr\u003e\u003cbr\u003e\u003cb\u003eemail:\u003c/b\u003e \u003ca href='mailto:stanislav.zhavoronkov@atom.team'\u003estanislav.zhavoronkov@atom.team\u003c/a\u003e\u003cbr\u003e\u003cbr\u003e\u003cb\u003etime:\u003c/b\u003e \u003ca href='https://time.e-kama.com/atom/messages/@stanislav.zhavoronkov'\u003e@stanislav.zhavoronkov\u003c/a\u003e","title":"Advertisement API Documentation","version":"0.0.9-a1:04f75fd3:2025-09-22T08:07:03Z"},"paths":{"/api/v1/public/adunits/{adunit_id}":{"get":{"description":"Возвращает данные рекламного блока в сжатом или развернутом виде.","parameters":[{"description":"Идентификатор рекламного блока","example":"unt_01k42enz7cm4ktav01g89ee8an","in":"path","name":"adunit_id","required":true,"schema":{"type":"string"}},{"description":"Флаг полноты возвращаемых данных","in":"query","name":"fields_all","schema":{"default":"false","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/httpAdapters.adUnitPartialResponse"},{"$ref":"#/components/schemas/httpAdapters.adUnitResponse"}]}}},"description":"Успешный ответ"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/domain.ErrorMissingAdUnitID"}}},"description":"Отсутствует идентификатор рекламного блока"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/domain.ErrorEntityNotFound"}}},"description":"Ошибка получения рекламного блока"},"405":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/domain.ErrorMethodNotAllowed"}}},"description":"Метод не разрешен"},"422":{"content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/domain.ErrorMissingMarkup"},{"$ref":"#/components/schemas/domain.ErrorMissingFileName"},{"$ref":"#/components/schemas/domain.ErrorInvalidFileNameType"}]}}},"description":"Ошибка при обработке рекламного блока"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/domain.ErrorJSONEncodingFailed"}}},"description":"Внутренняя ошибка сервера"}},"summary":"Получение рекламного блока","tags":["serving"]}},"/api/v1/public/recommendations":{"get":{"description":"Возвращает персонализированные или анонимные рекомендации для рекламного места\n\n- Персонализированные рекомендации: если передан Atomid-Access-Token\n- Анонимные рекомендации: Atomid-Access-Token не передан","parameters":[{"description":"Идентификатор рекламного места","example":"plc_01k3tyd23q8ntg0meprd2arqkf","in":"query","name":"adplace_id","required":true,"schema":{"type":"string"}},{"description":"Лимит количества рекомендаций","in":"query","name":"limit","schema":{"default":1,"minimum":1,"type":"integer"}},{"description":"Идентификатор пользователя для персонализированных рекомендаций","in":"header","name":"Atomid-Access-Token","schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/httpAdapters.recommendationsResponse"}}},"description":"Успешный ответ со списком рекомендаций"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/domain.ErrorMissingAdPlaceID"}}},"description":"Отсутствует идентификатор рекламного места"},"405":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/domain.ErrorMethodNotAllowed"}}},"description":"Метод не разрешен"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/domain.ErrorRecommendationFailed"}}},"description":"Ошибка при обработке данных"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/domain.ErrorJSONEncodingFailed"}}},"description":"Внутренняя ошибка сервера"}},"summary":"Получение рекомендаций рекламных кампаний","tags":["adpicker"]}}},"components":{"schemas":{"commands.CreateAdCampaignParams":{"properties":{"adplace_ids":{"example":["plc_01k4790dw5q6n6xg8bdvyj8t0a"],"items":{"type":"string"},"type":"array","uniqueItems":false},"adunit_ids":{"example":["unt_01k594rz0nntawxm8pa8jvq954"],"items":{"type":"string"},"type":"array","uniqueItems":false},"finish_dt":{"example":"2028-09-01T10:55:33.100975Z","type":"string"},"start_dt":{"example":"2025-09-01T10:55:33.100975Z","type":"string"},"tags":{"example":["auto"],"items":{"type":"string"},"type":"array","uniqueItems":false},"title":{"example":"Кампания для пульса","type":"string"}},"type":"object"},"commands.CreateAdPlaceParams":{"properties":{"length":{"example":267,"type":"integer"},"supported_types":{"example":["banner"],"items":{"type":"string"},"type":"array","uniqueItems":false},"title":{"example":"AtomID (web)","type":"string"},"width":{"example":134,"type":"integer"}},"type":"object"},"commands.CreateAdUnitParams":{"properties":{"advertiser":{"example":"ATOM","type":"string"},"ai":{"example":"redirect","type":"string"},"title":{"example":"Рекламный блок","type":"string"},"type":{"example":"banner","type":"string"}},"type":"object"},"commands.UpdateAdCampaignParams":{"properties":{"adplace_ids":{"example":["plc_01k4790dw5q6n6xg8bdvyj8t0a"],"items":{"type":"string"},"type":"array","uniqueItems":false},"adunit_ids":{"example":["unt_01k594rz0nntawxm8pa8jvq954"],"items":{"type":"string"},"type":"array","uniqueItems":false},"description":{"example":"ADAS - помощь при вождении","type":"string"},"finish_dt":{"example":"2026-09-01T10:55:33.100975Z","type":"string"},"meta":{"additionalProperties":{},"type":"object"},"start_dt":{"example":"2025-09-01T10:55:33.100975Z","type":"string"},"status":{"example":"active","type":"string"},"tags":{"example":["auto"],"items":{"type":"string"},"type":"array","uniqueItems":false},"title":{"example":"Кампания для пульса","type":"string"}},"type":"object"},"commands.UpdateAdPlaceParams":{"properties":{"description":{"example":"Домашняя страница","type":"string"},"length":{"example":267,"type":"integer"},"meta":{"additionalProperties":{},"type":"object"},"supported_types":{"example":["banner"],"items":{"type":"string"},"type":"array","uniqueItems":false},"title":{"example":"AtomID (web)","type":"string"},"width":{"example":134,"type":"integer"}},"type":"object"},"commands.UpdateAdUnitParams":{"properties":{"advertiser":{"example":"ATOM","type":"string"},"ai":{"example":"redirect","type":"string"},"markup":{"items":{"$ref":"#/components/schemas/domain.MarkupItem"},"type":"array","uniqueItems":false},"meta":{"additionalProperties":{},"type":"object"},"status":{"example":"active","type":"string"},"title":{"example":"Рекламный блок","type":"string"},"type":{"example":"banner","type":"string"}},"type":"object"},"domain.AdCampaign":{"properties":{"adplaces":{"items":{"$ref":"#/components/schemas/domain.BaseInfo"},"type":"array","uniqueItems":false},"adunits":{"items":{"$ref":"#/components/schemas/domain.BaseInfo"},"type":"array","uniqueItems":false},"author":{"example":"user@atom.team","type":"string"},"created_at":{"example":"2025-09-01T10:55:33.100975Z","type":"string"},"description":{"example":"ADAS - помощь при вождении","type":"string"},"finish_dt":{"example":"2026-09-01T10:55:33.100975Z","type":"string"},"id":{"example":"cmp_01k42enz7cm4ktav01g89ee8an","type":"string"},"meta":{"additionalProperties":{},"type":"object"},"start_dt":{"example":"2025-09-01T10:55:33.100975Z","type":"string"},"status":{"example":"active","type":"string"},"tags":{"example":["auto"],"items":{"type":"string"},"type":"array","uniqueItems":false},"title":{"example":"Кампания для пульса","type":"string"},"updated_at":{"example":"2025-09-01T10:55:33.100975Z","type":"string"}},"type":"object"},"domain.AdPlace":{"properties":{"description":{"example":"Домашняя страница","type":"string"},"id":{"example":"plc_01k3tyd305gz8s7zpyj38p2fs4","type":"string"},"length":{"example":267,"type":"integer"},"meta":{"additionalProperties":{},"type":"object"},"supported_types":{"example":["banner"],"items":{"type":"string"},"type":"array","uniqueItems":false},"title":{"example":"AtomID (web)","type":"string"},"width":{"example":134,"type":"integer"}},"type":"object"},"domain.AdUnit":{"properties":{"advertiser":{"example":"ATOM","type":"string"},"ai":{"example":"redirect","type":"string"},"author":{"example":"user","type":"string"},"created_at":{"example":"2025-09-01T10:55:33.100975Z","type":"string"},"id":{"example":"unt_01k42enz7cm4ktav01g89ee8an","type":"string"},"markup":{"items":{"$ref":"#/components/schemas/domain.MarkupItem"},"type":"array","uniqueItems":false},"meta":{"additionalProperties":{},"type":"object"},"status":{"example":"active","type":"string"},"title":{"example":"Рекламный блок","type":"string"},"type":{"example":"banner","type":"string"},"updated_at":{"example":"2025-09-01T10:56:14.020685Z","type":"string"}},"type":"object"},"domain.BaseInfo":{"properties":{"id":{"example":"unt_01k42enz7cm4ktav01g89ee8an","type":"string"},"title":{"example":"AtomID","type":"string"}},"type":"object"},"domain.ErrorCreateRecordFailed":{"properties":{"message":{"example":"Не удалось создать запись","type":"string"}},"type":"object"},"domain.ErrorDeleteRecordFailed":{"properties":{"message":{"example":"Не удалось удалить записи","type":"string"}},"type":"object"},"domain.ErrorEntityNotFound":{"properties":{"message":{"example":"Не удалось получить объект","type":"string"}},"type":"object"},"domain.ErrorFetchFailed":{"properties":{"message":{"example":"Не удалось извлечь записи из базы данных","type":"string"}},"type":"object"},"domain.ErrorImportRecordsFailed":{"properties":{"message":{"example":"Не удалось импортировать записи","type":"string"}},"type":"object"},"domain.ErrorInvalidFileNameType":{"properties":{"message":{"example":"Некорректный тип названия файла","type":"string"}},"type":"object"},"domain.ErrorInvalidPayload":{"properties":{"message":{"example":"Передан Невалидный payload","type":"string"}},"type":"object"},"domain.ErrorInvalidServiceName":{"properties":{"message":{"example":"Передано невалидное имя сервиса","type":"string"}},"type":"object"},"domain.ErrorJSONEncodingFailed":{"properties":{"message":{"example":"Не удалось закодировать ответ в JSON","type":"string"}},"type":"object"},"domain.ErrorMethodNotAllowed":{"properties":{"message":{"example":"Метод не разрешен","type":"string"}},"type":"object"},"domain.ErrorMissingAdPlaceID":{"properties":{"message":{"example":"Необходимо передать параметр adplace_id","type":"string"}},"type":"object"},"domain.ErrorMissingAdUnitID":{"properties":{"message":{"example":"Необходимо передать параметр adunit_id","type":"string"}},"type":"object"},"domain.ErrorMissingFileName":{"properties":{"message":{"example":"Отсутствует название файла рекламного блока","type":"string"}},"type":"object"},"domain.ErrorMissingMarkup":{"properties":{"message":{"example":"Отсутствует markup рекламного блока","type":"string"}},"type":"object"},"domain.ErrorMissingServiceName":{"properties":{"message":{"example":"Отсутствует имя сервиса","type":"string"}},"type":"object"},"domain.ErrorPayloadTooLarge":{"properties":{"message":{"example":"Превышен максимальный размер загрузки (10485760 KB)","type":"string"}},"type":"object"},"domain.ErrorRecommendationFailed":{"properties":{"message":{"example":"Не удалось получить рекомендованные рекламные блоки","type":"string"}},"type":"object"},"domain.ErrorUpdateRecordFailed":{"properties":{"message":{"example":"Не удалось обновить запись","type":"string"}},"type":"object"},"domain.ErrorUploadFailed":{"properties":{"message":{"example":"Ошибка при загрузке файлов в хранилище","type":"string"}},"type":"object"},"domain.MarkupItem":{"properties":{"content":{"example":"Список байтов"},"header":{"example":"Заголовок","type":"string"},"text":{"example":"Основной текст","type":"string"},"url":{"example":"https://example.com","type":"string"}},"type":"object"},"domain.Recommendation":{"properties":{"adunit_id":{"description":"Идентификатор рекламного блока","example":"unt_01k42enz7cm4ktav01g89ee8an","type":"string"},"expires_at":{"description":"Время истечения действия рекомендации","example":"2025-09-11T11:12:34.342734054Z","type":"string"},"url":{"description":"URL для получения рекламного блока","example":"http://localhost:8001/api/v1/public/adunits/unt_01k42enz7cm4ktav01g89ee8an","type":"string"}},"type":"object"},"domain.ServiceSettings":{"properties":{"service_name":{"example":"admin","type":"string"},"settings":{"additionalProperties":{},"type":"object"},"updated_at":{"example":"2025-09-01T10:56:14.020685Z","type":"string"}},"type":"object"},"httpAdapters.adCampaignsResponse":{"properties":{"cursor":{"example":"cmp_01k3tyd305gz8s7zpyj38p2fs4","type":"string"},"data":{"items":{"$ref":"#/components/schemas/domain.AdCampaign"},"type":"array","uniqueItems":false}},"type":"object"},"httpAdapters.adPlacesResponse":{"properties":{"cursor":{"example":"plc_01k3tyd305gz8s7zpyj38p2fs4","type":"string"},"data":{"items":{"$ref":"#/components/schemas/domain.AdPlace"},"type":"array","uniqueItems":false}},"type":"object"},"httpAdapters.adUnitPartialResponse":{"properties":{"data":{"properties":{"ai":{"example":"redirect","type":"string"},"markup":{"items":{"$ref":"#/components/schemas/domain.MarkupItem"},"type":"array","uniqueItems":false},"type":{"example":"banner","type":"string"}},"type":"object"}},"type":"object"},"httpAdapters.adUnitResponse":{"properties":{"data":{"$ref":"#/components/schemas/domain.AdUnit"}},"type":"object"},"httpAdapters.adUnitsResponse":{"properties":{"cursor":{"example":"unt_01k3tyd305gz8s7zpyj38p2fs4","type":"string"},"data":{"items":{"$ref":"#/components/schemas/domain.AdUnit"},"type":"array","uniqueItems":false}},"type":"object"},"httpAdapters.createResponse":{"properties":{"data":{"example":"created","type":"string"}},"type":"object"},"httpAdapters.deleteResponse":{"properties":{"data":{"example":"deleted","type":"string"}},"type":"object"},"httpAdapters.downloadResponse":{"properties":{"data":{"example":"downloaded","type":"string"}},"type":"object"},"httpAdapters.importAdPlacesRequest":{"properties":{"adplaces":{"items":{"$ref":"#/components/schemas/domain.AdPlace"},"type":"array","uniqueItems":false}},"type":"object"},"httpAdapters.importResponse":{"properties":{"data":{"example":"imported","type":"string"}},"type":"object"},"httpAdapters.importServicesSettingsRequest":{"properties":{"manysets":{"items":{"$ref":"#/components/schemas/domain.ServiceSettings"},"type":"array","uniqueItems":false}},"type":"object"},"httpAdapters.partialUploadResponse":{"properties":{"errors":{"additionalProperties":{},"example":{"{\"file1.txt\"":" \"превышен размер\"}"},"type":"object"},"message":{"example":"Часть файлов не была загружена","type":"string"}},"type":"object"},"httpAdapters.recommendationsResponse":{"properties":{"data":{"items":{"$ref":"#/components/schemas/domain.Recommendation"},"type":"array","uniqueItems":false}},"type":"object"},"httpAdapters.serviceSettingsListResponse":{"properties":{"data":{"items":{"$ref":"#/components/schemas/domain.ServiceSettings"},"type":"array","uniqueItems":false}},"type":"object"},"httpAdapters.serviceSettingsResponse":{"properties":{"data":{"properties":{"service_settings":{"$ref":"#/components/schemas/domain.ServiceSettings"}},"type":"object"}},"type":"object"},"httpAdapters.updateResponse":{"properties":{"data":{"example":"updated","type":"string"}},"type":"object"},"httpAdapters.updateSettingsPayload":{"properties":{"settings":{"additionalProperties":{},"type":"object"}},"type":"object"}}},"tags":[{"description":"\u003cb\u003eAPI для работы с admin.\u003c/b\u003e\u003cbr\u003e\u003cbr\u003e\u003cb\u003eОписание:\u003c/b\u003e Сервис предоставляет набор ручек (API) для работы с административной панелью.\u003cbr\u003e\u003cbr\u003e\u003cb\u003eОтветственный инженер:\u003c/b\u003e Ангелина Артемьева\u003cbr\u003e\u003cbr\u003e\u003cb\u003eemail:\u003c/b\u003e \u003ca href='mailto:angelina.artemeva@atom.team'\u003eangelina.artemeva@atom.team\u003c/a\u003e\u003cbr\u003e\u003cbr\u003e\u003cb\u003etime:\u003c/b\u003e \u003ca href='https://time.e-kama.com/atom/messages/@angelina.artemeva'\u003e@angelina.artemeva\u003c/a\u003e","name":"admin"},{"description":"\u003cb\u003eAPI для работы с adpicker.\u003c/b\u003e\u003cbr\u003e\u003cbr\u003e\u003cb\u003eОписание:\u003c/b\u003e Сервис осуществляет подбор рекламы для внешних сервисов.\u003cbr\u003e\u003cbr\u003e\u003cb\u003eОтветственный инженер:\u003c/b\u003e Ангелина Артемьева\u003cbr\u003e\u003cbr\u003e\u003cb\u003eemail:\u003c/b\u003e \u003ca href='mailto:angelina.artemeva@atom.team'\u003eangelina.artemeva@atom.team\u003c/a\u003e\u003cbr\u003e\u003cbr\u003e\u003cb\u003etime:\u003c/b\u003e \u003ca href='https://time.e-kama.com/atom/messages/@angelina.artemeva'\u003e@angelina.artemeva\u003c/a\u003e","name":"adpicker"},{"description":"\u003cb\u003eAPI для работы с serving.\u003c/b\u003e\u003cbr\u003e\u003cbr\u003e\u003cb\u003eОписание:\u003c/b\u003e Сервис осуществляет раздачу рекламы для внешних сервисов.\u003cbr\u003e\u003cbr\u003e\u003cb\u003eОтветственный инженер:\u003c/b\u003e Ангелина Артемьева\u003cbr\u003e\u003cbr\u003e\u003cb\u003eemail:\u003c/b\u003e \u003ca href='mailto:angelina.artemeva@atom.team'\u003eangelina.artemeva@atom.team\u003c/a\u003e\u003cbr\u003e\u003cbr\u003e\u003cb\u003etime:\u003c/b\u003e \u003ca href='https://time.e-kama.com/atom/messages/@angelina.artemeva'\u003e@angelina.artemeva\u003c/a\u003e","name":"serving"}]}
