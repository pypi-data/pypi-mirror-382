# Advanced configuration for dbt-erd

# Naming patterns with comprehensive patterns
naming:
  # Table type patterns - expanded for different naming conventions
  dimension_patterns:
    - "dim_"
    - "__dim_"
    - "_dim_"
    - "dw__dim"
    - "dimension_"
    - "d_"
    - "reference_"
  fact_patterns:
    - "fact_"
    - "__fact_"
    - "_fact_"
    - "dw__fact"
    - "fct_"
    - "f_"
    - "transaction_"
  
  # Key identification patterns - expanded
  dim_pk_patterns:
    - "_pk"
    - "_key" 
    - "_id"
    - "_sk"
    - "_surrogate_key"
    - "_business_key"
  fact_pk_patterns:
    - "_pk"
    - "_key"
    - "_id"
    - "_sk"
    - "_surrogate_key"
    - "_transaction_id"
  fact_fk_patterns:
    - "_fk"
    - "_id"
    - "_reference"
    - "_link"
  
  # Table name prefixes to strip when extracting entity names
  table_prefixes:
    - "dw__"
    - "mart__"
    - "stg__"
    - "obt__"
    - "raw__"
    - "reporting__"
    - "analytics__"

# Visualization settings
visualization:
  max_dimensions: 20
  show_columns: true
  column_limit: 75
  
# Mermaid settings - comprehensive configuration
mermaid:
  theme: "neutral"  # Options: default, forest, dark, neutral
  direction: "LR"   # LR (left-right) or TB (top-bottom)
  
  # Output files to generate
  outputs:
    mmd: true   # Generate raw Mermaid source code
    html: true  # Generate HTML with client-side rendering
  
  # Enable interactive features in HTML output
  interactive: true
  
  # Table styling options
  style:
    fact_table_fill: "#f9f4de"       # Light yellow for fact tables
    dimension_table_fill: "#e4f1f7"  # Light blue for dimension tables
  
  # Embedding options for dbt docs
  embed:
    type: "html"  # Options: 'html'

# Performance settings
performance:
  parallel: true
  max_workers: 4

# File paths
paths:
  asset_base: "assets/img"
  yaml_extension: ".yml"

# Relationship settings
relationships:
  default_type: "many_to_one"
  detect_from_naming: true
  show_labels: true
  multiple_fk_handling: "all"  # "first", "all", or "none"
  relationship_types:
    many_to_one:
      description: "Many-to-One"
      start_marker: "many"
      end_marker: "one"
    one_to_many:
      description: "One-to-Many"
      start_marker: "one"
      end_marker: "many"
    many_to_many:
      description: "Many-to-Many"
      start_marker: "many"
      end_marker: "many"
    one_to_one:
      description: "One-to-One"
      start_marker: "one"
      end_marker: "one"
    zero_one_to_many:
      description: "Zero/One-to-Many"
      start_marker: "zero_one"
      end_marker: "many"
    zero_one_to_one:
      description: "Zero/One-to-One"
      start_marker: "zero_one"
      end_marker: "one"
    zero_many_to_one:
      description: "Zero/Many-to-One"
      start_marker: "zero_many"
      end_marker: "one"