
# MCP —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å OData 1C

MCP (Model Context Protocol) —Å–µ—Ä–≤–µ—Ä –Ω–∞ Python –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Å–∏—Å—Ç–µ–º–æ–π 1–° —á–µ—Ä–µ–∑ OData API. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ 1–° —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ JSON —Ñ–∞–π–ª—ã.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìä **–ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–µ—Ç–∞–æ–±—ä–µ–∫—Ç–æ–≤ 1–° —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ JSON
- üîç **–ó–∞–ø—Ä–æ—Å—ã –∫ –¥–∞–Ω–Ω—ã–º** - –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ 1–° —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ JSON —Ñ–∞–π–ª—ã
- üóÇÔ∏è **–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞** - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –∞–Ω–∞–ª–∏–∑ JSON –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ 1–°
- üìù **CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏** - —Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- üè™ **–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã** - —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –†–¢–∏–£ —Å –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞–º–∏
- üîê **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - Basic Auth –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ 1–°
- üíæ **JSON –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ JSON —Ñ–∞–π–ª—ã
- üìã **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ —á–µ—Ä–µ–∑ loguru

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ JSON-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

- **–≠–∫–æ–Ω–æ–º–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ LLM** - —Ñ—É–Ω–∫—Ü–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ç—É—Å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- **–ë—ã—Å—Ç—Ä–∞—è –ª–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞** - –∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ 1–°  
- **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö** - –≤—Å–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏
- **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** - –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ —á–∏—Ç–∞–µ–º–æ–º JSON —Ñ–æ—Ä–º–∞—Ç–µ

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
uv sync
```

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `config.example` –≤ `.env` –∏ —É–∫–∞–∂–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:

```bash
cp config.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env`:
```env
ODATA_BASE_URL=http://your-1c-server/Base/odata/standard.odata/
ODATA_USERNAME=your_username
ODATA_PASSWORD=your_password
```

### 3. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
uv run main.py
```

### 4. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

```json
"connect_1c_mcp": {
      "url": "http://localhost:8000/sse", // url —Å–µ—Ä–≤–µ—Ä–∞
      "transport": "sse"
},
```


## –î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

### –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ 1–°
- `fetch_1c_metadata()` - –ø–æ–ª—É—á–∏—Ç—å –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –º–µ—Ç–∞–æ–±—ä–µ–∫—Ç–æ–≤ –≤ JSON
- `fetch_1c_data()` - –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ 1–° –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ JSON —Ñ–∞–π–ª
- `get_1c_entity()` - –ø–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Å—É—â–Ω–æ—Å—Ç—å –ø–æ –∫–ª—é—á—É

### CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —Å—É—â–Ω–æ—Å—Ç—è–º–∏
- `create_1c_entity()` - —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å—É—â–Ω–æ—Å—Ç—å (—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫, –¥–æ–∫—É–º–µ–Ω—Ç –∏ –¥—Ä.)
- `update_1c_entity()` - –æ–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å—É—â–Ω–æ—Å—Ç—å –≤ 1–°
- `delete_1c_document()` - —É–¥–∞–ª–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç –∏–∑ 1–°
- `create_rtu_document()` - —Å–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç –†–¢–∏–£ –Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ –¥—Ä—É–≥–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞

### –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–æ–≤—ã–µ)
- ~~`create_1c_document()`~~ ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `create_1c_entity()`
- ~~`update_1c_document()`~~ ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `update_1c_entity()`

### –†–∞–±–æ—Ç–∞ —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ JSON –¥–∞–Ω–Ω—ã–º–∏
- `list_cached_data()` - –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö JSON —Ñ–∞–π–ª–æ–≤
- `get_file_structure()` - –ø–æ–ª—É—á–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É JSON —Ñ–∞–π–ª–∞ (–ø–æ–ª—è, —Ç–∏–ø—ã, –ø—Ä–∏–º–µ—Ä—ã)
- `filter_local_data()` - —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ JSON —Ñ–∞–π–ª–∞
- `count_local_data()` - –ø–æ–¥—Å—á–∏—Ç–∞—Ç—å –∑–∞–ø–∏—Å–∏ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º JSON —Ñ–∞–π–ª–µ

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—ç—à–µ–º
- `get_cache_info()` - –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –∫—ç—à–∞
- `clear_metadata_cache()` - –æ—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
- `clear_data_cache()` - –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

## –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å

1. `fetch_1c_metadata()` - –ø–æ–ª—É—á–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –º–µ—Ç–∞–æ–±—ä–µ–∫—Ç–æ–≤ 1–°
2. `fetch_1c_data()` - –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω—É–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ JSON —Ñ–∞–π–ª
3. `list_cached_data()` - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
4. `get_file_structure()` - –∏–∑—É—á–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ñ–∞–π–ª–∞ —Å –¥–∞–Ω–Ω—ã–º–∏
5. `filter_local_data()` —Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π –∏–ª–∏ `count_local_data()` - –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

## –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

### –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
```python
# –ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–≤—ã–µ 10 –∑–∞–ø–∏—Å–µ–π, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ –ø–æ–ª—é "Description"
filter_local_data(
    file_name="Catalog_Products_abc123.json",
    sort_by="Description",
    sort_desc=False,  # –ü–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é
    limit=10
)
```

### –ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ñ–∞–π–ª–∞
```python
# –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—è—Ö, —Ç–∏–ø–∞—Ö –∏ –ø—Ä–∏–º–µ—Ä–∞—Ö –∑–Ω–∞—á–µ–Ω–∏–π
get_file_structure(file_name="Catalog_Products_abc123.json")

# –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–æ–µ –∏–º—è - —Å–∏—Å—Ç–µ–º–∞ –Ω–∞–π–¥–µ—Ç —Ñ–∞–π–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
get_file_structure(file_name="Catalog_Products")
```

### –°–æ–∑–¥–∞–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π

#### –°–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞
```python
create_1c_entity(
    entity_set="Catalog_Products",
    data={
        "Code": "PROD001", 
        "Description": "–ù–æ–≤—ã–π —Ç–æ–≤–∞—Ä",
        "Price": 1000.00
    }
)
```

#### –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
```python
create_1c_entity(
    entity_set="Document_SalesOrder",
    data={
        "Number": "SO-001",
        "Organization_Key": "guid'...'",
        "Counterparty_Key": "guid'...'"
        # –î–∞—Ç–∞ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
    }
)
```

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏
```python
update_1c_entity(
    entity_set="Catalog_Products",
    entity_key="guid'...'",
    data={
        "Description": "–û–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ",
        "Price": 1200.00
    }
)
```

### –£–º–Ω—ã–π –ø–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤
–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç —É–º–Ω—ã–π –ø–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤:

**–í–∞—Ä–∏–∞–Ω—Ç—ã –ø–æ–∏—Å–∫–∞:**
- –ü–æ —Ç–æ—á–Ω–æ–º—É –∏–º–µ–Ω–∏: `Catalog_Products_abc123.json`
- –° —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º .json: `Catalog_Products.json` (–Ω–∞–π–¥–µ—Ç `Catalog_Products_abc123.json`)
- –ü–æ –Ω–∞—á–∞–ª—É –∏–º–µ–Ω–∏: `Catalog_Products` (–Ω–∞–π–¥–µ—Ç `Catalog_Products_abc123.json`)
- –ü–æ —á–∞—Å—Ç–∏—á–Ω–æ–º—É —Å–æ–≤–ø–∞–¥–µ–Ω–∏—é: `Products` (–Ω–∞–π–¥–µ—Ç —Ñ–∞–π–ª, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π "Products" –≤ –∏–º–µ–Ω–∏)

**–ü—Ä–∞–≤–∏–ª–∞ –ø–æ–∏—Å–∫–∞:**
1. –°–Ω–∞—á–∞–ª–∞ –∏—â–µ—Ç—Å—è —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
2. –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –∏ –∑–∞–ø—Ä–æ—Å —Å–æ–¥–µ—Ä–∂–∏—Ç `.json`, —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —É–±–∏—Ä–∞–µ—Ç—Å—è –∏–∑ –ø–æ–∏—Å–∫–∞
3. –ò—â—É—Ç—Å—è —Ñ–∞–π–ª—ã, –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∏–º–µ–Ω–∏
4. –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, –∏—â—É—Ç—Å—è —Ñ–∞–π–ª—ã, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –∏–º—è
5. –ü—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è—Ö –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è —Å–∞–º—ã–π –Ω–æ–≤—ã–π —Ñ–∞–π–ª

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞ —Å–º. –≤ [architecture.md](architecture.md).

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.12+
- –î–æ—Å—Ç—É–ø –∫ OData API 1–°
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –≤ 1–°

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ —Ä–∞–∑–≤–∏—Ç–∏–µ
–ü—Ä–æ–µ–∫—Ç –∞–∫—Ç–∏–≤–Ω–æ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è. –í–æ–ø—Ä–æ—Å—ã –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —É–ª—É—á—à–µ–Ω–∏—é –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è —á–µ—Ä–µ–∑ Issues.